import{r as qg,a as Gg,b as I,R as Vt,g as Zg,u as bn,c as Eu,d as kg,B as Xg,e as Yg,f as hn,N as Zi}from"./react-VnhKuelM.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))r(d);new MutationObserver(d=>{for(const f of d)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&r(g)}).observe(document,{childList:!0,subtree:!0});function i(d){const f={};return d.integrity&&(f.integrity=d.integrity),d.referrerPolicy&&(f.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?f.credentials="include":d.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function r(d){if(d.ep)return;d.ep=!0;const f=i(d);fetch(d.href,f)}})();var ou={exports:{}},vs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0;function Kg(){if(k0)return vs;k0=1;var o=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function i(r,d,f){var g=null;if(f!==void 0&&(g=""+f),d.key!==void 0&&(g=""+d.key),"key"in d){f={};for(var v in d)v!=="key"&&(f[v]=d[v])}else f=d;return d=f.ref,{$$typeof:o,type:r,key:g,ref:d!==void 0?d:null,props:f}}return vs.Fragment=s,vs.jsx=i,vs.jsxs=i,vs}var X0;function Qg(){return X0||(X0=1,ou.exports=Kg()),ou.exports}var u=Qg(),du={exports:{}},ps={},fu={exports:{}},hu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y0;function $g(){return Y0||(Y0=1,function(o){function s(E,q){var F=E.length;E.push(q);e:for(;0<F;){var ie=F-1>>>1,pe=E[ie];if(0<d(pe,q))E[ie]=q,E[F]=pe,F=ie;else break e}}function i(E){return E.length===0?null:E[0]}function r(E){if(E.length===0)return null;var q=E[0],F=E.pop();if(F!==q){E[0]=F;e:for(var ie=0,pe=E.length,qe=pe>>>1;ie<qe;){var Te=2*(ie+1)-1,Ee=E[Te],Qe=Te+1,St=E[Qe];if(0>d(Ee,F))Qe<pe&&0>d(St,Ee)?(E[ie]=St,E[Qe]=F,ie=Qe):(E[ie]=Ee,E[Te]=F,ie=Te);else if(Qe<pe&&0>d(St,F))E[ie]=St,E[Qe]=F,ie=Qe;else break e}}return q}function d(E,q){var F=E.sortIndex-q.sortIndex;return F!==0?F:E.id-q.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;o.unstable_now=function(){return f.now()}}else{var g=Date,v=g.now();o.unstable_now=function(){return g.now()-v}}var T=[],x=[],N=1,p=null,_=3,B=!1,X=!1,P=!1,U=!1,k=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function L(E){for(var q=i(x);q!==null;){if(q.callback===null)r(x);else if(q.startTime<=E)r(x),q.sortIndex=q.expirationTime,s(T,q);else break;q=i(x)}}function G(E){if(P=!1,L(E),!X)if(i(T)!==null)X=!0,Z||(Z=!0,W());else{var q=i(x);q!==null&&se(G,q.startTime-E)}}var Z=!1,J=-1,ge=5,Ae=-1;function Ie(){return U?!0:!(o.unstable_now()-Ae<ge)}function ue(){if(U=!1,Z){var E=o.unstable_now();Ae=E;var q=!0;try{e:{X=!1,P&&(P=!1,Y(J),J=-1),B=!0;var F=_;try{t:{for(L(E),p=i(T);p!==null&&!(p.expirationTime>E&&Ie());){var ie=p.callback;if(typeof ie=="function"){p.callback=null,_=p.priorityLevel;var pe=ie(p.expirationTime<=E);if(E=o.unstable_now(),typeof pe=="function"){p.callback=pe,L(E),q=!0;break t}p===i(T)&&r(T),L(E)}else r(T);p=i(T)}if(p!==null)q=!0;else{var qe=i(x);qe!==null&&se(G,qe.startTime-E),q=!1}}break e}finally{p=null,_=F,B=!1}q=void 0}}finally{q?W():Z=!1}}}var W;if(typeof te=="function")W=function(){te(ue)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,Q=me.port2;me.port1.onmessage=ue,W=function(){Q.postMessage(null)}}else W=function(){k(ue,0)};function se(E,q){J=k(function(){E(o.unstable_now())},q)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(E){E.callback=null},o.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ge=0<E?Math.floor(1e3/E):5},o.unstable_getCurrentPriorityLevel=function(){return _},o.unstable_next=function(E){switch(_){case 1:case 2:case 3:var q=3;break;default:q=_}var F=_;_=q;try{return E()}finally{_=F}},o.unstable_requestPaint=function(){U=!0},o.unstable_runWithPriority=function(E,q){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var F=_;_=E;try{return q()}finally{_=F}},o.unstable_scheduleCallback=function(E,q,F){var ie=o.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?ie+F:ie):F=ie,E){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=F+pe,E={id:N++,callback:q,priorityLevel:E,startTime:F,expirationTime:pe,sortIndex:-1},F>ie?(E.sortIndex=F,s(x,E),i(T)===null&&E===i(x)&&(P?(Y(J),J=-1):P=!0,se(G,F-ie))):(E.sortIndex=pe,s(T,E),X||B||(X=!0,Z||(Z=!0,W()))),E},o.unstable_shouldYield=Ie,o.unstable_wrapCallback=function(E){var q=_;return function(){var F=_;_=q;try{return E.apply(this,arguments)}finally{_=F}}}}(hu)),hu}var K0;function Pg(){return K0||(K0=1,fu.exports=$g()),fu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q0;function Jg(){if(Q0)return ps;Q0=1;var o=Pg(),s=qg(),i=Gg();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function g(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(f(e)!==e)throw Error(r(188))}function T(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(r(188));return t!==e?null:e}for(var a=e,l=t;;){var n=a.return;if(n===null)break;var c=n.alternate;if(c===null){if(l=n.return,l!==null){a=l;continue}break}if(n.child===c.child){for(c=n.child;c;){if(c===a)return v(n),e;if(c===l)return v(n),t;c=c.sibling}throw Error(r(188))}if(a.return!==l.return)a=n,l=c;else{for(var h=!1,m=n.child;m;){if(m===a){h=!0,a=n,l=c;break}if(m===l){h=!0,l=n,a=c;break}m=m.sibling}if(!h){for(m=c.child;m;){if(m===a){h=!0,a=c,l=n;break}if(m===l){h=!0,l=c,a=n;break}m=m.sibling}if(!h)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var N=Object.assign,p=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),Y=Symbol.for("react.consumer"),te=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),Ae=Symbol.for("react.activity"),Ie=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function W(e){return e===null||typeof e!="object"?null:(e=ue&&e[ue]||e["@@iterator"],typeof e=="function"?e:null)}var me=Symbol.for("react.client.reference");function Q(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===me?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case X:return"Fragment";case U:return"Profiler";case P:return"StrictMode";case G:return"Suspense";case Z:return"SuspenseList";case Ae:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case B:return"Portal";case te:return(e.displayName||"Context")+".Provider";case Y:return(e._context.displayName||"Context")+".Consumer";case L:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case J:return t=e.displayName||null,t!==null?t:Q(e.type)||"Memo";case ge:t=e._payload,e=e._init;try{return Q(e(t))}catch{}}return null}var se=Array.isArray,E=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},ie=[],pe=-1;function qe(e){return{current:e}}function Te(e){0>pe||(e.current=ie[pe],ie[pe]=null,pe--)}function Ee(e,t){pe++,ie[pe]=e.current,e.current=t}var Qe=qe(null),St=qe(null),Yt=qe(null),Ea=qe(null);function Fa(e,t){switch(Ee(Yt,t),Ee(St,e),Ee(Qe,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?p0(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=p0(t),e=b0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Te(Qe),Ee(Qe,e)}function Kt(){Te(Qe),Te(St),Te(Yt)}function el(e){e.memoizedState!==null&&Ee(Ea,e);var t=Qe.current,a=b0(t,e.type);t!==a&&(Ee(St,e),Ee(Qe,a))}function Al(e){St.current===e&&(Te(Qe),Te(St)),Ea.current===e&&(Te(Ea),fs._currentValue=F)}var xl=Object.prototype.hasOwnProperty,Sn=o.unstable_scheduleCallback,El=o.unstable_cancelCallback,Ts=o.unstable_shouldYield,Ji=o.unstable_requestPaint,jt=o.unstable_now,Wu=o.unstable_getCurrentPriorityLevel,Cn=o.unstable_ImmediatePriority,S=o.unstable_UserBlockingPriority,D=o.unstable_NormalPriority,z=o.unstable_LowPriority,ee=o.unstable_IdlePriority,$=o.log,K=o.unstable_setDisableYieldValue,ne=null,ye=null;function Ne(e){if(typeof $=="function"&&K(e),ye&&typeof ye.setStrictMode=="function")try{ye.setStrictMode(ne,e)}catch{}}var Le=Math.clz32?Math.clz32:Wi,_l=Math.log,Qt=Math.LN2;function Wi(e){return e>>>=0,e===0?32:31-(_l(e)/Qt|0)|0}var _a=256,Ra=4194304;function aa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function tl(e,t,a){var l=e.pendingLanes;if(l===0)return 0;var n=0,c=e.suspendedLanes,h=e.pingedLanes;e=e.warmLanes;var m=l&134217727;return m!==0?(l=m&~c,l!==0?n=aa(l):(h&=m,h!==0?n=aa(h):a||(a=m&~e,a!==0&&(n=aa(a))))):(m=l&~c,m!==0?n=aa(m):h!==0?n=aa(h):a||(a=l&~e,a!==0&&(n=aa(a)))),n===0?0:t!==0&&t!==n&&(t&c)===0&&(c=n&-n,a=t&-t,c>=a||c===32&&(a&4194048)!==0)?t:n}function al(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function js(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fu(){var e=_a;return _a<<=1,(_a&4194048)===0&&(_a=256),e}function eo(){var e=Ra;return Ra<<=1,(Ra&62914560)===0&&(Ra=4194304),e}function Fi(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Nn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function jm(e,t,a,l,n,c){var h=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var m=e.entanglements,b=e.expirationTimes,j=e.hiddenUpdates;for(a=h&~a;0<a;){var M=31-Le(a),V=1<<M;m[M]=0,b[M]=-1;var w=j[M];if(w!==null)for(j[M]=null,M=0;M<w.length;M++){var O=w[M];O!==null&&(O.lane&=-536870913)}a&=~V}l!==0&&to(e,l,0),c!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=c&~(h&~t))}function to(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Le(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194090}function ao(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-Le(a),n=1<<l;n&t|e[l]&t&&(e[l]|=t),a&=~n}}function er(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function tr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function lo(){var e=q.p;return e!==0?e:(e=window.event,e===void 0?32:B0(e.type))}function Dm(e,t){var a=q.p;try{return q.p=e,t()}finally{q.p=a}}var Ta=Math.random().toString(36).slice(2),ut="__reactFiber$"+Ta,mt="__reactProps$"+Ta,Rl="__reactContainer$"+Ta,ar="__reactEvents$"+Ta,wm="__reactListeners$"+Ta,Om="__reactHandles$"+Ta,no="__reactResources$"+Ta,An="__reactMarker$"+Ta;function lr(e){delete e[ut],delete e[mt],delete e[ar],delete e[wm],delete e[Om]}function Tl(e){var t=e[ut];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Rl]||a[ut]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=A0(e);e!==null;){if(a=e[ut])return a;e=A0(e)}return t}e=a,a=e.parentNode}return null}function jl(e){if(e=e[ut]||e[Rl]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function xn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(r(33))}function Dl(e){var t=e[no];return t||(t=e[no]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function tt(e){e[An]=!0}var so=new Set,io={};function ll(e,t){wl(e,t),wl(e+"Capture",t)}function wl(e,t){for(io[e]=t,e=0;e<t.length;e++)so.add(t[e])}var Mm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ro={},co={};function zm(e){return xl.call(co,e)?!0:xl.call(ro,e)?!1:Mm.test(e)?co[e]=!0:(ro[e]=!0,!1)}function Ds(e,t,a){if(zm(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function ws(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function la(e,t,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+l)}}var nr,uo;function Ol(e){if(nr===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);nr=t&&t[1]||"",uo=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nr+e+uo}var sr=!1;function ir(e,t){if(!e||sr)return"";sr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var V=function(){throw Error()};if(Object.defineProperty(V.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(V,[])}catch(O){var w=O}Reflect.construct(e,[],V)}else{try{V.call()}catch(O){w=O}e.call(V.prototype)}}else{try{throw Error()}catch(O){w=O}(V=e())&&typeof V.catch=="function"&&V.catch(function(){})}}catch(O){if(O&&w&&typeof O.stack=="string")return[O.stack,w.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=l.DetermineComponentFrameRoot(),h=c[0],m=c[1];if(h&&m){var b=h.split(`
`),j=m.split(`
`);for(n=l=0;l<b.length&&!b[l].includes("DetermineComponentFrameRoot");)l++;for(;n<j.length&&!j[n].includes("DetermineComponentFrameRoot");)n++;if(l===b.length||n===j.length)for(l=b.length-1,n=j.length-1;1<=l&&0<=n&&b[l]!==j[n];)n--;for(;1<=l&&0<=n;l--,n--)if(b[l]!==j[n]){if(l!==1||n!==1)do if(l--,n--,0>n||b[l]!==j[n]){var M=`
`+b[l].replace(" at new "," at ");return e.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",e.displayName)),M}while(1<=l&&0<=n);break}}}finally{sr=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ol(a):""}function Lm(e){switch(e.tag){case 26:case 27:case 5:return Ol(e.type);case 16:return Ol("Lazy");case 13:return Ol("Suspense");case 19:return Ol("SuspenseList");case 0:case 15:return ir(e.type,!1);case 11:return ir(e.type.render,!1);case 1:return ir(e.type,!0);case 31:return Ol("Activity");default:return""}}function oo(e){try{var t="";do t+=Lm(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fo(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Hm(e){var t=fo(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var n=a.get,c=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(h){l=""+h,c.call(this,h)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(h){l=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Os(e){e._valueTracker||(e._valueTracker=Hm(e))}function ho(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=fo(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function Ms(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Im=/[\n"\\]/g;function wt(e){return e.replace(Im,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function rr(e,t,a,l,n,c,h,m){e.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.type=h:e.removeAttribute("type"),t!=null?h==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Dt(t)):e.value!==""+Dt(t)&&(e.value=""+Dt(t)):h!=="submit"&&h!=="reset"||e.removeAttribute("value"),t!=null?cr(e,h,Dt(t)):a!=null?cr(e,h,Dt(a)):l!=null&&e.removeAttribute("value"),n==null&&c!=null&&(e.defaultChecked=!!c),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.name=""+Dt(m):e.removeAttribute("name")}function mo(e,t,a,l,n,c,h,m){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),t!=null||a!=null){if(!(c!=="submit"&&c!=="reset"||t!=null))return;a=a!=null?""+Dt(a):"",t=t!=null?""+Dt(t):a,m||t===e.value||(e.value=t),e.defaultValue=t}l=l??n,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=m?e.checked:!!l,e.defaultChecked=!!l,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.name=h)}function cr(e,t,a){t==="number"&&Ms(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ml(e,t,a,l){if(e=e.options,t){t={};for(var n=0;n<a.length;n++)t["$"+a[n]]=!0;for(a=0;a<e.length;a++)n=t.hasOwnProperty("$"+e[a].value),e[a].selected!==n&&(e[a].selected=n),n&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Dt(a),t=null,n=0;n<e.length;n++){if(e[n].value===a){e[n].selected=!0,l&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function go(e,t,a){if(t!=null&&(t=""+Dt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Dt(a):""}function yo(e,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(r(92));if(se(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=Dt(t),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function zl(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Bm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vo(e,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,a):typeof a!="number"||a===0||Bm.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function po(e,t,a){if(t!=null&&typeof t!="object")throw Error(r(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var n in t)l=t[n],t.hasOwnProperty(n)&&a[n]!==l&&vo(e,n,l)}else for(var c in t)t.hasOwnProperty(c)&&vo(e,c,t[c])}function ur(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Um=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zs(e){return Vm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var or=null;function dr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ll=null,Hl=null;function bo(e){var t=jl(e);if(t&&(e=t.stateNode)){var a=e[mt]||null;e:switch(e=t.stateNode,t.type){case"input":if(rr(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+wt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var n=l[mt]||null;if(!n)throw Error(r(90));rr(l,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===e.form&&ho(l)}break e;case"textarea":go(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Ml(e,!!a.multiple,t,!1)}}}var fr=!1;function So(e,t,a){if(fr)return e(t,a);fr=!0;try{var l=e(t);return l}finally{if(fr=!1,(Ll!==null||Hl!==null)&&(bi(),Ll&&(t=Ll,e=Hl,Hl=Ll=null,bo(t),e)))for(t=0;t<e.length;t++)bo(e[t])}}function En(e,t){var a=e.stateNode;if(a===null)return null;var l=a[mt]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,t,typeof a));return a}var na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hr=!1;if(na)try{var _n={};Object.defineProperty(_n,"passive",{get:function(){hr=!0}}),window.addEventListener("test",_n,_n),window.removeEventListener("test",_n,_n)}catch{hr=!1}var ja=null,mr=null,Ls=null;function Co(){if(Ls)return Ls;var e,t=mr,a=t.length,l,n="value"in ja?ja.value:ja.textContent,c=n.length;for(e=0;e<a&&t[e]===n[e];e++);var h=a-e;for(l=1;l<=h&&t[a-l]===n[c-l];l++);return Ls=n.slice(e,1<l?1-l:void 0)}function Hs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Is(){return!0}function No(){return!1}function gt(e){function t(a,l,n,c,h){this._reactName=a,this._targetInst=n,this.type=l,this.nativeEvent=c,this.target=h,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(a=e[m],this[m]=a?a(c):c[m]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Is:No,this.isPropagationStopped=No,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Is)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Is)},persist:function(){},isPersistent:Is}),t}var nl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bs=gt(nl),Rn=N({},nl,{view:0,detail:0}),qm=gt(Rn),gr,yr,Tn,Us=N({},Rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Tn&&(Tn&&e.type==="mousemove"?(gr=e.screenX-Tn.screenX,yr=e.screenY-Tn.screenY):yr=gr=0,Tn=e),gr)},movementY:function(e){return"movementY"in e?e.movementY:yr}}),Ao=gt(Us),Gm=N({},Us,{dataTransfer:0}),Zm=gt(Gm),km=N({},Rn,{relatedTarget:0}),vr=gt(km),Xm=N({},nl,{animationName:0,elapsedTime:0,pseudoElement:0}),Ym=gt(Xm),Km=N({},nl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qm=gt(Km),$m=N({},nl,{data:0}),xo=gt($m),Pm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Wm[e])?!!t[e]:!1}function pr(){return Fm}var e2=N({},Rn,{key:function(e){if(e.key){var t=Pm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Hs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Jm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pr,charCode:function(e){return e.type==="keypress"?Hs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Hs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),t2=gt(e2),a2=N({},Us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eo=gt(a2),l2=N({},Rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pr}),n2=gt(l2),s2=N({},nl,{propertyName:0,elapsedTime:0,pseudoElement:0}),i2=gt(s2),r2=N({},Us,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),c2=gt(r2),u2=N({},nl,{newState:0,oldState:0}),o2=gt(u2),d2=[9,13,27,32],br=na&&"CompositionEvent"in window,jn=null;na&&"documentMode"in document&&(jn=document.documentMode);var f2=na&&"TextEvent"in window&&!jn,_o=na&&(!br||jn&&8<jn&&11>=jn),Ro=" ",To=!1;function jo(e,t){switch(e){case"keyup":return d2.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Do(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Il=!1;function h2(e,t){switch(e){case"compositionend":return Do(t);case"keypress":return t.which!==32?null:(To=!0,Ro);case"textInput":return e=t.data,e===Ro&&To?null:e;default:return null}}function m2(e,t){if(Il)return e==="compositionend"||!br&&jo(e,t)?(e=Co(),Ls=mr=ja=null,Il=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _o&&t.locale!=="ko"?null:t.data;default:return null}}var g2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!g2[e.type]:t==="textarea"}function Oo(e,t,a,l){Ll?Hl?Hl.push(l):Hl=[l]:Ll=l,t=Ei(t,"onChange"),0<t.length&&(a=new Bs("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var Dn=null,wn=null;function y2(e){h0(e,0)}function Vs(e){var t=xn(e);if(ho(t))return e}function Mo(e,t){if(e==="change")return t}var zo=!1;if(na){var Sr;if(na){var Cr="oninput"in document;if(!Cr){var Lo=document.createElement("div");Lo.setAttribute("oninput","return;"),Cr=typeof Lo.oninput=="function"}Sr=Cr}else Sr=!1;zo=Sr&&(!document.documentMode||9<document.documentMode)}function Ho(){Dn&&(Dn.detachEvent("onpropertychange",Io),wn=Dn=null)}function Io(e){if(e.propertyName==="value"&&Vs(wn)){var t=[];Oo(t,wn,e,dr(e)),So(y2,t)}}function v2(e,t,a){e==="focusin"?(Ho(),Dn=t,wn=a,Dn.attachEvent("onpropertychange",Io)):e==="focusout"&&Ho()}function p2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vs(wn)}function b2(e,t){if(e==="click")return Vs(t)}function S2(e,t){if(e==="input"||e==="change")return Vs(t)}function C2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ct=typeof Object.is=="function"?Object.is:C2;function On(e,t){if(Ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var n=a[l];if(!xl.call(t,n)||!Ct(e[n],t[n]))return!1}return!0}function Bo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Uo(e,t){var a=Bo(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Bo(a)}}function Vo(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Vo(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qo(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ms(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Ms(e.document)}return t}function Nr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var N2=na&&"documentMode"in document&&11>=document.documentMode,Bl=null,Ar=null,Mn=null,xr=!1;function Go(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;xr||Bl==null||Bl!==Ms(l)||(l=Bl,"selectionStart"in l&&Nr(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Mn&&On(Mn,l)||(Mn=l,l=Ei(Ar,"onSelect"),0<l.length&&(t=new Bs("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=Bl)))}function sl(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Ul={animationend:sl("Animation","AnimationEnd"),animationiteration:sl("Animation","AnimationIteration"),animationstart:sl("Animation","AnimationStart"),transitionrun:sl("Transition","TransitionRun"),transitionstart:sl("Transition","TransitionStart"),transitioncancel:sl("Transition","TransitionCancel"),transitionend:sl("Transition","TransitionEnd")},Er={},Zo={};na&&(Zo=document.createElement("div").style,"AnimationEvent"in window||(delete Ul.animationend.animation,delete Ul.animationiteration.animation,delete Ul.animationstart.animation),"TransitionEvent"in window||delete Ul.transitionend.transition);function il(e){if(Er[e])return Er[e];if(!Ul[e])return e;var t=Ul[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Zo)return Er[e]=t[a];return e}var ko=il("animationend"),Xo=il("animationiteration"),Yo=il("animationstart"),A2=il("transitionrun"),x2=il("transitionstart"),E2=il("transitioncancel"),Ko=il("transitionend"),Qo=new Map,_r="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_r.push("scrollEnd");function qt(e,t){Qo.set(e,t),ll(t,[e])}var $o=new WeakMap;function Ot(e,t){if(typeof e=="object"&&e!==null){var a=$o.get(e);return a!==void 0?a:(t={value:e,source:t,stack:oo(t)},$o.set(e,t),t)}return{value:e,source:t,stack:oo(t)}}var Mt=[],Vl=0,Rr=0;function qs(){for(var e=Vl,t=Rr=Vl=0;t<e;){var a=Mt[t];Mt[t++]=null;var l=Mt[t];Mt[t++]=null;var n=Mt[t];Mt[t++]=null;var c=Mt[t];if(Mt[t++]=null,l!==null&&n!==null){var h=l.pending;h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n}c!==0&&Po(a,n,c)}}function Gs(e,t,a,l){Mt[Vl++]=e,Mt[Vl++]=t,Mt[Vl++]=a,Mt[Vl++]=l,Rr|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Tr(e,t,a,l){return Gs(e,t,a,l),Zs(e)}function ql(e,t){return Gs(e,null,null,t),Zs(e)}function Po(e,t,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var n=!1,c=e.return;c!==null;)c.childLanes|=a,l=c.alternate,l!==null&&(l.childLanes|=a),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(n=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,n&&t!==null&&(n=31-Le(a),e=c.hiddenUpdates,l=e[n],l===null?e[n]=[t]:l.push(t),t.lane=a|536870912),c):null}function Zs(e){if(50<ns)throw ns=0,zc=null,Error(r(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Gl={};function _2(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(e,t,a,l){return new _2(e,t,a,l)}function jr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function sa(e,t){var a=e.alternate;return a===null?(a=Nt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Jo(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ks(e,t,a,l,n,c){var h=0;if(l=e,typeof e=="function")jr(e)&&(h=1);else if(typeof e=="string")h=Tg(e,a,Qe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ae:return e=Nt(31,a,t,n),e.elementType=Ae,e.lanes=c,e;case X:return rl(a.children,n,c,t);case P:h=8,n|=24;break;case U:return e=Nt(12,a,t,n|2),e.elementType=U,e.lanes=c,e;case G:return e=Nt(13,a,t,n),e.elementType=G,e.lanes=c,e;case Z:return e=Nt(19,a,t,n),e.elementType=Z,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case k:case te:h=10;break e;case Y:h=9;break e;case L:h=11;break e;case J:h=14;break e;case ge:h=16,l=null;break e}h=29,a=Error(r(130,e===null?"null":typeof e,"")),l=null}return t=Nt(h,a,t,n),t.elementType=e,t.type=l,t.lanes=c,t}function rl(e,t,a,l){return e=Nt(7,e,l,t),e.lanes=a,e}function Dr(e,t,a){return e=Nt(6,e,null,t),e.lanes=a,e}function wr(e,t,a){return t=Nt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Zl=[],kl=0,Xs=null,Ys=0,zt=[],Lt=0,cl=null,ia=1,ra="";function ul(e,t){Zl[kl++]=Ys,Zl[kl++]=Xs,Xs=e,Ys=t}function Wo(e,t,a){zt[Lt++]=ia,zt[Lt++]=ra,zt[Lt++]=cl,cl=e;var l=ia;e=ra;var n=32-Le(l)-1;l&=~(1<<n),a+=1;var c=32-Le(t)+n;if(30<c){var h=n-n%5;c=(l&(1<<h)-1).toString(32),l>>=h,n-=h,ia=1<<32-Le(t)+n|a<<n|l,ra=c+e}else ia=1<<c|a<<n|l,ra=e}function Or(e){e.return!==null&&(ul(e,1),Wo(e,1,0))}function Mr(e){for(;e===Xs;)Xs=Zl[--kl],Zl[kl]=null,Ys=Zl[--kl],Zl[kl]=null;for(;e===cl;)cl=zt[--Lt],zt[Lt]=null,ra=zt[--Lt],zt[Lt]=null,ia=zt[--Lt],zt[Lt]=null}var ft=null,Ze=null,Re=!1,ol=null,$t=!1,zr=Error(r(519));function dl(e){var t=Error(r(418,""));throw Hn(Ot(t,e)),zr}function Fo(e){var t=e.stateNode,a=e.type,l=e.memoizedProps;switch(t[ut]=e,t[mt]=l,a){case"dialog":Ce("cancel",t),Ce("close",t);break;case"iframe":case"object":case"embed":Ce("load",t);break;case"video":case"audio":for(a=0;a<is.length;a++)Ce(is[a],t);break;case"source":Ce("error",t);break;case"img":case"image":case"link":Ce("error",t),Ce("load",t);break;case"details":Ce("toggle",t);break;case"input":Ce("invalid",t),mo(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Os(t);break;case"select":Ce("invalid",t);break;case"textarea":Ce("invalid",t),yo(t,l.value,l.defaultValue,l.children),Os(t)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||v0(t.textContent,a)?(l.popover!=null&&(Ce("beforetoggle",t),Ce("toggle",t)),l.onScroll!=null&&Ce("scroll",t),l.onScrollEnd!=null&&Ce("scrollend",t),l.onClick!=null&&(t.onclick=_i),t=!0):t=!1,t||dl(e)}function ed(e){for(ft=e.return;ft;)switch(ft.tag){case 5:case 13:$t=!1;return;case 27:case 3:$t=!0;return;default:ft=ft.return}}function zn(e){if(e!==ft)return!1;if(!Re)return ed(e),Re=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Pc(e.type,e.memoizedProps)),a=!a),a&&Ze&&dl(e),ed(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){Ze=Zt(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}Ze=null}}else t===27?(t=Ze,Xa(e.type)?(e=eu,eu=null,Ze=e):Ze=t):Ze=ft?Zt(e.stateNode.nextSibling):null;return!0}function Ln(){Ze=ft=null,Re=!1}function td(){var e=ol;return e!==null&&(pt===null?pt=e:pt.push.apply(pt,e),ol=null),e}function Hn(e){ol===null?ol=[e]:ol.push(e)}var Lr=qe(null),fl=null,ca=null;function Da(e,t,a){Ee(Lr,t._currentValue),t._currentValue=a}function ua(e){e._currentValue=Lr.current,Te(Lr)}function Hr(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function Ir(e,t,a,l){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var c=n.dependencies;if(c!==null){var h=n.child;c=c.firstContext;e:for(;c!==null;){var m=c;c=n;for(var b=0;b<t.length;b++)if(m.context===t[b]){c.lanes|=a,m=c.alternate,m!==null&&(m.lanes|=a),Hr(c.return,a,e),l||(h=null);break e}c=m.next}}else if(n.tag===18){if(h=n.return,h===null)throw Error(r(341));h.lanes|=a,c=h.alternate,c!==null&&(c.lanes|=a),Hr(h,a,e),h=null}else h=n.child;if(h!==null)h.return=n;else for(h=n;h!==null;){if(h===e){h=null;break}if(n=h.sibling,n!==null){n.return=h.return,h=n;break}h=h.return}n=h}}function In(e,t,a,l){e=null;for(var n=t,c=!1;n!==null;){if(!c){if((n.flags&524288)!==0)c=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var h=n.alternate;if(h===null)throw Error(r(387));if(h=h.memoizedProps,h!==null){var m=n.type;Ct(n.pendingProps.value,h.value)||(e!==null?e.push(m):e=[m])}}else if(n===Ea.current){if(h=n.alternate,h===null)throw Error(r(387));h.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(fs):e=[fs])}n=n.return}e!==null&&Ir(t,e,a,l),t.flags|=262144}function Ks(e){for(e=e.firstContext;e!==null;){if(!Ct(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function hl(e){fl=e,ca=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ot(e){return ad(fl,e)}function Qs(e,t){return fl===null&&hl(e),ad(e,t)}function ad(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},ca===null){if(e===null)throw Error(r(308));ca=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ca=ca.next=t;return a}var R2=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},T2=o.unstable_scheduleCallback,j2=o.unstable_NormalPriority,We={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Br(){return{controller:new R2,data:new Map,refCount:0}}function Bn(e){e.refCount--,e.refCount===0&&T2(j2,function(){e.controller.abort()})}var Un=null,Ur=0,Xl=0,Yl=null;function D2(e,t){if(Un===null){var a=Un=[];Ur=0,Xl=qc(),Yl={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ur++,t.then(ld,ld),t}function ld(){if(--Ur===0&&Un!==null){Yl!==null&&(Yl.status="fulfilled");var e=Un;Un=null,Xl=0,Yl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function w2(e,t){var a=[],l={status:"pending",value:null,reason:null,then:function(n){a.push(n)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var n=0;n<a.length;n++)(0,a[n])(t)},function(n){for(l.status="rejected",l.reason=n,n=0;n<a.length;n++)(0,a[n])(void 0)}),l}var nd=E.S;E.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&D2(e,t),nd!==null&&nd(e,t)};var ml=qe(null);function Vr(){var e=ml.current;return e!==null?e:He.pooledCache}function $s(e,t){t===null?Ee(ml,ml.current):Ee(ml,t.pool)}function sd(){var e=Vr();return e===null?null:{parent:We._currentValue,pool:e}}var Vn=Error(r(460)),id=Error(r(474)),Ps=Error(r(542)),qr={then:function(){}};function rd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Js(){}function cd(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Js,Js),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,od(e),e;default:if(typeof t.status=="string")t.then(Js,Js);else{if(e=He,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var n=t;n.status="fulfilled",n.value=l}},function(l){if(t.status==="pending"){var n=t;n.status="rejected",n.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,od(e),e}throw qn=t,Vn}}var qn=null;function ud(){if(qn===null)throw Error(r(459));var e=qn;return qn=null,e}function od(e){if(e===Vn||e===Ps)throw Error(r(483))}var wa=!1;function Gr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Oa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ma(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(je&2)!==0){var n=l.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),l.pending=t,t=Zs(e),Po(e,null,a),t}return Gs(e,l,t,a),Zs(e)}function Gn(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,ao(e,a)}}function kr(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var n=null,c=null;if(a=a.firstBaseUpdate,a!==null){do{var h={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};c===null?n=c=h:c=c.next=h,a=a.next}while(a!==null);c===null?n=c=t:c=c.next=t}else n=c=t;a={baseState:l.baseState,firstBaseUpdate:n,lastBaseUpdate:c,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Xr=!1;function Zn(){if(Xr){var e=Yl;if(e!==null)throw e}}function kn(e,t,a,l){Xr=!1;var n=e.updateQueue;wa=!1;var c=n.firstBaseUpdate,h=n.lastBaseUpdate,m=n.shared.pending;if(m!==null){n.shared.pending=null;var b=m,j=b.next;b.next=null,h===null?c=j:h.next=j,h=b;var M=e.alternate;M!==null&&(M=M.updateQueue,m=M.lastBaseUpdate,m!==h&&(m===null?M.firstBaseUpdate=j:m.next=j,M.lastBaseUpdate=b))}if(c!==null){var V=n.baseState;h=0,M=j=b=null,m=c;do{var w=m.lane&-536870913,O=w!==m.lane;if(O?(xe&w)===w:(l&w)===w){w!==0&&w===Xl&&(Xr=!0),M!==null&&(M=M.next={lane:0,tag:m.tag,payload:m.payload,callback:null,next:null});e:{var he=e,oe=m;w=t;var Me=a;switch(oe.tag){case 1:if(he=oe.payload,typeof he=="function"){V=he.call(Me,V,w);break e}V=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=oe.payload,w=typeof he=="function"?he.call(Me,V,w):he,w==null)break e;V=N({},V,w);break e;case 2:wa=!0}}w=m.callback,w!==null&&(e.flags|=64,O&&(e.flags|=8192),O=n.callbacks,O===null?n.callbacks=[w]:O.push(w))}else O={lane:w,tag:m.tag,payload:m.payload,callback:m.callback,next:null},M===null?(j=M=O,b=V):M=M.next=O,h|=w;if(m=m.next,m===null){if(m=n.shared.pending,m===null)break;O=m,m=O.next,O.next=null,n.lastBaseUpdate=O,n.shared.pending=null}}while(!0);M===null&&(b=V),n.baseState=b,n.firstBaseUpdate=j,n.lastBaseUpdate=M,c===null&&(n.shared.lanes=0),qa|=h,e.lanes=h,e.memoizedState=V}}function dd(e,t){if(typeof e!="function")throw Error(r(191,e));e.call(t)}function fd(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)dd(a[e],t)}var Kl=qe(null),Ws=qe(0);function hd(e,t){e=ya,Ee(Ws,e),Ee(Kl,t),ya=e|t.baseLanes}function Yr(){Ee(Ws,ya),Ee(Kl,Kl.current)}function Kr(){ya=Ws.current,Te(Kl),Te(Ws)}var za=0,ve=null,we=null,$e=null,Fs=!1,Ql=!1,gl=!1,ei=0,Xn=0,$l=null,O2=0;function Xe(){throw Error(r(321))}function Qr(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Ct(e[a],t[a]))return!1;return!0}function $r(e,t,a,l,n,c){return za=c,ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,E.H=e===null||e.memoizedState===null?Pd:Jd,gl=!1,c=a(l,n),gl=!1,Ql&&(c=gd(t,a,l,n)),md(e),c}function md(e){E.H=ii;var t=we!==null&&we.next!==null;if(za=0,$e=we=ve=null,Fs=!1,Xn=0,$l=null,t)throw Error(r(300));e===null||at||(e=e.dependencies,e!==null&&Ks(e)&&(at=!0))}function gd(e,t,a,l){ve=e;var n=0;do{if(Ql&&($l=null),Xn=0,Ql=!1,25<=n)throw Error(r(301));if(n+=1,$e=we=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}E.H=U2,c=t(a,l)}while(Ql);return c}function M2(){var e=E.H,t=e.useState()[0];return t=typeof t.then=="function"?Yn(t):t,e=e.useState()[0],(we!==null?we.memoizedState:null)!==e&&(ve.flags|=1024),t}function Pr(){var e=ei!==0;return ei=0,e}function Jr(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Wr(e){if(Fs){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Fs=!1}za=0,$e=we=ve=null,Ql=!1,Xn=ei=0,$l=null}function yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?ve.memoizedState=$e=e:$e=$e.next=e,$e}function Pe(){if(we===null){var e=ve.alternate;e=e!==null?e.memoizedState:null}else e=we.next;var t=$e===null?ve.memoizedState:$e.next;if(t!==null)$e=t,we=e;else{if(e===null)throw ve.alternate===null?Error(r(467)):Error(r(310));we=e,e={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},$e===null?ve.memoizedState=$e=e:$e=$e.next=e}return $e}function Fr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yn(e){var t=Xn;return Xn+=1,$l===null&&($l=[]),e=cd($l,e,t),t=ve,($e===null?t.memoizedState:$e.next)===null&&(t=t.alternate,E.H=t===null||t.memoizedState===null?Pd:Jd),e}function ti(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Yn(e);if(e.$$typeof===te)return ot(e)}throw Error(r(438,String(e)))}function ec(e){var t=null,a=ve.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=ve.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(n){return n.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Fr(),ve.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),l=0;l<e;l++)a[l]=Ie;return t.index++,a}function oa(e,t){return typeof t=="function"?t(e):t}function ai(e){var t=Pe();return tc(t,we,e)}function tc(e,t,a){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var n=e.baseQueue,c=l.pending;if(c!==null){if(n!==null){var h=n.next;n.next=c.next,c.next=h}t.baseQueue=n=c,l.pending=null}if(c=e.baseState,n===null)e.memoizedState=c;else{t=n.next;var m=h=null,b=null,j=t,M=!1;do{var V=j.lane&-536870913;if(V!==j.lane?(xe&V)===V:(za&V)===V){var w=j.revertLane;if(w===0)b!==null&&(b=b.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),V===Xl&&(M=!0);else if((za&w)===w){j=j.next,w===Xl&&(M=!0);continue}else V={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},b===null?(m=b=V,h=c):b=b.next=V,ve.lanes|=w,qa|=w;V=j.action,gl&&a(c,V),c=j.hasEagerState?j.eagerState:a(c,V)}else w={lane:V,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},b===null?(m=b=w,h=c):b=b.next=w,ve.lanes|=V,qa|=V;j=j.next}while(j!==null&&j!==t);if(b===null?h=c:b.next=m,!Ct(c,e.memoizedState)&&(at=!0,M&&(a=Yl,a!==null)))throw a;e.memoizedState=c,e.baseState=h,e.baseQueue=b,l.lastRenderedState=c}return n===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function ac(e){var t=Pe(),a=t.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var l=a.dispatch,n=a.pending,c=t.memoizedState;if(n!==null){a.pending=null;var h=n=n.next;do c=e(c,h.action),h=h.next;while(h!==n);Ct(c,t.memoizedState)||(at=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),a.lastRenderedState=c}return[c,l]}function yd(e,t,a){var l=ve,n=Pe(),c=Re;if(c){if(a===void 0)throw Error(r(407));a=a()}else a=t();var h=!Ct((we||n).memoizedState,a);h&&(n.memoizedState=a,at=!0),n=n.queue;var m=bd.bind(null,l,n,e);if(Kn(2048,8,m,[e]),n.getSnapshot!==t||h||$e!==null&&$e.memoizedState.tag&1){if(l.flags|=2048,Pl(9,li(),pd.bind(null,l,n,a,t),null),He===null)throw Error(r(349));c||(za&124)!==0||vd(l,t,a)}return a}function vd(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ve.updateQueue,t===null?(t=Fr(),ve.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function pd(e,t,a,l){t.value=a,t.getSnapshot=l,Sd(t)&&Cd(e)}function bd(e,t,a){return a(function(){Sd(t)&&Cd(e)})}function Sd(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Ct(e,a)}catch{return!0}}function Cd(e){var t=ql(e,2);t!==null&&Rt(t,e,2)}function lc(e){var t=yt();if(typeof e=="function"){var a=e;if(e=a(),gl){Ne(!0);try{a()}finally{Ne(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:e},t}function Nd(e,t,a,l){return e.baseState=a,tc(e,we,typeof l=="function"?l:oa)}function z2(e,t,a,l,n){if(si(e))throw Error(r(485));if(e=t.action,e!==null){var c={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){c.listeners.push(h)}};E.T!==null?a(!0):c.isTransition=!1,l(c),a=t.pending,a===null?(c.next=t.pending=c,Ad(t,c)):(c.next=a.next,t.pending=a.next=c)}}function Ad(e,t){var a=t.action,l=t.payload,n=e.state;if(t.isTransition){var c=E.T,h={};E.T=h;try{var m=a(n,l),b=E.S;b!==null&&b(h,m),xd(e,t,m)}catch(j){nc(e,t,j)}finally{E.T=c}}else try{c=a(n,l),xd(e,t,c)}catch(j){nc(e,t,j)}}function xd(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Ed(e,t,l)},function(l){return nc(e,t,l)}):Ed(e,t,a)}function Ed(e,t,a){t.status="fulfilled",t.value=a,_d(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Ad(e,a)))}function nc(e,t,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,_d(t),t=t.next;while(t!==l)}e.action=null}function _d(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Rd(e,t){return t}function Td(e,t){if(Re){var a=He.formState;if(a!==null){e:{var l=ve;if(Re){if(Ze){t:{for(var n=Ze,c=$t;n.nodeType!==8;){if(!c){n=null;break t}if(n=Zt(n.nextSibling),n===null){n=null;break t}}c=n.data,n=c==="F!"||c==="F"?n:null}if(n){Ze=Zt(n.nextSibling),l=n.data==="F!";break e}}dl(l)}l=!1}l&&(t=a[0])}}return a=yt(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rd,lastRenderedState:t},a.queue=l,a=Kd.bind(null,ve,l),l.dispatch=a,l=lc(!1),c=uc.bind(null,ve,!1,l.queue),l=yt(),n={state:t,dispatch:null,action:e,pending:null},l.queue=n,a=z2.bind(null,ve,n,c,a),n.dispatch=a,l.memoizedState=e,[t,a,!1]}function jd(e){var t=Pe();return Dd(t,we,e)}function Dd(e,t,a){if(t=tc(e,t,Rd)[0],e=ai(oa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Yn(t)}catch(h){throw h===Vn?Ps:h}else l=t;t=Pe();var n=t.queue,c=n.dispatch;return a!==t.memoizedState&&(ve.flags|=2048,Pl(9,li(),L2.bind(null,n,a),null)),[l,c,e]}function L2(e,t){e.action=t}function wd(e){var t=Pe(),a=we;if(a!==null)return Dd(t,a,e);Pe(),t=t.memoizedState,a=Pe();var l=a.queue.dispatch;return a.memoizedState=e,[t,l,!1]}function Pl(e,t,a,l){return e={tag:e,create:a,deps:l,inst:t,next:null},t=ve.updateQueue,t===null&&(t=Fr(),ve.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e),e}function li(){return{destroy:void 0,resource:void 0}}function Od(){return Pe().memoizedState}function ni(e,t,a,l){var n=yt();l=l===void 0?null:l,ve.flags|=e,n.memoizedState=Pl(1|t,li(),a,l)}function Kn(e,t,a,l){var n=Pe();l=l===void 0?null:l;var c=n.memoizedState.inst;we!==null&&l!==null&&Qr(l,we.memoizedState.deps)?n.memoizedState=Pl(t,c,a,l):(ve.flags|=e,n.memoizedState=Pl(1|t,c,a,l))}function Md(e,t){ni(8390656,8,e,t)}function zd(e,t){Kn(2048,8,e,t)}function Ld(e,t){return Kn(4,2,e,t)}function Hd(e,t){return Kn(4,4,e,t)}function Id(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Bd(e,t,a){a=a!=null?a.concat([e]):null,Kn(4,4,Id.bind(null,t,e),a)}function sc(){}function Ud(e,t){var a=Pe();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&Qr(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function Vd(e,t){var a=Pe();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&Qr(t,l[1]))return l[0];if(l=e(),gl){Ne(!0);try{e()}finally{Ne(!1)}}return a.memoizedState=[l,t],l}function ic(e,t,a){return a===void 0||(za&1073741824)!==0?e.memoizedState=t:(e.memoizedState=a,e=kf(),ve.lanes|=e,qa|=e,a)}function qd(e,t,a,l){return Ct(a,t)?a:Kl.current!==null?(e=ic(e,a,l),Ct(e,t)||(at=!0),e):(za&42)===0?(at=!0,e.memoizedState=a):(e=kf(),ve.lanes|=e,qa|=e,t)}function Gd(e,t,a,l,n){var c=q.p;q.p=c!==0&&8>c?c:8;var h=E.T,m={};E.T=m,uc(e,!1,t,a);try{var b=n(),j=E.S;if(j!==null&&j(m,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var M=w2(b,l);Qn(e,t,M,_t(e))}else Qn(e,t,l,_t(e))}catch(V){Qn(e,t,{then:function(){},status:"rejected",reason:V},_t())}finally{q.p=c,E.T=h}}function H2(){}function rc(e,t,a,l){if(e.tag!==5)throw Error(r(476));var n=Zd(e).queue;Gd(e,n,t,F,a===null?H2:function(){return kd(e),a(l)})}function Zd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:F},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function kd(e){var t=Zd(e).next.queue;Qn(e,t,{},_t())}function cc(){return ot(fs)}function Xd(){return Pe().memoizedState}function Yd(){return Pe().memoizedState}function I2(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=_t();e=Oa(a);var l=Ma(t,e,a);l!==null&&(Rt(l,t,a),Gn(l,t,a)),t={cache:Br()},e.payload=t;return}t=t.return}}function B2(e,t,a){var l=_t();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},si(e)?Qd(t,a):(a=Tr(e,t,a,l),a!==null&&(Rt(a,e,l),$d(a,t,l)))}function Kd(e,t,a){var l=_t();Qn(e,t,a,l)}function Qn(e,t,a,l){var n={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(si(e))Qd(t,n);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var h=t.lastRenderedState,m=c(h,a);if(n.hasEagerState=!0,n.eagerState=m,Ct(m,h))return Gs(e,t,n,0),He===null&&qs(),!1}catch{}finally{}if(a=Tr(e,t,n,l),a!==null)return Rt(a,e,l),$d(a,t,l),!0}return!1}function uc(e,t,a,l){if(l={lane:2,revertLane:qc(),action:l,hasEagerState:!1,eagerState:null,next:null},si(e)){if(t)throw Error(r(479))}else t=Tr(e,a,l,2),t!==null&&Rt(t,e,2)}function si(e){var t=e.alternate;return e===ve||t!==null&&t===ve}function Qd(e,t){Ql=Fs=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function $d(e,t,a){if((a&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,ao(e,a)}}var ii={readContext:ot,use:ti,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe,useHostTransitionStatus:Xe,useFormState:Xe,useActionState:Xe,useOptimistic:Xe,useMemoCache:Xe,useCacheRefresh:Xe},Pd={readContext:ot,use:ti,useCallback:function(e,t){return yt().memoizedState=[e,t===void 0?null:t],e},useContext:ot,useEffect:Md,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,ni(4194308,4,Id.bind(null,t,e),a)},useLayoutEffect:function(e,t){return ni(4194308,4,e,t)},useInsertionEffect:function(e,t){ni(4,2,e,t)},useMemo:function(e,t){var a=yt();t=t===void 0?null:t;var l=e();if(gl){Ne(!0);try{e()}finally{Ne(!1)}}return a.memoizedState=[l,t],l},useReducer:function(e,t,a){var l=yt();if(a!==void 0){var n=a(t);if(gl){Ne(!0);try{a(t)}finally{Ne(!1)}}}else n=t;return l.memoizedState=l.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},l.queue=e,e=e.dispatch=B2.bind(null,ve,e),[l.memoizedState,e]},useRef:function(e){var t=yt();return e={current:e},t.memoizedState=e},useState:function(e){e=lc(e);var t=e.queue,a=Kd.bind(null,ve,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:sc,useDeferredValue:function(e,t){var a=yt();return ic(a,e,t)},useTransition:function(){var e=lc(!1);return e=Gd.bind(null,ve,e.queue,!0,!1),yt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var l=ve,n=yt();if(Re){if(a===void 0)throw Error(r(407));a=a()}else{if(a=t(),He===null)throw Error(r(349));(xe&124)!==0||vd(l,t,a)}n.memoizedState=a;var c={value:a,getSnapshot:t};return n.queue=c,Md(bd.bind(null,l,c,e),[e]),l.flags|=2048,Pl(9,li(),pd.bind(null,l,c,a,t),null),a},useId:function(){var e=yt(),t=He.identifierPrefix;if(Re){var a=ra,l=ia;a=(l&~(1<<32-Le(l)-1)).toString(32)+a,t="«"+t+"R"+a,a=ei++,0<a&&(t+="H"+a.toString(32)),t+="»"}else a=O2++,t="«"+t+"r"+a.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:cc,useFormState:Td,useActionState:Td,useOptimistic:function(e){var t=yt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=uc.bind(null,ve,!0,a),a.dispatch=t,[e,t]},useMemoCache:ec,useCacheRefresh:function(){return yt().memoizedState=I2.bind(null,ve)}},Jd={readContext:ot,use:ti,useCallback:Ud,useContext:ot,useEffect:zd,useImperativeHandle:Bd,useInsertionEffect:Ld,useLayoutEffect:Hd,useMemo:Vd,useReducer:ai,useRef:Od,useState:function(){return ai(oa)},useDebugValue:sc,useDeferredValue:function(e,t){var a=Pe();return qd(a,we.memoizedState,e,t)},useTransition:function(){var e=ai(oa)[0],t=Pe().memoizedState;return[typeof e=="boolean"?e:Yn(e),t]},useSyncExternalStore:yd,useId:Xd,useHostTransitionStatus:cc,useFormState:jd,useActionState:jd,useOptimistic:function(e,t){var a=Pe();return Nd(a,we,e,t)},useMemoCache:ec,useCacheRefresh:Yd},U2={readContext:ot,use:ti,useCallback:Ud,useContext:ot,useEffect:zd,useImperativeHandle:Bd,useInsertionEffect:Ld,useLayoutEffect:Hd,useMemo:Vd,useReducer:ac,useRef:Od,useState:function(){return ac(oa)},useDebugValue:sc,useDeferredValue:function(e,t){var a=Pe();return we===null?ic(a,e,t):qd(a,we.memoizedState,e,t)},useTransition:function(){var e=ac(oa)[0],t=Pe().memoizedState;return[typeof e=="boolean"?e:Yn(e),t]},useSyncExternalStore:yd,useId:Xd,useHostTransitionStatus:cc,useFormState:wd,useActionState:wd,useOptimistic:function(e,t){var a=Pe();return we!==null?Nd(a,we,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:ec,useCacheRefresh:Yd},Jl=null,$n=0;function ri(e){var t=$n;return $n+=1,Jl===null&&(Jl=[]),cd(Jl,e,t)}function Pn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ci(e,t){throw t.$$typeof===p?Error(r(525)):(e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Wd(e){var t=e._init;return t(e._payload)}function Fd(e){function t(A,C){if(e){var R=A.deletions;R===null?(A.deletions=[C],A.flags|=16):R.push(C)}}function a(A,C){if(!e)return null;for(;C!==null;)t(A,C),C=C.sibling;return null}function l(A){for(var C=new Map;A!==null;)A.key!==null?C.set(A.key,A):C.set(A.index,A),A=A.sibling;return C}function n(A,C){return A=sa(A,C),A.index=0,A.sibling=null,A}function c(A,C,R){return A.index=R,e?(R=A.alternate,R!==null?(R=R.index,R<C?(A.flags|=67108866,C):R):(A.flags|=67108866,C)):(A.flags|=1048576,C)}function h(A){return e&&A.alternate===null&&(A.flags|=67108866),A}function m(A,C,R,H){return C===null||C.tag!==6?(C=Dr(R,A.mode,H),C.return=A,C):(C=n(C,R),C.return=A,C)}function b(A,C,R,H){var ae=R.type;return ae===X?M(A,C,R.props.children,H,R.key):C!==null&&(C.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===ge&&Wd(ae)===C.type)?(C=n(C,R.props),Pn(C,R),C.return=A,C):(C=ks(R.type,R.key,R.props,null,A.mode,H),Pn(C,R),C.return=A,C)}function j(A,C,R,H){return C===null||C.tag!==4||C.stateNode.containerInfo!==R.containerInfo||C.stateNode.implementation!==R.implementation?(C=wr(R,A.mode,H),C.return=A,C):(C=n(C,R.children||[]),C.return=A,C)}function M(A,C,R,H,ae){return C===null||C.tag!==7?(C=rl(R,A.mode,H,ae),C.return=A,C):(C=n(C,R),C.return=A,C)}function V(A,C,R){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=Dr(""+C,A.mode,R),C.return=A,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case _:return R=ks(C.type,C.key,C.props,null,A.mode,R),Pn(R,C),R.return=A,R;case B:return C=wr(C,A.mode,R),C.return=A,C;case ge:var H=C._init;return C=H(C._payload),V(A,C,R)}if(se(C)||W(C))return C=rl(C,A.mode,R,null),C.return=A,C;if(typeof C.then=="function")return V(A,ri(C),R);if(C.$$typeof===te)return V(A,Qs(A,C),R);ci(A,C)}return null}function w(A,C,R,H){var ae=C!==null?C.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return ae!==null?null:m(A,C,""+R,H);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case _:return R.key===ae?b(A,C,R,H):null;case B:return R.key===ae?j(A,C,R,H):null;case ge:return ae=R._init,R=ae(R._payload),w(A,C,R,H)}if(se(R)||W(R))return ae!==null?null:M(A,C,R,H,null);if(typeof R.then=="function")return w(A,C,ri(R),H);if(R.$$typeof===te)return w(A,C,Qs(A,R),H);ci(A,R)}return null}function O(A,C,R,H,ae){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return A=A.get(R)||null,m(C,A,""+H,ae);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case _:return A=A.get(H.key===null?R:H.key)||null,b(C,A,H,ae);case B:return A=A.get(H.key===null?R:H.key)||null,j(C,A,H,ae);case ge:var be=H._init;return H=be(H._payload),O(A,C,R,H,ae)}if(se(H)||W(H))return A=A.get(R)||null,M(C,A,H,ae,null);if(typeof H.then=="function")return O(A,C,R,ri(H),ae);if(H.$$typeof===te)return O(A,C,R,Qs(C,H),ae);ci(C,H)}return null}function he(A,C,R,H){for(var ae=null,be=null,ce=C,de=C=0,nt=null;ce!==null&&de<R.length;de++){ce.index>de?(nt=ce,ce=null):nt=ce.sibling;var _e=w(A,ce,R[de],H);if(_e===null){ce===null&&(ce=nt);break}e&&ce&&_e.alternate===null&&t(A,ce),C=c(_e,C,de),be===null?ae=_e:be.sibling=_e,be=_e,ce=nt}if(de===R.length)return a(A,ce),Re&&ul(A,de),ae;if(ce===null){for(;de<R.length;de++)ce=V(A,R[de],H),ce!==null&&(C=c(ce,C,de),be===null?ae=ce:be.sibling=ce,be=ce);return Re&&ul(A,de),ae}for(ce=l(ce);de<R.length;de++)nt=O(ce,A,de,R[de],H),nt!==null&&(e&&nt.alternate!==null&&ce.delete(nt.key===null?de:nt.key),C=c(nt,C,de),be===null?ae=nt:be.sibling=nt,be=nt);return e&&ce.forEach(function(Pa){return t(A,Pa)}),Re&&ul(A,de),ae}function oe(A,C,R,H){if(R==null)throw Error(r(151));for(var ae=null,be=null,ce=C,de=C=0,nt=null,_e=R.next();ce!==null&&!_e.done;de++,_e=R.next()){ce.index>de?(nt=ce,ce=null):nt=ce.sibling;var Pa=w(A,ce,_e.value,H);if(Pa===null){ce===null&&(ce=nt);break}e&&ce&&Pa.alternate===null&&t(A,ce),C=c(Pa,C,de),be===null?ae=Pa:be.sibling=Pa,be=Pa,ce=nt}if(_e.done)return a(A,ce),Re&&ul(A,de),ae;if(ce===null){for(;!_e.done;de++,_e=R.next())_e=V(A,_e.value,H),_e!==null&&(C=c(_e,C,de),be===null?ae=_e:be.sibling=_e,be=_e);return Re&&ul(A,de),ae}for(ce=l(ce);!_e.done;de++,_e=R.next())_e=O(ce,A,de,_e.value,H),_e!==null&&(e&&_e.alternate!==null&&ce.delete(_e.key===null?de:_e.key),C=c(_e,C,de),be===null?ae=_e:be.sibling=_e,be=_e);return e&&ce.forEach(function(Vg){return t(A,Vg)}),Re&&ul(A,de),ae}function Me(A,C,R,H){if(typeof R=="object"&&R!==null&&R.type===X&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case _:e:{for(var ae=R.key;C!==null;){if(C.key===ae){if(ae=R.type,ae===X){if(C.tag===7){a(A,C.sibling),H=n(C,R.props.children),H.return=A,A=H;break e}}else if(C.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===ge&&Wd(ae)===C.type){a(A,C.sibling),H=n(C,R.props),Pn(H,R),H.return=A,A=H;break e}a(A,C);break}else t(A,C);C=C.sibling}R.type===X?(H=rl(R.props.children,A.mode,H,R.key),H.return=A,A=H):(H=ks(R.type,R.key,R.props,null,A.mode,H),Pn(H,R),H.return=A,A=H)}return h(A);case B:e:{for(ae=R.key;C!==null;){if(C.key===ae)if(C.tag===4&&C.stateNode.containerInfo===R.containerInfo&&C.stateNode.implementation===R.implementation){a(A,C.sibling),H=n(C,R.children||[]),H.return=A,A=H;break e}else{a(A,C);break}else t(A,C);C=C.sibling}H=wr(R,A.mode,H),H.return=A,A=H}return h(A);case ge:return ae=R._init,R=ae(R._payload),Me(A,C,R,H)}if(se(R))return he(A,C,R,H);if(W(R)){if(ae=W(R),typeof ae!="function")throw Error(r(150));return R=ae.call(R),oe(A,C,R,H)}if(typeof R.then=="function")return Me(A,C,ri(R),H);if(R.$$typeof===te)return Me(A,C,Qs(A,R),H);ci(A,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,C!==null&&C.tag===6?(a(A,C.sibling),H=n(C,R),H.return=A,A=H):(a(A,C),H=Dr(R,A.mode,H),H.return=A,A=H),h(A)):a(A,C)}return function(A,C,R,H){try{$n=0;var ae=Me(A,C,R,H);return Jl=null,ae}catch(ce){if(ce===Vn||ce===Ps)throw ce;var be=Nt(29,ce,null,A.mode);return be.lanes=H,be.return=A,be}finally{}}}var Wl=Fd(!0),ef=Fd(!1),Ht=qe(null),Pt=null;function La(e){var t=e.alternate;Ee(Fe,Fe.current&1),Ee(Ht,e),Pt===null&&(t===null||Kl.current!==null||t.memoizedState!==null)&&(Pt=e)}function tf(e){if(e.tag===22){if(Ee(Fe,Fe.current),Ee(Ht,e),Pt===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Pt=e)}}else Ha()}function Ha(){Ee(Fe,Fe.current),Ee(Ht,Ht.current)}function da(e){Te(Ht),Pt===e&&(Pt=null),Te(Fe)}var Fe=qe(0);function ui(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Fc(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function oc(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:N({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var dc={enqueueSetState:function(e,t,a){e=e._reactInternals;var l=_t(),n=Oa(l);n.payload=t,a!=null&&(n.callback=a),t=Ma(e,n,l),t!==null&&(Rt(t,e,l),Gn(t,e,l))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=_t(),n=Oa(l);n.tag=1,n.payload=t,a!=null&&(n.callback=a),t=Ma(e,n,l),t!==null&&(Rt(t,e,l),Gn(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=_t(),l=Oa(a);l.tag=2,t!=null&&(l.callback=t),t=Ma(e,l,a),t!==null&&(Rt(t,e,a),Gn(t,e,a))}};function af(e,t,a,l,n,c,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,c,h):t.prototype&&t.prototype.isPureReactComponent?!On(a,l)||!On(n,c):!0}function lf(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&dc.enqueueReplaceState(t,t.state,null)}function yl(e,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(e=e.defaultProps){a===t&&(a=N({},a));for(var n in e)a[n]===void 0&&(a[n]=e[n])}return a}var oi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function nf(e){oi(e)}function sf(e){console.error(e)}function rf(e){oi(e)}function di(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function cf(e,t,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function fc(e,t,a){return a=Oa(a),a.tag=3,a.payload={element:null},a.callback=function(){di(e,t)},a}function uf(e){return e=Oa(e),e.tag=3,e}function of(e,t,a,l){var n=a.type.getDerivedStateFromError;if(typeof n=="function"){var c=l.value;e.payload=function(){return n(c)},e.callback=function(){cf(t,a,l)}}var h=a.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(e.callback=function(){cf(t,a,l),typeof n!="function"&&(Ga===null?Ga=new Set([this]):Ga.add(this));var m=l.stack;this.componentDidCatch(l.value,{componentStack:m!==null?m:""})})}function V2(e,t,a,l,n){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&In(t,a,n,!0),a=Ht.current,a!==null){switch(a.tag){case 13:return Pt===null?Hc():a.alternate===null&&ke===0&&(ke=3),a.flags&=-257,a.flags|=65536,a.lanes=n,l===qr?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),Bc(e,l,n)),!1;case 22:return a.flags|=65536,l===qr?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),Bc(e,l,n)),!1}throw Error(r(435,a.tag))}return Bc(e,l,n),Hc(),!1}if(Re)return t=Ht.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=n,l!==zr&&(e=Error(r(422),{cause:l}),Hn(Ot(e,a)))):(l!==zr&&(t=Error(r(423),{cause:l}),Hn(Ot(t,a))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,l=Ot(l,a),n=fc(e.stateNode,l,n),kr(e,n),ke!==4&&(ke=2)),!1;var c=Error(r(520),{cause:l});if(c=Ot(c,a),ls===null?ls=[c]:ls.push(c),ke!==4&&(ke=2),t===null)return!0;l=Ot(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=n&-n,a.lanes|=e,e=fc(a.stateNode,l,e),kr(a,e),!1;case 1:if(t=a.type,c=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(Ga===null||!Ga.has(c))))return a.flags|=65536,n&=-n,a.lanes|=n,n=uf(n),of(n,e,a,l),kr(a,n),!1}a=a.return}while(a!==null);return!1}var df=Error(r(461)),at=!1;function st(e,t,a,l){t.child=e===null?ef(t,null,a,l):Wl(t,e.child,a,l)}function ff(e,t,a,l,n){a=a.render;var c=t.ref;if("ref"in l){var h={};for(var m in l)m!=="ref"&&(h[m]=l[m])}else h=l;return hl(t),l=$r(e,t,a,h,c,n),m=Pr(),e!==null&&!at?(Jr(e,t,n),fa(e,t,n)):(Re&&m&&Or(t),t.flags|=1,st(e,t,l,n),t.child)}function hf(e,t,a,l,n){if(e===null){var c=a.type;return typeof c=="function"&&!jr(c)&&c.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=c,mf(e,t,c,l,n)):(e=ks(a.type,null,l,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!Sc(e,n)){var h=c.memoizedProps;if(a=a.compare,a=a!==null?a:On,a(h,l)&&e.ref===t.ref)return fa(e,t,n)}return t.flags|=1,e=sa(c,l),e.ref=t.ref,e.return=t,t.child=e}function mf(e,t,a,l,n){if(e!==null){var c=e.memoizedProps;if(On(c,l)&&e.ref===t.ref)if(at=!1,t.pendingProps=l=c,Sc(e,n))(e.flags&131072)!==0&&(at=!0);else return t.lanes=e.lanes,fa(e,t,n)}return hc(e,t,a,l,n)}function gf(e,t,a){var l=t.pendingProps,n=l.children,c=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((t.flags&128)!==0){if(l=c!==null?c.baseLanes|a:a,e!==null){for(n=t.child=e.child,c=0;n!==null;)c=c|n.lanes|n.childLanes,n=n.sibling;t.childLanes=c&~l}else t.childLanes=0,t.child=null;return yf(e,t,l,a)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&$s(t,c!==null?c.cachePool:null),c!==null?hd(t,c):Yr(),tf(t);else return t.lanes=t.childLanes=536870912,yf(e,t,c!==null?c.baseLanes|a:a,a)}else c!==null?($s(t,c.cachePool),hd(t,c),Ha(),t.memoizedState=null):(e!==null&&$s(t,null),Yr(),Ha());return st(e,t,n,a),t.child}function yf(e,t,a,l){var n=Vr();return n=n===null?null:{parent:We._currentValue,pool:n},t.memoizedState={baseLanes:a,cachePool:n},e!==null&&$s(t,null),Yr(),tf(t),e!==null&&In(e,t,l,!0),null}function fi(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function hc(e,t,a,l,n){return hl(t),a=$r(e,t,a,l,void 0,n),l=Pr(),e!==null&&!at?(Jr(e,t,n),fa(e,t,n)):(Re&&l&&Or(t),t.flags|=1,st(e,t,a,n),t.child)}function vf(e,t,a,l,n,c){return hl(t),t.updateQueue=null,a=gd(t,l,a,n),md(e),l=Pr(),e!==null&&!at?(Jr(e,t,c),fa(e,t,c)):(Re&&l&&Or(t),t.flags|=1,st(e,t,a,c),t.child)}function pf(e,t,a,l,n){if(hl(t),t.stateNode===null){var c=Gl,h=a.contextType;typeof h=="object"&&h!==null&&(c=ot(h)),c=new a(l,c),t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=dc,t.stateNode=c,c._reactInternals=t,c=t.stateNode,c.props=l,c.state=t.memoizedState,c.refs={},Gr(t),h=a.contextType,c.context=typeof h=="object"&&h!==null?ot(h):Gl,c.state=t.memoizedState,h=a.getDerivedStateFromProps,typeof h=="function"&&(oc(t,a,h,l),c.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(h=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),h!==c.state&&dc.enqueueReplaceState(c,c.state,null),kn(t,l,c,n),Zn(),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){c=t.stateNode;var m=t.memoizedProps,b=yl(a,m);c.props=b;var j=c.context,M=a.contextType;h=Gl,typeof M=="object"&&M!==null&&(h=ot(M));var V=a.getDerivedStateFromProps;M=typeof V=="function"||typeof c.getSnapshotBeforeUpdate=="function",m=t.pendingProps!==m,M||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(m||j!==h)&&lf(t,c,l,h),wa=!1;var w=t.memoizedState;c.state=w,kn(t,l,c,n),Zn(),j=t.memoizedState,m||w!==j||wa?(typeof V=="function"&&(oc(t,a,V,l),j=t.memoizedState),(b=wa||af(t,a,b,l,w,j,h))?(M||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=j),c.props=l,c.state=j,c.context=h,l=b):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{c=t.stateNode,Zr(e,t),h=t.memoizedProps,M=yl(a,h),c.props=M,V=t.pendingProps,w=c.context,j=a.contextType,b=Gl,typeof j=="object"&&j!==null&&(b=ot(j)),m=a.getDerivedStateFromProps,(j=typeof m=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(h!==V||w!==b)&&lf(t,c,l,b),wa=!1,w=t.memoizedState,c.state=w,kn(t,l,c,n),Zn();var O=t.memoizedState;h!==V||w!==O||wa||e!==null&&e.dependencies!==null&&Ks(e.dependencies)?(typeof m=="function"&&(oc(t,a,m,l),O=t.memoizedState),(M=wa||af(t,a,M,l,w,O,b)||e!==null&&e.dependencies!==null&&Ks(e.dependencies))?(j||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(l,O,b),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(l,O,b)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||h===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=O),c.props=l,c.state=O,c.context=b,l=M):(typeof c.componentDidUpdate!="function"||h===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),l=!1)}return c=l,fi(e,t),l=(t.flags&128)!==0,c||l?(c=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:c.render(),t.flags|=1,e!==null&&l?(t.child=Wl(t,e.child,null,n),t.child=Wl(t,null,a,n)):st(e,t,a,n),t.memoizedState=c.state,e=t.child):e=fa(e,t,n),e}function bf(e,t,a,l){return Ln(),t.flags|=256,st(e,t,a,l),t.child}var mc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gc(e){return{baseLanes:e,cachePool:sd()}}function yc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=It),e}function Sf(e,t,a){var l=t.pendingProps,n=!1,c=(t.flags&128)!==0,h;if((h=c)||(h=e!==null&&e.memoizedState===null?!1:(Fe.current&2)!==0),h&&(n=!0,t.flags&=-129),h=(t.flags&32)!==0,t.flags&=-33,e===null){if(Re){if(n?La(t):Ha(),Re){var m=Ze,b;if(b=m){e:{for(b=m,m=$t;b.nodeType!==8;){if(!m){m=null;break e}if(b=Zt(b.nextSibling),b===null){m=null;break e}}m=b}m!==null?(t.memoizedState={dehydrated:m,treeContext:cl!==null?{id:ia,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},b=Nt(18,null,null,0),b.stateNode=m,b.return=t,t.child=b,ft=t,Ze=null,b=!0):b=!1}b||dl(t)}if(m=t.memoizedState,m!==null&&(m=m.dehydrated,m!==null))return Fc(m)?t.lanes=32:t.lanes=536870912,null;da(t)}return m=l.children,l=l.fallback,n?(Ha(),n=t.mode,m=hi({mode:"hidden",children:m},n),l=rl(l,n,a,null),m.return=t,l.return=t,m.sibling=l,t.child=m,n=t.child,n.memoizedState=gc(a),n.childLanes=yc(e,h,a),t.memoizedState=mc,l):(La(t),vc(t,m))}if(b=e.memoizedState,b!==null&&(m=b.dehydrated,m!==null)){if(c)t.flags&256?(La(t),t.flags&=-257,t=pc(e,t,a)):t.memoizedState!==null?(Ha(),t.child=e.child,t.flags|=128,t=null):(Ha(),n=l.fallback,m=t.mode,l=hi({mode:"visible",children:l.children},m),n=rl(n,m,a,null),n.flags|=2,l.return=t,n.return=t,l.sibling=n,t.child=l,Wl(t,e.child,null,a),l=t.child,l.memoizedState=gc(a),l.childLanes=yc(e,h,a),t.memoizedState=mc,t=n);else if(La(t),Fc(m)){if(h=m.nextSibling&&m.nextSibling.dataset,h)var j=h.dgst;h=j,l=Error(r(419)),l.stack="",l.digest=h,Hn({value:l,source:null,stack:null}),t=pc(e,t,a)}else if(at||In(e,t,a,!1),h=(a&e.childLanes)!==0,at||h){if(h=He,h!==null&&(l=a&-a,l=(l&42)!==0?1:er(l),l=(l&(h.suspendedLanes|a))!==0?0:l,l!==0&&l!==b.retryLane))throw b.retryLane=l,ql(e,l),Rt(h,e,l),df;m.data==="$?"||Hc(),t=pc(e,t,a)}else m.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=b.treeContext,Ze=Zt(m.nextSibling),ft=t,Re=!0,ol=null,$t=!1,e!==null&&(zt[Lt++]=ia,zt[Lt++]=ra,zt[Lt++]=cl,ia=e.id,ra=e.overflow,cl=t),t=vc(t,l.children),t.flags|=4096);return t}return n?(Ha(),n=l.fallback,m=t.mode,b=e.child,j=b.sibling,l=sa(b,{mode:"hidden",children:l.children}),l.subtreeFlags=b.subtreeFlags&65011712,j!==null?n=sa(j,n):(n=rl(n,m,a,null),n.flags|=2),n.return=t,l.return=t,l.sibling=n,t.child=l,l=n,n=t.child,m=e.child.memoizedState,m===null?m=gc(a):(b=m.cachePool,b!==null?(j=We._currentValue,b=b.parent!==j?{parent:j,pool:j}:b):b=sd(),m={baseLanes:m.baseLanes|a,cachePool:b}),n.memoizedState=m,n.childLanes=yc(e,h,a),t.memoizedState=mc,l):(La(t),a=e.child,e=a.sibling,a=sa(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,e!==null&&(h=t.deletions,h===null?(t.deletions=[e],t.flags|=16):h.push(e)),t.child=a,t.memoizedState=null,a)}function vc(e,t){return t=hi({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function hi(e,t){return e=Nt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function pc(e,t,a){return Wl(t,e.child,null,a),e=vc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Cf(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Hr(e.return,t,a)}function bc(e,t,a,l,n){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:n}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=l,c.tail=a,c.tailMode=n)}function Nf(e,t,a){var l=t.pendingProps,n=l.revealOrder,c=l.tail;if(st(e,t,l.children,a),l=Fe.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cf(e,a,t);else if(e.tag===19)Cf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(Ee(Fe,l),n){case"forwards":for(a=t.child,n=null;a!==null;)e=a.alternate,e!==null&&ui(e)===null&&(n=a),a=a.sibling;a=n,a===null?(n=t.child,t.child=null):(n=a.sibling,a.sibling=null),bc(t,!1,n,a,c);break;case"backwards":for(a=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&ui(e)===null){t.child=n;break}e=n.sibling,n.sibling=a,a=n,n=e}bc(t,!0,a,null,c);break;case"together":bc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function fa(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),qa|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(In(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,a=sa(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=sa(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Sc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ks(e)))}function q2(e,t,a){switch(t.tag){case 3:Fa(t,t.stateNode.containerInfo),Da(t,We,e.memoizedState.cache),Ln();break;case 27:case 5:el(t);break;case 4:Fa(t,t.stateNode.containerInfo);break;case 10:Da(t,t.type,t.memoizedProps.value);break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(La(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Sf(e,t,a):(La(t),e=fa(e,t,a),e!==null?e.sibling:null);La(t);break;case 19:var n=(e.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(In(e,t,a,!1),l=(a&t.childLanes)!==0),n){if(l)return Nf(e,t,a);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Ee(Fe,Fe.current),l)break;return null;case 22:case 23:return t.lanes=0,gf(e,t,a);case 24:Da(t,We,e.memoizedState.cache)}return fa(e,t,a)}function Af(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)at=!0;else{if(!Sc(e,a)&&(t.flags&128)===0)return at=!1,q2(e,t,a);at=(e.flags&131072)!==0}else at=!1,Re&&(t.flags&1048576)!==0&&Wo(t,Ys,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var l=t.elementType,n=l._init;if(l=n(l._payload),t.type=l,typeof l=="function")jr(l)?(e=yl(l,e),t.tag=1,t=pf(null,t,l,e,a)):(t.tag=0,t=hc(null,t,l,e,a));else{if(l!=null){if(n=l.$$typeof,n===L){t.tag=11,t=ff(null,t,l,e,a);break e}else if(n===J){t.tag=14,t=hf(null,t,l,e,a);break e}}throw t=Q(l)||l,Error(r(306,t,""))}}return t;case 0:return hc(e,t,t.type,t.pendingProps,a);case 1:return l=t.type,n=yl(l,t.pendingProps),pf(e,t,l,n,a);case 3:e:{if(Fa(t,t.stateNode.containerInfo),e===null)throw Error(r(387));l=t.pendingProps;var c=t.memoizedState;n=c.element,Zr(e,t),kn(t,l,null,a);var h=t.memoizedState;if(l=h.cache,Da(t,We,l),l!==c.cache&&Ir(t,[We],a,!0),Zn(),l=h.element,c.isDehydrated)if(c={element:l,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){t=bf(e,t,l,a);break e}else if(l!==n){n=Ot(Error(r(424)),t),Hn(n),t=bf(e,t,l,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ze=Zt(e.firstChild),ft=t,Re=!0,ol=null,$t=!0,a=ef(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ln(),l===n){t=fa(e,t,a);break e}st(e,t,l,a)}t=t.child}return t;case 26:return fi(e,t),e===null?(a=R0(t.type,null,t.pendingProps,null))?t.memoizedState=a:Re||(a=t.type,e=t.pendingProps,l=Ri(Yt.current).createElement(a),l[ut]=t,l[mt]=e,rt(l,a,e),tt(l),t.stateNode=l):t.memoizedState=R0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return el(t),e===null&&Re&&(l=t.stateNode=x0(t.type,t.pendingProps,Yt.current),ft=t,$t=!0,n=Ze,Xa(t.type)?(eu=n,Ze=Zt(l.firstChild)):Ze=n),st(e,t,t.pendingProps.children,a),fi(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Re&&((n=l=Ze)&&(l=gg(l,t.type,t.pendingProps,$t),l!==null?(t.stateNode=l,ft=t,Ze=Zt(l.firstChild),$t=!1,n=!0):n=!1),n||dl(t)),el(t),n=t.type,c=t.pendingProps,h=e!==null?e.memoizedProps:null,l=c.children,Pc(n,c)?l=null:h!==null&&Pc(n,h)&&(t.flags|=32),t.memoizedState!==null&&(n=$r(e,t,M2,null,null,a),fs._currentValue=n),fi(e,t),st(e,t,l,a),t.child;case 6:return e===null&&Re&&((e=a=Ze)&&(a=yg(a,t.pendingProps,$t),a!==null?(t.stateNode=a,ft=t,Ze=null,e=!0):e=!1),e||dl(t)),null;case 13:return Sf(e,t,a);case 4:return Fa(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Wl(t,null,l,a):st(e,t,l,a),t.child;case 11:return ff(e,t,t.type,t.pendingProps,a);case 7:return st(e,t,t.pendingProps,a),t.child;case 8:return st(e,t,t.pendingProps.children,a),t.child;case 12:return st(e,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,Da(t,t.type,l.value),st(e,t,l.children,a),t.child;case 9:return n=t.type._context,l=t.pendingProps.children,hl(t),n=ot(n),l=l(n),t.flags|=1,st(e,t,l,a),t.child;case 14:return hf(e,t,t.type,t.pendingProps,a);case 15:return mf(e,t,t.type,t.pendingProps,a);case 19:return Nf(e,t,a);case 31:return l=t.pendingProps,a=t.mode,l={mode:l.mode,children:l.children},e===null?(a=hi(l,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=sa(e.child,l),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return gf(e,t,a);case 24:return hl(t),l=ot(We),e===null?(n=Vr(),n===null&&(n=He,c=Br(),n.pooledCache=c,c.refCount++,c!==null&&(n.pooledCacheLanes|=a),n=c),t.memoizedState={parent:l,cache:n},Gr(t),Da(t,We,n)):((e.lanes&a)!==0&&(Zr(e,t),kn(t,null,null,a),Zn()),n=e.memoizedState,c=t.memoizedState,n.parent!==l?(n={parent:l,cache:l},t.memoizedState=n,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=n),Da(t,We,l)):(l=c.cache,Da(t,We,l),l!==n.cache&&Ir(t,[We],a,!0))),st(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function ha(e){e.flags|=4}function xf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!O0(t)){if(t=Ht.current,t!==null&&((xe&4194048)===xe?Pt!==null:(xe&62914560)!==xe&&(xe&536870912)===0||t!==Pt))throw qn=qr,id;e.flags|=8192}}function mi(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?eo():536870912,e.lanes|=t,an|=t)}function Jn(e,t){if(!Re)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ge(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var n=e.child;n!==null;)a|=n.lanes|n.childLanes,l|=n.subtreeFlags&65011712,l|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)a|=n.lanes|n.childLanes,l|=n.subtreeFlags,l|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function G2(e,t,a){var l=t.pendingProps;switch(Mr(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(t),null;case 1:return Ge(t),null;case 3:return a=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),ua(We),Kt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(zn(t)?ha(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,td())),Ge(t),null;case 26:return a=t.memoizedState,e===null?(ha(t),a!==null?(Ge(t),xf(t,a)):(Ge(t),t.flags&=-16777217)):a?a!==e.memoizedState?(ha(t),Ge(t),xf(t,a)):(Ge(t),t.flags&=-16777217):(e.memoizedProps!==l&&ha(t),Ge(t),t.flags&=-16777217),null;case 27:Al(t),a=Yt.current;var n=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ha(t);else{if(!l){if(t.stateNode===null)throw Error(r(166));return Ge(t),null}e=Qe.current,zn(t)?Fo(t):(e=x0(n,l,a),t.stateNode=e,ha(t))}return Ge(t),null;case 5:if(Al(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ha(t);else{if(!l){if(t.stateNode===null)throw Error(r(166));return Ge(t),null}if(e=Qe.current,zn(t))Fo(t);else{switch(n=Ri(Yt.current),e){case 1:e=n.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=n.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=n.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=n.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?n.createElement("select",{is:l.is}):n.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?n.createElement(a,{is:l.is}):n.createElement(a)}}e[ut]=t,e[mt]=l;e:for(n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.tag!==27&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}t.stateNode=e;e:switch(rt(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&ha(t)}}return Ge(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&ha(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(r(166));if(e=Yt.current,zn(t)){if(e=t.stateNode,a=t.memoizedProps,l=null,n=ft,n!==null)switch(n.tag){case 27:case 5:l=n.memoizedProps}e[ut]=t,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||v0(e.nodeValue,a)),e||dl(t)}else e=Ri(e).createTextNode(l),e[ut]=t,t.stateNode=e}return Ge(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=zn(t),l!==null&&l.dehydrated!==null){if(e===null){if(!n)throw Error(r(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));n[ut]=t}else Ln(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ge(t),n=!1}else n=td(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return t.flags&256?(da(t),t):(da(t),null)}if(da(t),(t.flags&128)!==0)return t.lanes=a,t;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=t.child,n=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(n=l.alternate.memoizedState.cachePool.pool);var c=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(c=l.memoizedState.cachePool.pool),c!==n&&(l.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),mi(t,t.updateQueue),Ge(t),null;case 4:return Kt(),e===null&&Xc(t.stateNode.containerInfo),Ge(t),null;case 10:return ua(t.type),Ge(t),null;case 19:if(Te(Fe),n=t.memoizedState,n===null)return Ge(t),null;if(l=(t.flags&128)!==0,c=n.rendering,c===null)if(l)Jn(n,!1);else{if(ke!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(c=ui(e),c!==null){for(t.flags|=128,Jn(n,!1),e=c.updateQueue,t.updateQueue=e,mi(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Jo(a,e),a=a.sibling;return Ee(Fe,Fe.current&1|2),t.child}e=e.sibling}n.tail!==null&&jt()>vi&&(t.flags|=128,l=!0,Jn(n,!1),t.lanes=4194304)}else{if(!l)if(e=ui(c),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,mi(t,e),Jn(n,!0),n.tail===null&&n.tailMode==="hidden"&&!c.alternate&&!Re)return Ge(t),null}else 2*jt()-n.renderingStartTime>vi&&a!==536870912&&(t.flags|=128,l=!0,Jn(n,!1),t.lanes=4194304);n.isBackwards?(c.sibling=t.child,t.child=c):(e=n.last,e!==null?e.sibling=c:t.child=c,n.last=c)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=jt(),t.sibling=null,e=Fe.current,Ee(Fe,l?e&1|2:e&1),t):(Ge(t),null);case 22:case 23:return da(t),Kr(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(Ge(t),t.subtreeFlags&6&&(t.flags|=8192)):Ge(t),a=t.updateQueue,a!==null&&mi(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),e!==null&&Te(ml),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ua(We),Ge(t),null;case 25:return null;case 30:return null}throw Error(r(156,t.tag))}function Z2(e,t){switch(Mr(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ua(We),Kt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Al(t),null;case 13:if(da(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));Ln()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Te(Fe),null;case 4:return Kt(),null;case 10:return ua(t.type),null;case 22:case 23:return da(t),Kr(),e!==null&&Te(ml),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ua(We),null;case 25:return null;default:return null}}function Ef(e,t){switch(Mr(t),t.tag){case 3:ua(We),Kt();break;case 26:case 27:case 5:Al(t);break;case 4:Kt();break;case 13:da(t);break;case 19:Te(Fe);break;case 10:ua(t.type);break;case 22:case 23:da(t),Kr(),e!==null&&Te(ml);break;case 24:ua(We)}}function Wn(e,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var n=l.next;a=n;do{if((a.tag&e)===e){l=void 0;var c=a.create,h=a.inst;l=c(),h.destroy=l}a=a.next}while(a!==n)}}catch(m){ze(t,t.return,m)}}function Ia(e,t,a){try{var l=t.updateQueue,n=l!==null?l.lastEffect:null;if(n!==null){var c=n.next;l=c;do{if((l.tag&e)===e){var h=l.inst,m=h.destroy;if(m!==void 0){h.destroy=void 0,n=t;var b=a,j=m;try{j()}catch(M){ze(n,b,M)}}}l=l.next}while(l!==c)}}catch(M){ze(t,t.return,M)}}function _f(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{fd(t,a)}catch(l){ze(e,e.return,l)}}}function Rf(e,t,a){a.props=yl(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){ze(e,t,l)}}function Fn(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(n){ze(e,t,n)}}function Jt(e,t){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(n){ze(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(n){ze(e,t,n)}else a.current=null}function Tf(e){var t=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(n){ze(e,e.return,n)}}function Cc(e,t,a){try{var l=e.stateNode;og(l,e.type,a,t),l[mt]=t}catch(n){ze(e,e.return,n)}}function jf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Xa(e.type)||e.tag===4}function Nc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Xa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ac(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=_i));else if(l!==4&&(l===27&&Xa(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Ac(e,t,a),e=e.sibling;e!==null;)Ac(e,t,a),e=e.sibling}function gi(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(l===27&&Xa(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(gi(e,t,a),e=e.sibling;e!==null;)gi(e,t,a),e=e.sibling}function Df(e){var t=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);rt(t,l,a),t[ut]=e,t[mt]=a}catch(c){ze(e,e.return,c)}}var ma=!1,Ye=!1,xc=!1,wf=typeof WeakSet=="function"?WeakSet:Set,lt=null;function k2(e,t){if(e=e.containerInfo,Qc=Mi,e=qo(e),Nr(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var n=l.anchorOffset,c=l.focusNode;l=l.focusOffset;try{a.nodeType,c.nodeType}catch{a=null;break e}var h=0,m=-1,b=-1,j=0,M=0,V=e,w=null;t:for(;;){for(var O;V!==a||n!==0&&V.nodeType!==3||(m=h+n),V!==c||l!==0&&V.nodeType!==3||(b=h+l),V.nodeType===3&&(h+=V.nodeValue.length),(O=V.firstChild)!==null;)w=V,V=O;for(;;){if(V===e)break t;if(w===a&&++j===n&&(m=h),w===c&&++M===l&&(b=h),(O=V.nextSibling)!==null)break;V=w,w=V.parentNode}V=O}a=m===-1||b===-1?null:{start:m,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for($c={focusedElem:e,selectionRange:a},Mi=!1,lt=t;lt!==null;)if(t=lt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,lt=e;else for(;lt!==null;){switch(t=lt,c=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,a=t,n=c.memoizedProps,c=c.memoizedState,l=a.stateNode;try{var he=yl(a.type,n,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(he,c),l.__reactInternalSnapshotBeforeUpdate=e}catch(oe){ze(a,a.return,oe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Wc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Wc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=t.sibling,e!==null){e.return=t.return,lt=e;break}lt=t.return}}function Of(e,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ba(e,a),l&4&&Wn(5,a);break;case 1:if(Ba(e,a),l&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(h){ze(a,a.return,h)}else{var n=yl(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(h){ze(a,a.return,h)}}l&64&&_f(a),l&512&&Fn(a,a.return);break;case 3:if(Ba(e,a),l&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{fd(e,t)}catch(h){ze(a,a.return,h)}}break;case 27:t===null&&l&4&&Df(a);case 26:case 5:Ba(e,a),t===null&&l&4&&Tf(a),l&512&&Fn(a,a.return);break;case 12:Ba(e,a);break;case 13:Ba(e,a),l&4&&Lf(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=F2.bind(null,a),vg(e,a))));break;case 22:if(l=a.memoizedState!==null||ma,!l){t=t!==null&&t.memoizedState!==null||Ye,n=ma;var c=Ye;ma=l,(Ye=t)&&!c?Ua(e,a,(a.subtreeFlags&8772)!==0):Ba(e,a),ma=n,Ye=c}break;case 30:break;default:Ba(e,a)}}function Mf(e){var t=e.alternate;t!==null&&(e.alternate=null,Mf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&lr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ue=null,vt=!1;function ga(e,t,a){for(a=a.child;a!==null;)zf(e,t,a),a=a.sibling}function zf(e,t,a){if(ye&&typeof ye.onCommitFiberUnmount=="function")try{ye.onCommitFiberUnmount(ne,a)}catch{}switch(a.tag){case 26:Ye||Jt(a,t),ga(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ye||Jt(a,t);var l=Ue,n=vt;Xa(a.type)&&(Ue=a.stateNode,vt=!1),ga(e,t,a),cs(a.stateNode),Ue=l,vt=n;break;case 5:Ye||Jt(a,t);case 6:if(l=Ue,n=vt,Ue=null,ga(e,t,a),Ue=l,vt=n,Ue!==null)if(vt)try{(Ue.nodeType===9?Ue.body:Ue.nodeName==="HTML"?Ue.ownerDocument.body:Ue).removeChild(a.stateNode)}catch(c){ze(a,t,c)}else try{Ue.removeChild(a.stateNode)}catch(c){ze(a,t,c)}break;case 18:Ue!==null&&(vt?(e=Ue,N0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),ys(e)):N0(Ue,a.stateNode));break;case 4:l=Ue,n=vt,Ue=a.stateNode.containerInfo,vt=!0,ga(e,t,a),Ue=l,vt=n;break;case 0:case 11:case 14:case 15:Ye||Ia(2,a,t),Ye||Ia(4,a,t),ga(e,t,a);break;case 1:Ye||(Jt(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Rf(a,t,l)),ga(e,t,a);break;case 21:ga(e,t,a);break;case 22:Ye=(l=Ye)||a.memoizedState!==null,ga(e,t,a),Ye=l;break;default:ga(e,t,a)}}function Lf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ys(e)}catch(a){ze(t,t.return,a)}}function X2(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new wf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new wf),t;default:throw Error(r(435,e.tag))}}function Ec(e,t){var a=X2(e);t.forEach(function(l){var n=eg.bind(null,e,l);a.has(l)||(a.add(l),l.then(n,n))})}function At(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var n=a[l],c=e,h=t,m=h;e:for(;m!==null;){switch(m.tag){case 27:if(Xa(m.type)){Ue=m.stateNode,vt=!1;break e}break;case 5:Ue=m.stateNode,vt=!1;break e;case 3:case 4:Ue=m.stateNode.containerInfo,vt=!0;break e}m=m.return}if(Ue===null)throw Error(r(160));zf(c,h,n),Ue=null,vt=!1,c=n.alternate,c!==null&&(c.return=null),n.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Hf(t,e),t=t.sibling}var Gt=null;function Hf(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:At(t,e),xt(e),l&4&&(Ia(3,e,e.return),Wn(3,e),Ia(5,e,e.return));break;case 1:At(t,e),xt(e),l&512&&(Ye||a===null||Jt(a,a.return)),l&64&&ma&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var n=Gt;if(At(t,e),xt(e),l&512&&(Ye||a===null||Jt(a,a.return)),l&4){var c=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,n=n.ownerDocument||n;t:switch(l){case"title":c=n.getElementsByTagName("title")[0],(!c||c[An]||c[ut]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=n.createElement(l),n.head.insertBefore(c,n.querySelector("head > title"))),rt(c,l,a),c[ut]=e,tt(c),l=c;break e;case"link":var h=D0("link","href",n).get(l+(a.href||""));if(h){for(var m=0;m<h.length;m++)if(c=h[m],c.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&c.getAttribute("rel")===(a.rel==null?null:a.rel)&&c.getAttribute("title")===(a.title==null?null:a.title)&&c.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){h.splice(m,1);break t}}c=n.createElement(l),rt(c,l,a),n.head.appendChild(c);break;case"meta":if(h=D0("meta","content",n).get(l+(a.content||""))){for(m=0;m<h.length;m++)if(c=h[m],c.getAttribute("content")===(a.content==null?null:""+a.content)&&c.getAttribute("name")===(a.name==null?null:a.name)&&c.getAttribute("property")===(a.property==null?null:a.property)&&c.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&c.getAttribute("charset")===(a.charSet==null?null:a.charSet)){h.splice(m,1);break t}}c=n.createElement(l),rt(c,l,a),n.head.appendChild(c);break;default:throw Error(r(468,l))}c[ut]=e,tt(c),l=c}e.stateNode=l}else w0(n,e.type,e.stateNode);else e.stateNode=j0(n,l,e.memoizedProps);else c!==l?(c===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):c.count--,l===null?w0(n,e.type,e.stateNode):j0(n,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Cc(e,e.memoizedProps,a.memoizedProps)}break;case 27:At(t,e),xt(e),l&512&&(Ye||a===null||Jt(a,a.return)),a!==null&&l&4&&Cc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(At(t,e),xt(e),l&512&&(Ye||a===null||Jt(a,a.return)),e.flags&32){n=e.stateNode;try{zl(n,"")}catch(O){ze(e,e.return,O)}}l&4&&e.stateNode!=null&&(n=e.memoizedProps,Cc(e,n,a!==null?a.memoizedProps:n)),l&1024&&(xc=!0);break;case 6:if(At(t,e),xt(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(O){ze(e,e.return,O)}}break;case 3:if(Di=null,n=Gt,Gt=Ti(t.containerInfo),At(t,e),Gt=n,xt(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{ys(t.containerInfo)}catch(O){ze(e,e.return,O)}xc&&(xc=!1,If(e));break;case 4:l=Gt,Gt=Ti(e.stateNode.containerInfo),At(t,e),xt(e),Gt=l;break;case 12:At(t,e),xt(e);break;case 13:At(t,e),xt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(wc=jt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ec(e,l)));break;case 22:n=e.memoizedState!==null;var b=a!==null&&a.memoizedState!==null,j=ma,M=Ye;if(ma=j||n,Ye=M||b,At(t,e),Ye=M,ma=j,xt(e),l&8192)e:for(t=e.stateNode,t._visibility=n?t._visibility&-2:t._visibility|1,n&&(a===null||b||ma||Ye||vl(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){b=a=t;try{if(c=b.stateNode,n)h=c.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{m=b.stateNode;var V=b.memoizedProps.style,w=V!=null&&V.hasOwnProperty("display")?V.display:null;m.style.display=w==null||typeof w=="boolean"?"":(""+w).trim()}}catch(O){ze(b,b.return,O)}}}else if(t.tag===6){if(a===null){b=t;try{b.stateNode.nodeValue=n?"":b.memoizedProps}catch(O){ze(b,b.return,O)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Ec(e,a))));break;case 19:At(t,e),xt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ec(e,l)));break;case 30:break;case 21:break;default:At(t,e),xt(e)}}function xt(e){var t=e.flags;if(t&2){try{for(var a,l=e.return;l!==null;){if(jf(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var n=a.stateNode,c=Nc(e);gi(e,c,n);break;case 5:var h=a.stateNode;a.flags&32&&(zl(h,""),a.flags&=-33);var m=Nc(e);gi(e,m,h);break;case 3:case 4:var b=a.stateNode.containerInfo,j=Nc(e);Ac(e,j,b);break;default:throw Error(r(161))}}catch(M){ze(e,e.return,M)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function If(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;If(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ba(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Of(e,t.alternate,t),t=t.sibling}function vl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ia(4,t,t.return),vl(t);break;case 1:Jt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Rf(t,t.return,a),vl(t);break;case 27:cs(t.stateNode);case 26:case 5:Jt(t,t.return),vl(t);break;case 22:t.memoizedState===null&&vl(t);break;case 30:vl(t);break;default:vl(t)}e=e.sibling}}function Ua(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,n=e,c=t,h=c.flags;switch(c.tag){case 0:case 11:case 15:Ua(n,c,a),Wn(4,c);break;case 1:if(Ua(n,c,a),l=c,n=l.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(j){ze(l,l.return,j)}if(l=c,n=l.updateQueue,n!==null){var m=l.stateNode;try{var b=n.shared.hiddenCallbacks;if(b!==null)for(n.shared.hiddenCallbacks=null,n=0;n<b.length;n++)dd(b[n],m)}catch(j){ze(l,l.return,j)}}a&&h&64&&_f(c),Fn(c,c.return);break;case 27:Df(c);case 26:case 5:Ua(n,c,a),a&&l===null&&h&4&&Tf(c),Fn(c,c.return);break;case 12:Ua(n,c,a);break;case 13:Ua(n,c,a),a&&h&4&&Lf(n,c);break;case 22:c.memoizedState===null&&Ua(n,c,a),Fn(c,c.return);break;case 30:break;default:Ua(n,c,a)}t=t.sibling}}function _c(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Bn(a))}function Rc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Bn(e))}function Wt(e,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Bf(e,t,a,l),t=t.sibling}function Bf(e,t,a,l){var n=t.flags;switch(t.tag){case 0:case 11:case 15:Wt(e,t,a,l),n&2048&&Wn(9,t);break;case 1:Wt(e,t,a,l);break;case 3:Wt(e,t,a,l),n&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Bn(e)));break;case 12:if(n&2048){Wt(e,t,a,l),e=t.stateNode;try{var c=t.memoizedProps,h=c.id,m=c.onPostCommit;typeof m=="function"&&m(h,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){ze(t,t.return,b)}}else Wt(e,t,a,l);break;case 13:Wt(e,t,a,l);break;case 23:break;case 22:c=t.stateNode,h=t.alternate,t.memoizedState!==null?c._visibility&2?Wt(e,t,a,l):es(e,t):c._visibility&2?Wt(e,t,a,l):(c._visibility|=2,Fl(e,t,a,l,(t.subtreeFlags&10256)!==0)),n&2048&&_c(h,t);break;case 24:Wt(e,t,a,l),n&2048&&Rc(t.alternate,t);break;default:Wt(e,t,a,l)}}function Fl(e,t,a,l,n){for(n=n&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var c=e,h=t,m=a,b=l,j=h.flags;switch(h.tag){case 0:case 11:case 15:Fl(c,h,m,b,n),Wn(8,h);break;case 23:break;case 22:var M=h.stateNode;h.memoizedState!==null?M._visibility&2?Fl(c,h,m,b,n):es(c,h):(M._visibility|=2,Fl(c,h,m,b,n)),n&&j&2048&&_c(h.alternate,h);break;case 24:Fl(c,h,m,b,n),n&&j&2048&&Rc(h.alternate,h);break;default:Fl(c,h,m,b,n)}t=t.sibling}}function es(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,l=t,n=l.flags;switch(l.tag){case 22:es(a,l),n&2048&&_c(l.alternate,l);break;case 24:es(a,l),n&2048&&Rc(l.alternate,l);break;default:es(a,l)}t=t.sibling}}var ts=8192;function en(e){if(e.subtreeFlags&ts)for(e=e.child;e!==null;)Uf(e),e=e.sibling}function Uf(e){switch(e.tag){case 26:en(e),e.flags&ts&&e.memoizedState!==null&&Dg(Gt,e.memoizedState,e.memoizedProps);break;case 5:en(e);break;case 3:case 4:var t=Gt;Gt=Ti(e.stateNode.containerInfo),en(e),Gt=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=ts,ts=16777216,en(e),ts=t):en(e));break;default:en(e)}}function Vf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function as(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];lt=l,Gf(l,e)}Vf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)qf(e),e=e.sibling}function qf(e){switch(e.tag){case 0:case 11:case 15:as(e),e.flags&2048&&Ia(9,e,e.return);break;case 3:as(e);break;case 12:as(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,yi(e)):as(e);break;default:as(e)}}function yi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];lt=l,Gf(l,e)}Vf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ia(8,t,t.return),yi(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,yi(t));break;default:yi(t)}e=e.sibling}}function Gf(e,t){for(;lt!==null;){var a=lt;switch(a.tag){case 0:case 11:case 15:Ia(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Bn(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,lt=l;else e:for(a=e;lt!==null;){l=lt;var n=l.sibling,c=l.return;if(Mf(l),l===a){lt=null;break e}if(n!==null){n.return=c,lt=n;break e}lt=c}}}var Y2={getCacheForType:function(e){var t=ot(We),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},K2=typeof WeakMap=="function"?WeakMap:Map,je=0,He=null,Se=null,xe=0,De=0,Et=null,Va=!1,tn=!1,Tc=!1,ya=0,ke=0,qa=0,pl=0,jc=0,It=0,an=0,ls=null,pt=null,Dc=!1,wc=0,vi=1/0,pi=null,Ga=null,it=0,Za=null,ln=null,nn=0,Oc=0,Mc=null,Zf=null,ns=0,zc=null;function _t(){if((je&2)!==0&&xe!==0)return xe&-xe;if(E.T!==null){var e=Xl;return e!==0?e:qc()}return lo()}function kf(){It===0&&(It=(xe&536870912)===0||Re?Fu():536870912);var e=Ht.current;return e!==null&&(e.flags|=32),It}function Rt(e,t,a){(e===He&&(De===2||De===9)||e.cancelPendingCommit!==null)&&(sn(e,0),ka(e,xe,It,!1)),Nn(e,a),((je&2)===0||e!==He)&&(e===He&&((je&2)===0&&(pl|=a),ke===4&&ka(e,xe,It,!1)),Ft(e))}function Xf(e,t,a){if((je&6)!==0)throw Error(r(327));var l=!a&&(t&124)===0&&(t&e.expiredLanes)===0||al(e,t),n=l?P2(e,t):Ic(e,t,!0),c=l;do{if(n===0){tn&&!l&&ka(e,t,0,!1);break}else{if(a=e.current.alternate,c&&!Q2(a)){n=Ic(e,t,!1),c=!1;continue}if(n===2){if(c=t,e.errorRecoveryDisabledLanes&c)var h=0;else h=e.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){t=h;e:{var m=e;n=ls;var b=m.current.memoizedState.isDehydrated;if(b&&(sn(m,h).flags|=256),h=Ic(m,h,!1),h!==2){if(Tc&&!b){m.errorRecoveryDisabledLanes|=c,pl|=c,n=4;break e}c=pt,pt=n,c!==null&&(pt===null?pt=c:pt.push.apply(pt,c))}n=h}if(c=!1,n!==2)continue}}if(n===1){sn(e,0),ka(e,t,0,!0);break}e:{switch(l=e,c=n,c){case 0:case 1:throw Error(r(345));case 4:if((t&4194048)!==t)break;case 6:ka(l,t,It,!Va);break e;case 2:pt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((t&62914560)===t&&(n=wc+300-jt(),10<n)){if(ka(l,t,It,!Va),tl(l,0,!0)!==0)break e;l.timeoutHandle=S0(Yf.bind(null,l,a,pt,pi,Dc,t,It,pl,an,Va,c,2,-0,0),n);break e}Yf(l,a,pt,pi,Dc,t,It,pl,an,Va,c,0,-0,0)}}break}while(!0);Ft(e)}function Yf(e,t,a,l,n,c,h,m,b,j,M,V,w,O){if(e.timeoutHandle=-1,V=t.subtreeFlags,(V&8192||(V&16785408)===16785408)&&(ds={stylesheets:null,count:0,unsuspend:jg},Uf(t),V=wg(),V!==null)){e.cancelPendingCommit=V(Ff.bind(null,e,t,c,a,l,n,h,m,b,M,1,w,O)),ka(e,c,h,!j);return}Ff(e,t,c,a,l,n,h,m,b)}function Q2(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var n=a[l],c=n.getSnapshot;n=n.value;try{if(!Ct(c(),n))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ka(e,t,a,l){t&=~jc,t&=~pl,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var n=t;0<n;){var c=31-Le(n),h=1<<c;l[c]=-1,n&=~h}a!==0&&to(e,a,t)}function bi(){return(je&6)===0?(ss(0),!1):!0}function Lc(){if(Se!==null){if(De===0)var e=Se.return;else e=Se,ca=fl=null,Wr(e),Jl=null,$n=0,e=Se;for(;e!==null;)Ef(e.alternate,e),e=e.return;Se=null}}function sn(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,fg(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Lc(),He=e,Se=a=sa(e.current,null),xe=t,De=0,Et=null,Va=!1,tn=al(e,t),Tc=!1,an=It=jc=pl=qa=ke=0,pt=ls=null,Dc=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var n=31-Le(l),c=1<<n;t|=e[n],l&=~c}return ya=t,qs(),a}function Kf(e,t){ve=null,E.H=ii,t===Vn||t===Ps?(t=ud(),De=3):t===id?(t=ud(),De=4):De=t===df?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Et=t,Se===null&&(ke=1,di(e,Ot(t,e.current)))}function Qf(){var e=E.H;return E.H=ii,e===null?ii:e}function $f(){var e=E.A;return E.A=Y2,e}function Hc(){ke=4,Va||(xe&4194048)!==xe&&Ht.current!==null||(tn=!0),(qa&134217727)===0&&(pl&134217727)===0||He===null||ka(He,xe,It,!1)}function Ic(e,t,a){var l=je;je|=2;var n=Qf(),c=$f();(He!==e||xe!==t)&&(pi=null,sn(e,t)),t=!1;var h=ke;e:do try{if(De!==0&&Se!==null){var m=Se,b=Et;switch(De){case 8:Lc(),h=6;break e;case 3:case 2:case 9:case 6:Ht.current===null&&(t=!0);var j=De;if(De=0,Et=null,rn(e,m,b,j),a&&tn){h=0;break e}break;default:j=De,De=0,Et=null,rn(e,m,b,j)}}$2(),h=ke;break}catch(M){Kf(e,M)}while(!0);return t&&e.shellSuspendCounter++,ca=fl=null,je=l,E.H=n,E.A=c,Se===null&&(He=null,xe=0,qs()),h}function $2(){for(;Se!==null;)Pf(Se)}function P2(e,t){var a=je;je|=2;var l=Qf(),n=$f();He!==e||xe!==t?(pi=null,vi=jt()+500,sn(e,t)):tn=al(e,t);e:do try{if(De!==0&&Se!==null){t=Se;var c=Et;t:switch(De){case 1:De=0,Et=null,rn(e,t,c,1);break;case 2:case 9:if(rd(c)){De=0,Et=null,Jf(t);break}t=function(){De!==2&&De!==9||He!==e||(De=7),Ft(e)},c.then(t,t);break e;case 3:De=7;break e;case 4:De=5;break e;case 7:rd(c)?(De=0,Et=null,Jf(t)):(De=0,Et=null,rn(e,t,c,7));break;case 5:var h=null;switch(Se.tag){case 26:h=Se.memoizedState;case 5:case 27:var m=Se;if(!h||O0(h)){De=0,Et=null;var b=m.sibling;if(b!==null)Se=b;else{var j=m.return;j!==null?(Se=j,Si(j)):Se=null}break t}}De=0,Et=null,rn(e,t,c,5);break;case 6:De=0,Et=null,rn(e,t,c,6);break;case 8:Lc(),ke=6;break e;default:throw Error(r(462))}}J2();break}catch(M){Kf(e,M)}while(!0);return ca=fl=null,E.H=l,E.A=n,je=a,Se!==null?0:(He=null,xe=0,qs(),ke)}function J2(){for(;Se!==null&&!Ts();)Pf(Se)}function Pf(e){var t=Af(e.alternate,e,ya);e.memoizedProps=e.pendingProps,t===null?Si(e):Se=t}function Jf(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=vf(a,t,t.pendingProps,t.type,void 0,xe);break;case 11:t=vf(a,t,t.pendingProps,t.type.render,t.ref,xe);break;case 5:Wr(t);default:Ef(a,t),t=Se=Jo(t,ya),t=Af(a,t,ya)}e.memoizedProps=e.pendingProps,t===null?Si(e):Se=t}function rn(e,t,a,l){ca=fl=null,Wr(t),Jl=null,$n=0;var n=t.return;try{if(V2(e,n,t,a,xe)){ke=1,di(e,Ot(a,e.current)),Se=null;return}}catch(c){if(n!==null)throw Se=n,c;ke=1,di(e,Ot(a,e.current)),Se=null;return}t.flags&32768?(Re||l===1?e=!0:tn||(xe&536870912)!==0?e=!1:(Va=e=!0,(l===2||l===9||l===3||l===6)&&(l=Ht.current,l!==null&&l.tag===13&&(l.flags|=16384))),Wf(t,e)):Si(t)}function Si(e){var t=e;do{if((t.flags&32768)!==0){Wf(t,Va);return}e=t.return;var a=G2(t.alternate,t,ya);if(a!==null){Se=a;return}if(t=t.sibling,t!==null){Se=t;return}Se=t=e}while(t!==null);ke===0&&(ke=5)}function Wf(e,t){do{var a=Z2(e.alternate,e);if(a!==null){a.flags&=32767,Se=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Se=e;return}Se=e=a}while(e!==null);ke=6,Se=null}function Ff(e,t,a,l,n,c,h,m,b){e.cancelPendingCommit=null;do Ci();while(it!==0);if((je&6)!==0)throw Error(r(327));if(t!==null){if(t===e.current)throw Error(r(177));if(c=t.lanes|t.childLanes,c|=Rr,jm(e,a,c,h,m,b),e===He&&(Se=He=null,xe=0),ln=t,Za=e,nn=a,Oc=c,Mc=n,Zf=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,tg(D,function(){return n0(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=E.T,E.T=null,n=q.p,q.p=2,h=je,je|=4;try{k2(e,t,a)}finally{je=h,q.p=n,E.T=l}}it=1,e0(),t0(),a0()}}function e0(){if(it===1){it=0;var e=Za,t=ln,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=E.T,E.T=null;var l=q.p;q.p=2;var n=je;je|=4;try{Hf(t,e);var c=$c,h=qo(e.containerInfo),m=c.focusedElem,b=c.selectionRange;if(h!==m&&m&&m.ownerDocument&&Vo(m.ownerDocument.documentElement,m)){if(b!==null&&Nr(m)){var j=b.start,M=b.end;if(M===void 0&&(M=j),"selectionStart"in m)m.selectionStart=j,m.selectionEnd=Math.min(M,m.value.length);else{var V=m.ownerDocument||document,w=V&&V.defaultView||window;if(w.getSelection){var O=w.getSelection(),he=m.textContent.length,oe=Math.min(b.start,he),Me=b.end===void 0?oe:Math.min(b.end,he);!O.extend&&oe>Me&&(h=Me,Me=oe,oe=h);var A=Uo(m,oe),C=Uo(m,Me);if(A&&C&&(O.rangeCount!==1||O.anchorNode!==A.node||O.anchorOffset!==A.offset||O.focusNode!==C.node||O.focusOffset!==C.offset)){var R=V.createRange();R.setStart(A.node,A.offset),O.removeAllRanges(),oe>Me?(O.addRange(R),O.extend(C.node,C.offset)):(R.setEnd(C.node,C.offset),O.addRange(R))}}}}for(V=[],O=m;O=O.parentNode;)O.nodeType===1&&V.push({element:O,left:O.scrollLeft,top:O.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<V.length;m++){var H=V[m];H.element.scrollLeft=H.left,H.element.scrollTop=H.top}}Mi=!!Qc,$c=Qc=null}finally{je=n,q.p=l,E.T=a}}e.current=t,it=2}}function t0(){if(it===2){it=0;var e=Za,t=ln,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=E.T,E.T=null;var l=q.p;q.p=2;var n=je;je|=4;try{Of(e,t.alternate,t)}finally{je=n,q.p=l,E.T=a}}it=3}}function a0(){if(it===4||it===3){it=0,Ji();var e=Za,t=ln,a=nn,l=Zf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?it=5:(it=0,ln=Za=null,l0(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(Ga=null),tr(a),t=t.stateNode,ye&&typeof ye.onCommitFiberRoot=="function")try{ye.onCommitFiberRoot(ne,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=E.T,n=q.p,q.p=2,E.T=null;try{for(var c=e.onRecoverableError,h=0;h<l.length;h++){var m=l[h];c(m.value,{componentStack:m.stack})}}finally{E.T=t,q.p=n}}(nn&3)!==0&&Ci(),Ft(e),n=e.pendingLanes,(a&4194090)!==0&&(n&42)!==0?e===zc?ns++:(ns=0,zc=e):ns=0,ss(0)}}function l0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Bn(t)))}function Ci(e){return e0(),t0(),a0(),n0()}function n0(){if(it!==5)return!1;var e=Za,t=Oc;Oc=0;var a=tr(nn),l=E.T,n=q.p;try{q.p=32>a?32:a,E.T=null,a=Mc,Mc=null;var c=Za,h=nn;if(it=0,ln=Za=null,nn=0,(je&6)!==0)throw Error(r(331));var m=je;if(je|=4,qf(c.current),Bf(c,c.current,h,a),je=m,ss(0,!1),ye&&typeof ye.onPostCommitFiberRoot=="function")try{ye.onPostCommitFiberRoot(ne,c)}catch{}return!0}finally{q.p=n,E.T=l,l0(e,t)}}function s0(e,t,a){t=Ot(a,t),t=fc(e.stateNode,t,2),e=Ma(e,t,2),e!==null&&(Nn(e,2),Ft(e))}function ze(e,t,a){if(e.tag===3)s0(e,e,a);else for(;t!==null;){if(t.tag===3){s0(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ga===null||!Ga.has(l))){e=Ot(a,e),a=uf(2),l=Ma(t,a,2),l!==null&&(of(a,l,t,e),Nn(l,2),Ft(l));break}}t=t.return}}function Bc(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new K2;var n=new Set;l.set(t,n)}else n=l.get(t),n===void 0&&(n=new Set,l.set(t,n));n.has(a)||(Tc=!0,n.add(a),e=W2.bind(null,e,t,a),t.then(e,e))}function W2(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,He===e&&(xe&a)===a&&(ke===4||ke===3&&(xe&62914560)===xe&&300>jt()-wc?(je&2)===0&&sn(e,0):jc|=a,an===xe&&(an=0)),Ft(e)}function i0(e,t){t===0&&(t=eo()),e=ql(e,t),e!==null&&(Nn(e,t),Ft(e))}function F2(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),i0(e,a)}function eg(e,t){var a=0;switch(e.tag){case 13:var l=e.stateNode,n=e.memoizedState;n!==null&&(a=n.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(t),i0(e,a)}function tg(e,t){return Sn(e,t)}var Ni=null,cn=null,Uc=!1,Ai=!1,Vc=!1,bl=0;function Ft(e){e!==cn&&e.next===null&&(cn===null?Ni=cn=e:cn=cn.next=e),Ai=!0,Uc||(Uc=!0,lg())}function ss(e,t){if(!Vc&&Ai){Vc=!0;do for(var a=!1,l=Ni;l!==null;){if(e!==0){var n=l.pendingLanes;if(n===0)var c=0;else{var h=l.suspendedLanes,m=l.pingedLanes;c=(1<<31-Le(42|e)+1)-1,c&=n&~(h&~m),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(a=!0,o0(l,c))}else c=xe,c=tl(l,l===He?c:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(c&3)===0||al(l,c)||(a=!0,o0(l,c));l=l.next}while(a);Vc=!1}}function ag(){r0()}function r0(){Ai=Uc=!1;var e=0;bl!==0&&(dg()&&(e=bl),bl=0);for(var t=jt(),a=null,l=Ni;l!==null;){var n=l.next,c=c0(l,t);c===0?(l.next=null,a===null?Ni=n:a.next=n,n===null&&(cn=a)):(a=l,(e!==0||(c&3)!==0)&&(Ai=!0)),l=n}ss(e)}function c0(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,n=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var h=31-Le(c),m=1<<h,b=n[h];b===-1?((m&a)===0||(m&l)!==0)&&(n[h]=js(m,t)):b<=t&&(e.expiredLanes|=m),c&=~m}if(t=He,a=xe,a=tl(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===t&&(De===2||De===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&El(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||al(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(l!==null&&El(l),tr(a)){case 2:case 8:a=S;break;case 32:a=D;break;case 268435456:a=ee;break;default:a=D}return l=u0.bind(null,e),a=Sn(a,l),e.callbackPriority=t,e.callbackNode=a,t}return l!==null&&l!==null&&El(l),e.callbackPriority=2,e.callbackNode=null,2}function u0(e,t){if(it!==0&&it!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Ci()&&e.callbackNode!==a)return null;var l=xe;return l=tl(e,e===He?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Xf(e,l,t),c0(e,jt()),e.callbackNode!=null&&e.callbackNode===a?u0.bind(null,e):null)}function o0(e,t){if(Ci())return null;Xf(e,t,!0)}function lg(){hg(function(){(je&6)!==0?Sn(Cn,ag):r0()})}function qc(){return bl===0&&(bl=Fu()),bl}function d0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:zs(""+e)}function f0(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function ng(e,t,a,l,n){if(t==="submit"&&a&&a.stateNode===n){var c=d0((n[mt]||null).action),h=l.submitter;h&&(t=(t=h[mt]||null)?d0(t.formAction):h.getAttribute("formAction"),t!==null&&(c=t,h=null));var m=new Bs("action","action",null,l,n);e.push({event:m,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(bl!==0){var b=h?f0(n,h):new FormData(n);rc(a,{pending:!0,data:b,method:n.method,action:c},null,b)}}else typeof c=="function"&&(m.preventDefault(),b=h?f0(n,h):new FormData(n),rc(a,{pending:!0,data:b,method:n.method,action:c},c,b))},currentTarget:n}]})}}for(var Gc=0;Gc<_r.length;Gc++){var Zc=_r[Gc],sg=Zc.toLowerCase(),ig=Zc[0].toUpperCase()+Zc.slice(1);qt(sg,"on"+ig)}qt(ko,"onAnimationEnd"),qt(Xo,"onAnimationIteration"),qt(Yo,"onAnimationStart"),qt("dblclick","onDoubleClick"),qt("focusin","onFocus"),qt("focusout","onBlur"),qt(A2,"onTransitionRun"),qt(x2,"onTransitionStart"),qt(E2,"onTransitionCancel"),qt(Ko,"onTransitionEnd"),wl("onMouseEnter",["mouseout","mouseover"]),wl("onMouseLeave",["mouseout","mouseover"]),wl("onPointerEnter",["pointerout","pointerover"]),wl("onPointerLeave",["pointerout","pointerover"]),ll("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ll("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ll("onBeforeInput",["compositionend","keypress","textInput","paste"]),ll("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ll("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ll("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(is));function h0(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],n=l.event;l=l.listeners;e:{var c=void 0;if(t)for(var h=l.length-1;0<=h;h--){var m=l[h],b=m.instance,j=m.currentTarget;if(m=m.listener,b!==c&&n.isPropagationStopped())break e;c=m,n.currentTarget=j;try{c(n)}catch(M){oi(M)}n.currentTarget=null,c=b}else for(h=0;h<l.length;h++){if(m=l[h],b=m.instance,j=m.currentTarget,m=m.listener,b!==c&&n.isPropagationStopped())break e;c=m,n.currentTarget=j;try{c(n)}catch(M){oi(M)}n.currentTarget=null,c=b}}}}function Ce(e,t){var a=t[ar];a===void 0&&(a=t[ar]=new Set);var l=e+"__bubble";a.has(l)||(m0(t,e,2,!1),a.add(l))}function kc(e,t,a){var l=0;t&&(l|=4),m0(a,e,l,t)}var xi="_reactListening"+Math.random().toString(36).slice(2);function Xc(e){if(!e[xi]){e[xi]=!0,so.forEach(function(a){a!=="selectionchange"&&(rg.has(a)||kc(a,!1,e),kc(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xi]||(t[xi]=!0,kc("selectionchange",!1,t))}}function m0(e,t,a,l){switch(B0(t)){case 2:var n=zg;break;case 8:n=Lg;break;default:n=su}a=n.bind(null,t,a,e),n=void 0,!hr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),l?n!==void 0?e.addEventListener(t,a,{capture:!0,passive:n}):e.addEventListener(t,a,!0):n!==void 0?e.addEventListener(t,a,{passive:n}):e.addEventListener(t,a,!1)}function Yc(e,t,a,l,n){var c=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var h=l.tag;if(h===3||h===4){var m=l.stateNode.containerInfo;if(m===n)break;if(h===4)for(h=l.return;h!==null;){var b=h.tag;if((b===3||b===4)&&h.stateNode.containerInfo===n)return;h=h.return}for(;m!==null;){if(h=Tl(m),h===null)return;if(b=h.tag,b===5||b===6||b===26||b===27){l=c=h;continue e}m=m.parentNode}}l=l.return}So(function(){var j=c,M=dr(a),V=[];e:{var w=Qo.get(e);if(w!==void 0){var O=Bs,he=e;switch(e){case"keypress":if(Hs(a)===0)break e;case"keydown":case"keyup":O=t2;break;case"focusin":he="focus",O=vr;break;case"focusout":he="blur",O=vr;break;case"beforeblur":case"afterblur":O=vr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=Ao;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=Zm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=n2;break;case ko:case Xo:case Yo:O=Ym;break;case Ko:O=i2;break;case"scroll":case"scrollend":O=qm;break;case"wheel":O=c2;break;case"copy":case"cut":case"paste":O=Qm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Eo;break;case"toggle":case"beforetoggle":O=o2}var oe=(t&4)!==0,Me=!oe&&(e==="scroll"||e==="scrollend"),A=oe?w!==null?w+"Capture":null:w;oe=[];for(var C=j,R;C!==null;){var H=C;if(R=H.stateNode,H=H.tag,H!==5&&H!==26&&H!==27||R===null||A===null||(H=En(C,A),H!=null&&oe.push(rs(C,H,R))),Me)break;C=C.return}0<oe.length&&(w=new O(w,he,null,a,M),V.push({event:w,listeners:oe}))}}if((t&7)===0){e:{if(w=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",w&&a!==or&&(he=a.relatedTarget||a.fromElement)&&(Tl(he)||he[Rl]))break e;if((O||w)&&(w=M.window===M?M:(w=M.ownerDocument)?w.defaultView||w.parentWindow:window,O?(he=a.relatedTarget||a.toElement,O=j,he=he?Tl(he):null,he!==null&&(Me=f(he),oe=he.tag,he!==Me||oe!==5&&oe!==27&&oe!==6)&&(he=null)):(O=null,he=j),O!==he)){if(oe=Ao,H="onMouseLeave",A="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(oe=Eo,H="onPointerLeave",A="onPointerEnter",C="pointer"),Me=O==null?w:xn(O),R=he==null?w:xn(he),w=new oe(H,C+"leave",O,a,M),w.target=Me,w.relatedTarget=R,H=null,Tl(M)===j&&(oe=new oe(A,C+"enter",he,a,M),oe.target=R,oe.relatedTarget=Me,H=oe),Me=H,O&&he)t:{for(oe=O,A=he,C=0,R=oe;R;R=un(R))C++;for(R=0,H=A;H;H=un(H))R++;for(;0<C-R;)oe=un(oe),C--;for(;0<R-C;)A=un(A),R--;for(;C--;){if(oe===A||A!==null&&oe===A.alternate)break t;oe=un(oe),A=un(A)}oe=null}else oe=null;O!==null&&g0(V,w,O,oe,!1),he!==null&&Me!==null&&g0(V,Me,he,oe,!0)}}e:{if(w=j?xn(j):window,O=w.nodeName&&w.nodeName.toLowerCase(),O==="select"||O==="input"&&w.type==="file")var ae=Mo;else if(wo(w))if(zo)ae=S2;else{ae=p2;var be=v2}else O=w.nodeName,!O||O.toLowerCase()!=="input"||w.type!=="checkbox"&&w.type!=="radio"?j&&ur(j.elementType)&&(ae=Mo):ae=b2;if(ae&&(ae=ae(e,j))){Oo(V,ae,a,M);break e}be&&be(e,w,j),e==="focusout"&&j&&w.type==="number"&&j.memoizedProps.value!=null&&cr(w,"number",w.value)}switch(be=j?xn(j):window,e){case"focusin":(wo(be)||be.contentEditable==="true")&&(Bl=be,Ar=j,Mn=null);break;case"focusout":Mn=Ar=Bl=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,Go(V,a,M);break;case"selectionchange":if(N2)break;case"keydown":case"keyup":Go(V,a,M)}var ce;if(br)e:{switch(e){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else Il?jo(e,a)&&(de="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(de="onCompositionStart");de&&(_o&&a.locale!=="ko"&&(Il||de!=="onCompositionStart"?de==="onCompositionEnd"&&Il&&(ce=Co()):(ja=M,mr="value"in ja?ja.value:ja.textContent,Il=!0)),be=Ei(j,de),0<be.length&&(de=new xo(de,e,null,a,M),V.push({event:de,listeners:be}),ce?de.data=ce:(ce=Do(a),ce!==null&&(de.data=ce)))),(ce=f2?h2(e,a):m2(e,a))&&(de=Ei(j,"onBeforeInput"),0<de.length&&(be=new xo("onBeforeInput","beforeinput",null,a,M),V.push({event:be,listeners:de}),be.data=ce)),ng(V,e,j,a,M)}h0(V,t)})}function rs(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Ei(e,t){for(var a=t+"Capture",l=[];e!==null;){var n=e,c=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||c===null||(n=En(e,a),n!=null&&l.unshift(rs(e,n,c)),n=En(e,t),n!=null&&l.push(rs(e,n,c))),e.tag===3)return l;e=e.return}return[]}function un(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function g0(e,t,a,l,n){for(var c=t._reactName,h=[];a!==null&&a!==l;){var m=a,b=m.alternate,j=m.stateNode;if(m=m.tag,b!==null&&b===l)break;m!==5&&m!==26&&m!==27||j===null||(b=j,n?(j=En(a,c),j!=null&&h.unshift(rs(a,j,b))):n||(j=En(a,c),j!=null&&h.push(rs(a,j,b)))),a=a.return}h.length!==0&&e.push({event:t,listeners:h})}var cg=/\r\n?/g,ug=/\u0000|\uFFFD/g;function y0(e){return(typeof e=="string"?e:""+e).replace(cg,`
`).replace(ug,"")}function v0(e,t){return t=y0(t),y0(e)===t}function _i(){}function Oe(e,t,a,l,n,c){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||zl(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&zl(e,""+l);break;case"className":ws(e,"class",l);break;case"tabIndex":ws(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ws(e,a,l);break;case"style":po(e,l,c);break;case"data":if(t!=="object"){ws(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=zs(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(a==="formAction"?(t!=="input"&&Oe(e,t,"name",n.name,n,null),Oe(e,t,"formEncType",n.formEncType,n,null),Oe(e,t,"formMethod",n.formMethod,n,null),Oe(e,t,"formTarget",n.formTarget,n,null)):(Oe(e,t,"encType",n.encType,n,null),Oe(e,t,"method",n.method,n,null),Oe(e,t,"target",n.target,n,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=zs(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=_i);break;case"onScroll":l!=null&&Ce("scroll",e);break;case"onScrollEnd":l!=null&&Ce("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(n.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=zs(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Ce("beforetoggle",e),Ce("toggle",e),Ds(e,"popover",l);break;case"xlinkActuate":la(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":la(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":la(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":la(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":la(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":la(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":la(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":la(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":la(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ds(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Um.get(a)||a,Ds(e,a,l))}}function Kc(e,t,a,l,n,c){switch(a){case"style":po(e,l,c);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(n.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof l=="string"?zl(e,l):(typeof l=="number"||typeof l=="bigint")&&zl(e,""+l);break;case"onScroll":l!=null&&Ce("scroll",e);break;case"onScrollEnd":l!=null&&Ce("scrollend",e);break;case"onClick":l!=null&&(e.onclick=_i);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!io.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(n=a.endsWith("Capture"),t=a.slice(2,n?a.length-7:void 0),c=e[mt]||null,c=c!=null?c[a]:null,typeof c=="function"&&e.removeEventListener(t,c,n),typeof l=="function")){typeof c!="function"&&c!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,l,n);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Ds(e,a,l)}}}function rt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",e),Ce("load",e);var l=!1,n=!1,c;for(c in a)if(a.hasOwnProperty(c)){var h=a[c];if(h!=null)switch(c){case"src":l=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Oe(e,t,c,h,a,null)}}n&&Oe(e,t,"srcSet",a.srcSet,a,null),l&&Oe(e,t,"src",a.src,a,null);return;case"input":Ce("invalid",e);var m=c=h=n=null,b=null,j=null;for(l in a)if(a.hasOwnProperty(l)){var M=a[l];if(M!=null)switch(l){case"name":n=M;break;case"type":h=M;break;case"checked":b=M;break;case"defaultChecked":j=M;break;case"value":c=M;break;case"defaultValue":m=M;break;case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(137,t));break;default:Oe(e,t,l,M,a,null)}}mo(e,c,m,b,j,h,n,!1),Os(e);return;case"select":Ce("invalid",e),l=h=c=null;for(n in a)if(a.hasOwnProperty(n)&&(m=a[n],m!=null))switch(n){case"value":c=m;break;case"defaultValue":h=m;break;case"multiple":l=m;default:Oe(e,t,n,m,a,null)}t=c,a=h,e.multiple=!!l,t!=null?Ml(e,!!l,t,!1):a!=null&&Ml(e,!!l,a,!0);return;case"textarea":Ce("invalid",e),c=n=l=null;for(h in a)if(a.hasOwnProperty(h)&&(m=a[h],m!=null))switch(h){case"value":l=m;break;case"defaultValue":n=m;break;case"children":c=m;break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:Oe(e,t,h,m,a,null)}yo(e,l,n,c),Os(e);return;case"option":for(b in a)if(a.hasOwnProperty(b)&&(l=a[b],l!=null))switch(b){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Oe(e,t,b,l,a,null)}return;case"dialog":Ce("beforetoggle",e),Ce("toggle",e),Ce("cancel",e),Ce("close",e);break;case"iframe":case"object":Ce("load",e);break;case"video":case"audio":for(l=0;l<is.length;l++)Ce(is[l],e);break;case"image":Ce("error",e),Ce("load",e);break;case"details":Ce("toggle",e);break;case"embed":case"source":case"link":Ce("error",e),Ce("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(l=a[j],l!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Oe(e,t,j,l,a,null)}return;default:if(ur(t)){for(M in a)a.hasOwnProperty(M)&&(l=a[M],l!==void 0&&Kc(e,t,M,l,a,void 0));return}}for(m in a)a.hasOwnProperty(m)&&(l=a[m],l!=null&&Oe(e,t,m,l,a,null))}function og(e,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,c=null,h=null,m=null,b=null,j=null,M=null;for(O in a){var V=a[O];if(a.hasOwnProperty(O)&&V!=null)switch(O){case"checked":break;case"value":break;case"defaultValue":b=V;default:l.hasOwnProperty(O)||Oe(e,t,O,null,l,V)}}for(var w in l){var O=l[w];if(V=a[w],l.hasOwnProperty(w)&&(O!=null||V!=null))switch(w){case"type":c=O;break;case"name":n=O;break;case"checked":j=O;break;case"defaultChecked":M=O;break;case"value":h=O;break;case"defaultValue":m=O;break;case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(137,t));break;default:O!==V&&Oe(e,t,w,O,l,V)}}rr(e,h,m,b,j,M,c,n);return;case"select":O=h=m=w=null;for(c in a)if(b=a[c],a.hasOwnProperty(c)&&b!=null)switch(c){case"value":break;case"multiple":O=b;default:l.hasOwnProperty(c)||Oe(e,t,c,null,l,b)}for(n in l)if(c=l[n],b=a[n],l.hasOwnProperty(n)&&(c!=null||b!=null))switch(n){case"value":w=c;break;case"defaultValue":m=c;break;case"multiple":h=c;default:c!==b&&Oe(e,t,n,c,l,b)}t=m,a=h,l=O,w!=null?Ml(e,!!a,w,!1):!!l!=!!a&&(t!=null?Ml(e,!!a,t,!0):Ml(e,!!a,a?[]:"",!1));return;case"textarea":O=w=null;for(m in a)if(n=a[m],a.hasOwnProperty(m)&&n!=null&&!l.hasOwnProperty(m))switch(m){case"value":break;case"children":break;default:Oe(e,t,m,null,l,n)}for(h in l)if(n=l[h],c=a[h],l.hasOwnProperty(h)&&(n!=null||c!=null))switch(h){case"value":w=n;break;case"defaultValue":O=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(r(91));break;default:n!==c&&Oe(e,t,h,n,l,c)}go(e,w,O);return;case"option":for(var he in a)if(w=a[he],a.hasOwnProperty(he)&&w!=null&&!l.hasOwnProperty(he))switch(he){case"selected":e.selected=!1;break;default:Oe(e,t,he,null,l,w)}for(b in l)if(w=l[b],O=a[b],l.hasOwnProperty(b)&&w!==O&&(w!=null||O!=null))switch(b){case"selected":e.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:Oe(e,t,b,w,l,O)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var oe in a)w=a[oe],a.hasOwnProperty(oe)&&w!=null&&!l.hasOwnProperty(oe)&&Oe(e,t,oe,null,l,w);for(j in l)if(w=l[j],O=a[j],l.hasOwnProperty(j)&&w!==O&&(w!=null||O!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(137,t));break;default:Oe(e,t,j,w,l,O)}return;default:if(ur(t)){for(var Me in a)w=a[Me],a.hasOwnProperty(Me)&&w!==void 0&&!l.hasOwnProperty(Me)&&Kc(e,t,Me,void 0,l,w);for(M in l)w=l[M],O=a[M],!l.hasOwnProperty(M)||w===O||w===void 0&&O===void 0||Kc(e,t,M,w,l,O);return}}for(var A in a)w=a[A],a.hasOwnProperty(A)&&w!=null&&!l.hasOwnProperty(A)&&Oe(e,t,A,null,l,w);for(V in l)w=l[V],O=a[V],!l.hasOwnProperty(V)||w===O||w==null&&O==null||Oe(e,t,V,w,l,O)}var Qc=null,$c=null;function Ri(e){return e.nodeType===9?e:e.ownerDocument}function p0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function b0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Pc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jc=null;function dg(){var e=window.event;return e&&e.type==="popstate"?e===Jc?!1:(Jc=e,!0):(Jc=null,!1)}var S0=typeof setTimeout=="function"?setTimeout:void 0,fg=typeof clearTimeout=="function"?clearTimeout:void 0,C0=typeof Promise=="function"?Promise:void 0,hg=typeof queueMicrotask=="function"?queueMicrotask:typeof C0<"u"?function(e){return C0.resolve(null).then(e).catch(mg)}:S0;function mg(e){setTimeout(function(){throw e})}function Xa(e){return e==="head"}function N0(e,t){var a=t,l=0,n=0;do{var c=a.nextSibling;if(e.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(0<l&&8>l){a=l;var h=e.ownerDocument;if(a&1&&cs(h.documentElement),a&2&&cs(h.body),a&4)for(a=h.head,cs(a),h=a.firstChild;h;){var m=h.nextSibling,b=h.nodeName;h[An]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&h.rel.toLowerCase()==="stylesheet"||a.removeChild(h),h=m}}if(n===0){e.removeChild(c),ys(t);return}n--}else a==="$"||a==="$?"||a==="$!"?n++:l=a.charCodeAt(0)-48;else l=0;a=c}while(a);ys(t)}function Wc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Wc(a),lr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function gg(e,t,a,l){for(;e.nodeType===1;){var n=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[An])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var c=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=Zt(e.nextSibling),e===null)break}return null}function yg(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Zt(e.nextSibling),e===null))return null;return e}function Fc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function vg(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Zt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var eu=null;function A0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function x0(e,t,a){switch(t=Ri(a),e){case"html":if(e=t.documentElement,!e)throw Error(r(452));return e;case"head":if(e=t.head,!e)throw Error(r(453));return e;case"body":if(e=t.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function cs(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);lr(e)}var Bt=new Map,E0=new Set;function Ti(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var va=q.d;q.d={f:pg,r:bg,D:Sg,C:Cg,L:Ng,m:Ag,X:Eg,S:xg,M:_g};function pg(){var e=va.f(),t=bi();return e||t}function bg(e){var t=jl(e);t!==null&&t.tag===5&&t.type==="form"?kd(t):va.r(e)}var on=typeof document>"u"?null:document;function _0(e,t,a){var l=on;if(l&&typeof t=="string"&&t){var n=wt(t);n='link[rel="'+e+'"][href="'+n+'"]',typeof a=="string"&&(n+='[crossorigin="'+a+'"]'),E0.has(n)||(E0.add(n),e={rel:e,crossOrigin:a,href:t},l.querySelector(n)===null&&(t=l.createElement("link"),rt(t,"link",e),tt(t),l.head.appendChild(t)))}}function Sg(e){va.D(e),_0("dns-prefetch",e,null)}function Cg(e,t){va.C(e,t),_0("preconnect",e,t)}function Ng(e,t,a){va.L(e,t,a);var l=on;if(l&&e&&t){var n='link[rel="preload"][as="'+wt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(n+='[imagesrcset="'+wt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(n+='[imagesizes="'+wt(a.imageSizes)+'"]')):n+='[href="'+wt(e)+'"]';var c=n;switch(t){case"style":c=dn(e);break;case"script":c=fn(e)}Bt.has(c)||(e=N({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Bt.set(c,e),l.querySelector(n)!==null||t==="style"&&l.querySelector(us(c))||t==="script"&&l.querySelector(os(c))||(t=l.createElement("link"),rt(t,"link",e),tt(t),l.head.appendChild(t)))}}function Ag(e,t){va.m(e,t);var a=on;if(a&&e){var l=t&&typeof t.as=="string"?t.as:"script",n='link[rel="modulepreload"][as="'+wt(l)+'"][href="'+wt(e)+'"]',c=n;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=fn(e)}if(!Bt.has(c)&&(e=N({rel:"modulepreload",href:e},t),Bt.set(c,e),a.querySelector(n)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(os(c)))return}l=a.createElement("link"),rt(l,"link",e),tt(l),a.head.appendChild(l)}}}function xg(e,t,a){va.S(e,t,a);var l=on;if(l&&e){var n=Dl(l).hoistableStyles,c=dn(e);t=t||"default";var h=n.get(c);if(!h){var m={loading:0,preload:null};if(h=l.querySelector(us(c)))m.loading=5;else{e=N({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Bt.get(c))&&tu(e,a);var b=h=l.createElement("link");tt(b),rt(b,"link",e),b._p=new Promise(function(j,M){b.onload=j,b.onerror=M}),b.addEventListener("load",function(){m.loading|=1}),b.addEventListener("error",function(){m.loading|=2}),m.loading|=4,ji(h,t,l)}h={type:"stylesheet",instance:h,count:1,state:m},n.set(c,h)}}}function Eg(e,t){va.X(e,t);var a=on;if(a&&e){var l=Dl(a).hoistableScripts,n=fn(e),c=l.get(n);c||(c=a.querySelector(os(n)),c||(e=N({src:e,async:!0},t),(t=Bt.get(n))&&au(e,t),c=a.createElement("script"),tt(c),rt(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},l.set(n,c))}}function _g(e,t){va.M(e,t);var a=on;if(a&&e){var l=Dl(a).hoistableScripts,n=fn(e),c=l.get(n);c||(c=a.querySelector(os(n)),c||(e=N({src:e,async:!0,type:"module"},t),(t=Bt.get(n))&&au(e,t),c=a.createElement("script"),tt(c),rt(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},l.set(n,c))}}function R0(e,t,a,l){var n=(n=Yt.current)?Ti(n):null;if(!n)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=dn(a.href),a=Dl(n).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=dn(a.href);var c=Dl(n).hoistableStyles,h=c.get(e);if(h||(n=n.ownerDocument||n,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,h),(c=n.querySelector(us(e)))&&!c._p&&(h.instance=c,h.state.loading=5),Bt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Bt.set(e,a),c||Rg(n,e,a,h.state))),t&&l===null)throw Error(r(528,""));return h}if(t&&l!==null)throw Error(r(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=fn(a),a=Dl(n).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function dn(e){return'href="'+wt(e)+'"'}function us(e){return'link[rel="stylesheet"]['+e+"]"}function T0(e){return N({},e,{"data-precedence":e.precedence,precedence:null})}function Rg(e,t,a,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),rt(t,"link",a),tt(t),e.head.appendChild(t))}function fn(e){return'[src="'+wt(e)+'"]'}function os(e){return"script[async]"+e}function j0(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+wt(a.href)+'"]');if(l)return t.instance=l,tt(l),l;var n=N({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),tt(l),rt(l,"style",n),ji(l,a.precedence,e),t.instance=l;case"stylesheet":n=dn(a.href);var c=e.querySelector(us(n));if(c)return t.state.loading|=4,t.instance=c,tt(c),c;l=T0(a),(n=Bt.get(n))&&tu(l,n),c=(e.ownerDocument||e).createElement("link"),tt(c);var h=c;return h._p=new Promise(function(m,b){h.onload=m,h.onerror=b}),rt(c,"link",l),t.state.loading|=4,ji(c,a.precedence,e),t.instance=c;case"script":return c=fn(a.src),(n=e.querySelector(os(c)))?(t.instance=n,tt(n),n):(l=a,(n=Bt.get(c))&&(l=N({},a),au(l,n)),e=e.ownerDocument||e,n=e.createElement("script"),tt(n),rt(n,"link",l),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(r(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,ji(l,a.precedence,e));return t.instance}function ji(e,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=l.length?l[l.length-1]:null,c=n,h=0;h<l.length;h++){var m=l[h];if(m.dataset.precedence===t)c=m;else if(c!==n)break}c?c.parentNode.insertBefore(e,c.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function tu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function au(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Di=null;function D0(e,t,a){if(Di===null){var l=new Map,n=Di=new Map;n.set(a,l)}else n=Di,l=n.get(a),l||(l=new Map,n.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),n=0;n<a.length;n++){var c=a[n];if(!(c[An]||c[ut]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var h=c.getAttribute(t)||"";h=e+h;var m=l.get(h);m?m.push(c):l.set(h,[c])}}return l}function w0(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Tg(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function O0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var ds=null;function jg(){}function Dg(e,t,a){if(ds===null)throw Error(r(475));var l=ds;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var n=dn(a.href),c=e.querySelector(us(n));if(c){e=c._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=wi.bind(l),e.then(l,l)),t.state.loading|=4,t.instance=c,tt(c);return}c=e.ownerDocument||e,a=T0(a),(n=Bt.get(n))&&tu(a,n),c=c.createElement("link"),tt(c);var h=c;h._p=new Promise(function(m,b){h.onload=m,h.onerror=b}),rt(c,"link",a),t.instance=c}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(l.count++,t=wi.bind(l),e.addEventListener("load",t),e.addEventListener("error",t))}}function wg(){if(ds===null)throw Error(r(475));var e=ds;return e.stylesheets&&e.count===0&&lu(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&lu(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function wi(){if(this.count--,this.count===0){if(this.stylesheets)lu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Oi=null;function lu(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Oi=new Map,t.forEach(Og,e),Oi=null,wi.call(e))}function Og(e,t){if(!(t.state.loading&4)){var a=Oi.get(e);if(a)var l=a.get(null);else{a=new Map,Oi.set(e,a);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<n.length;c++){var h=n[c];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(a.set(h.dataset.precedence,h),l=h)}l&&a.set(null,l)}n=t.instance,h=n.getAttribute("data-precedence"),c=a.get(h)||l,c===l&&a.set(null,n),a.set(h,n),this.count++,l=wi.bind(this),n.addEventListener("load",l),n.addEventListener("error",l),c?c.parentNode.insertBefore(n,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),t.state.loading|=4}}var fs={$$typeof:te,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function Mg(e,t,a,l,n,c,h,m){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fi(0),this.hiddenUpdates=Fi(null),this.identifierPrefix=l,this.onUncaughtError=n,this.onCaughtError=c,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=m,this.incompleteTransitions=new Map}function M0(e,t,a,l,n,c,h,m,b,j,M,V){return e=new Mg(e,t,a,h,m,b,j,V),t=1,c===!0&&(t|=24),c=Nt(3,null,null,t),e.current=c,c.stateNode=e,t=Br(),t.refCount++,e.pooledCache=t,t.refCount++,c.memoizedState={element:l,isDehydrated:a,cache:t},Gr(c),e}function z0(e){return e?(e=Gl,e):Gl}function L0(e,t,a,l,n,c){n=z0(n),l.context===null?l.context=n:l.pendingContext=n,l=Oa(t),l.payload={element:a},c=c===void 0?null:c,c!==null&&(l.callback=c),a=Ma(e,l,t),a!==null&&(Rt(a,e,t),Gn(a,e,t))}function H0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function nu(e,t){H0(e,t),(e=e.alternate)&&H0(e,t)}function I0(e){if(e.tag===13){var t=ql(e,67108864);t!==null&&Rt(t,e,67108864),nu(e,67108864)}}var Mi=!0;function zg(e,t,a,l){var n=E.T;E.T=null;var c=q.p;try{q.p=2,su(e,t,a,l)}finally{q.p=c,E.T=n}}function Lg(e,t,a,l){var n=E.T;E.T=null;var c=q.p;try{q.p=8,su(e,t,a,l)}finally{q.p=c,E.T=n}}function su(e,t,a,l){if(Mi){var n=iu(l);if(n===null)Yc(e,t,l,zi,a),U0(e,l);else if(Ig(n,e,t,a,l))l.stopPropagation();else if(U0(e,l),t&4&&-1<Hg.indexOf(e)){for(;n!==null;){var c=jl(n);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var h=aa(c.pendingLanes);if(h!==0){var m=c;for(m.pendingLanes|=2,m.entangledLanes|=2;h;){var b=1<<31-Le(h);m.entanglements[1]|=b,h&=~b}Ft(c),(je&6)===0&&(vi=jt()+500,ss(0))}}break;case 13:m=ql(c,2),m!==null&&Rt(m,c,2),bi(),nu(c,2)}if(c=iu(l),c===null&&Yc(e,t,l,zi,a),c===n)break;n=c}n!==null&&l.stopPropagation()}else Yc(e,t,l,null,a)}}function iu(e){return e=dr(e),ru(e)}var zi=null;function ru(e){if(zi=null,e=Tl(e),e!==null){var t=f(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=g(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return zi=e,null}function B0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wu()){case Cn:return 2;case S:return 8;case D:case z:return 32;case ee:return 268435456;default:return 32}default:return 32}}var cu=!1,Ya=null,Ka=null,Qa=null,hs=new Map,ms=new Map,$a=[],Hg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U0(e,t){switch(e){case"focusin":case"focusout":Ya=null;break;case"dragenter":case"dragleave":Ka=null;break;case"mouseover":case"mouseout":Qa=null;break;case"pointerover":case"pointerout":hs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ms.delete(t.pointerId)}}function gs(e,t,a,l,n,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:c,targetContainers:[n]},t!==null&&(t=jl(t),t!==null&&I0(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function Ig(e,t,a,l,n){switch(t){case"focusin":return Ya=gs(Ya,e,t,a,l,n),!0;case"dragenter":return Ka=gs(Ka,e,t,a,l,n),!0;case"mouseover":return Qa=gs(Qa,e,t,a,l,n),!0;case"pointerover":var c=n.pointerId;return hs.set(c,gs(hs.get(c)||null,e,t,a,l,n)),!0;case"gotpointercapture":return c=n.pointerId,ms.set(c,gs(ms.get(c)||null,e,t,a,l,n)),!0}return!1}function V0(e){var t=Tl(e.target);if(t!==null){var a=f(t);if(a!==null){if(t=a.tag,t===13){if(t=g(a),t!==null){e.blockedOn=t,Dm(e.priority,function(){if(a.tag===13){var l=_t();l=er(l);var n=ql(a,l);n!==null&&Rt(n,a,l),nu(a,l)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Li(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=iu(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);or=l,a.target.dispatchEvent(l),or=null}else return t=jl(a),t!==null&&I0(t),e.blockedOn=a,!1;t.shift()}return!0}function q0(e,t,a){Li(e)&&a.delete(t)}function Bg(){cu=!1,Ya!==null&&Li(Ya)&&(Ya=null),Ka!==null&&Li(Ka)&&(Ka=null),Qa!==null&&Li(Qa)&&(Qa=null),hs.forEach(q0),ms.forEach(q0)}function Hi(e,t){e.blockedOn===t&&(e.blockedOn=null,cu||(cu=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Bg)))}var Ii=null;function G0(e){Ii!==e&&(Ii=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){Ii===e&&(Ii=null);for(var t=0;t<e.length;t+=3){var a=e[t],l=e[t+1],n=e[t+2];if(typeof l!="function"){if(ru(l||a)===null)continue;break}var c=jl(a);c!==null&&(e.splice(t,3),t-=3,rc(c,{pending:!0,data:n,method:a.method,action:l},l,n))}}))}function ys(e){function t(b){return Hi(b,e)}Ya!==null&&Hi(Ya,e),Ka!==null&&Hi(Ka,e),Qa!==null&&Hi(Qa,e),hs.forEach(t),ms.forEach(t);for(var a=0;a<$a.length;a++){var l=$a[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<$a.length&&(a=$a[0],a.blockedOn===null);)V0(a),a.blockedOn===null&&$a.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var n=a[l],c=a[l+1],h=n[mt]||null;if(typeof c=="function")h||G0(a);else if(h){var m=null;if(c&&c.hasAttribute("formAction")){if(n=c,h=c[mt]||null)m=h.formAction;else if(ru(n)!==null)continue}else m=h.action;typeof m=="function"?a[l+1]=m:(a.splice(l,3),l-=3),G0(a)}}}function uu(e){this._internalRoot=e}Bi.prototype.render=uu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));var a=t.current,l=_t();L0(a,l,e,t,null,null)},Bi.prototype.unmount=uu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;L0(e.current,2,null,e,null,null),bi(),t[Rl]=null}};function Bi(e){this._internalRoot=e}Bi.prototype.unstable_scheduleHydration=function(e){if(e){var t=lo();e={blockedOn:null,target:e,priority:t};for(var a=0;a<$a.length&&t!==0&&t<$a[a].priority;a++);$a.splice(a,0,e),a===0&&V0(e)}};var Z0=s.version;if(Z0!=="19.1.0")throw Error(r(527,Z0,"19.1.0"));q.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=T(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var Ug={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:E,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ui=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ui.isDisabled&&Ui.supportsFiber)try{ne=Ui.inject(Ug),ye=Ui}catch{}}return ps.createRoot=function(e,t){if(!d(e))throw Error(r(299));var a=!1,l="",n=nf,c=sf,h=rf,m=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(n=t.onUncaughtError),t.onCaughtError!==void 0&&(c=t.onCaughtError),t.onRecoverableError!==void 0&&(h=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(m=t.unstable_transitionCallbacks)),t=M0(e,1,!1,null,null,a,l,n,c,h,m,null),e[Rl]=t.current,Xc(e),new uu(t)},ps.hydrateRoot=function(e,t,a){if(!d(e))throw Error(r(299));var l=!1,n="",c=nf,h=sf,m=rf,b=null,j=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(n=a.identifierPrefix),a.onUncaughtError!==void 0&&(c=a.onUncaughtError),a.onCaughtError!==void 0&&(h=a.onCaughtError),a.onRecoverableError!==void 0&&(m=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(b=a.unstable_transitionCallbacks),a.formState!==void 0&&(j=a.formState)),t=M0(e,1,!0,t,a??null,l,n,c,h,m,b,j),t.context=z0(null),a=t.current,l=_t(),l=er(l),n=Oa(l),n.callback=null,Ma(a,n,l),a=l,t.current.lanes=a,Nn(t,a),Ft(t),e[Rl]=t.current,Xc(e),new Bi(t)},ps.version="19.1.0",ps}var $0;function Wg(){if($0)return du.exports;$0=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(s){console.error(s)}}return o(),du.exports=Jg(),du.exports}var Fg=Wg();const Ch=I.createContext(null),Nl=()=>{const o=I.useContext(Ch);if(!o)throw new Error("useApp must be used within an AppProvider");return o},ey=({children:o})=>{const[s,i]=I.useState("start"),[r,d]=I.useState(""),[f,g]=I.useState(null),[v,T]=I.useState(!1),[x,N]=I.useState(null);I.useEffect(()=>{const Z=localStorage.getItem("playerName");Z&&d(Z);const J=localStorage.getItem("currentRoomId");J&&g(J)},[]),I.useEffect(()=>{r?localStorage.setItem("playerName",r):localStorage.removeItem("playerName")},[r]),I.useEffect(()=>{f?localStorage.setItem("currentRoomId",f):localStorage.removeItem("currentRoomId")},[f]);const p=async(Z,J={})=>{T(!0),N(null);try{switch(Z){case"start":g(null);break;case"lobby":if(!r)throw new Error("Player name required for lobby");break;case"room":if(!r||!J.roomId)throw new Error("Player name and room ID required for room");g(J.roomId);break;case"game":if(!r||!f)throw new Error("Player name and room ID required for game");break;default:throw new Error(`Unknown scene: ${Z}`)}i(Z)}catch(ge){console.error("Scene navigation failed:",ge),N(ge)}finally{T(!1)}},G={currentScene:s,playerName:r,currentRoomId:f,isTransitioning:v,appError:x,navigateToScene:p,goToStart:()=>p("start"),goToLobby:()=>p("lobby"),goToRoom:Z=>p("room",{roomId:Z}),goToGame:()=>p("game"),updatePlayerName:Z=>{const J=Z.trim();if(J.length<2)throw new Error("Player name must be at least 2 characters");if(J.length>20)throw new Error("Player name must be less than 20 characters");d(J)},joinRoom:async Z=>{if(!r)throw new Error("Player name required to join room");await p("room",{roomId:Z})},leaveRoom:()=>{g(null),p("lobby")},clearError:()=>{N(null)},canNavigateToScene:Z=>{switch(Z){case"start":return!0;case"lobby":return!!r;case"room":return!!r&&!!f;case"game":return!!r&&!!f;default:return!1}}};return u.jsx(Ch.Provider,{value:G,children:o})},Tt={HEARTBEAT_INTERVAL:3e4,CONNECTION_TIMEOUT:1e4,RECOVERY_TIMEOUT:6e4,ERROR_WINDOW_MS:3e5,DEALING_ANIMATION_DURATION:3500,TURN_FLIP_DELAY:800,TURN_RESULTS_REVEAL_DELAY:200,CREATE_ROOM_DELAY:100,REFRESH_ANIMATION_DURATION:1e3,CHECKMARK_DISPLAY_DURATION:500},pu={MAX_RECONNECT_ATTEMPTS:10,MESSAGE_QUEUE_LIMIT:1e3,EVENT_BUFFER_SIZE:1e3},P0={RECONNECT_BACKOFF:[1e3,2e3,4e3,8e3,16e3],get WEBSOCKET_BASE_URL(){if(typeof window<"u"){const o=window.location.protocol==="https:"?"wss:":"ws:",s=window.location.host;return`${o}//${s}/ws`}return"ws://localhost:5050/ws"}},ba=class ba extends EventTarget{constructor(){if(super(),this.connections=new Map,this.messageQueues=new Map,this.sequenceNumbers=new Map,this.heartbeatTimers=new Map,this.reconnectStates=new Map,this.isDestroyed=!1,ba.instance)throw new Error("NetworkService is a singleton. Use NetworkService.getInstance()");this.config={baseUrl:P0.WEBSOCKET_BASE_URL,heartbeatInterval:Tt.HEARTBEAT_INTERVAL,maxReconnectAttempts:pu.MAX_RECONNECT_ATTEMPTS,reconnectBackoff:[...P0.RECONNECT_BACKOFF],messageQueueLimit:pu.MESSAGE_QUEUE_LIMIT,connectionTimeout:Tt.CONNECTION_TIMEOUT}}static getInstance(){return ba.instance||(ba.instance=new ba),ba.instance}async connectToRoom(s,i){if(this.isDestroyed)throw new Error("NetworkService has been destroyed");if(!s)throw new Error("Room ID is required");this.connections.has(s)&&await this.disconnectFromRoom(s);const r=`${this.config.baseUrl}/${s}`;try{const d=await this.createConnection(r,s);this.connections.set(s,{websocket:d,roomId:s,url:r,status:"connected",connectedAt:Date.now(),messagesSent:0,messagesReceived:0,lastActivity:Date.now(),latency:null,playerName:i?.playerName}),this.messageQueues.set(s,[]),this.sequenceNumbers.set(s,0),this.reconnectStates.set(s,{attempts:0,isReconnecting:!1,abortController:null}),this.startHeartbeat(s);const f=this.connections.get(s);return this.send(s,"client_ready",{room_id:s,player_name:f?.playerName,is_reconnection:f?.isReconnection||!1}),this.processQueuedMessages(s),f&&(f.isReconnection=!1),this.dispatchEvent(new CustomEvent("connected",{detail:{roomId:s,url:r,timestamp:Date.now()}})),console.log(`🌐 NetworkService: Connected to room ${s}`),d}catch(d){const f=d instanceof Error?d.message:"Unknown error";throw this.dispatchEvent(new CustomEvent("connectionFailed",{detail:{roomId:s,timestamp:Date.now()}})),new Error(`Failed to connect to ${s}: ${f}`)}}async disconnectFromRoom(s,i=!0){const r=this.connections.get(s);r&&(this.stopReconnection(s),this.stopHeartbeat(s),r.websocket&&r.websocket.close(1e3,"Client disconnect"),this.connections.delete(s),i&&(this.messageQueues.delete(s),this.sequenceNumbers.delete(s)),this.reconnectStates.delete(s),this.dispatchEvent(new CustomEvent("disconnected",{detail:{roomId:s,intentional:i,timestamp:Date.now()}})),console.log(`🌐 NetworkService: Disconnected from room ${s}`))}send(s,i,r={}){if(this.isDestroyed)return console.warn("Cannot send message: NetworkService destroyed"),!1;const d=this.getNextSequenceNumber(s),f={event:i,data:r,sequence:d,timestamp:Date.now(),id:crypto.randomUUID()},g=this.connections.get(s);if(g?.websocket?.readyState===WebSocket.OPEN)try{return g.websocket.send(JSON.stringify(f)),g.messagesSent++,g.lastActivity=Date.now(),this.dispatchEvent(new CustomEvent("messageSent",{detail:{roomId:s,message:f,timestamp:Date.now()}})),!0}catch(v){return console.error(`Failed to send message to ${s}:`,v),this.queueMessage(s,f),!1}else return this.queueMessage(s,f),console.log(`📤 Queued message for ${s}: ${i} (${this.getQueueSize(s)} queued)`),!1}getConnectionStatus(s){const i=this.connections.get(s),r=this.reconnectStates.get(s),d=this.getQueueSize(s);return i?{roomId:s,status:i.status,connected:i.websocket?.readyState===WebSocket.OPEN,connectedAt:i.connectedAt,uptime:Date.now()-i.connectedAt,messagesSent:i.messagesSent,messagesReceived:i.messagesReceived,lastActivity:i.lastActivity,latency:i.latency,queueSize:d,reconnecting:r?.isReconnecting||!1,reconnectAttempts:r?.attempts||0}:{roomId:s,status:"disconnected",connected:!1,queueSize:d,reconnecting:r?.isReconnecting||!1}}getStatus(){const s={};for(const i of this.connections.keys())s[i]=this.getConnectionStatus(i);return{isDestroyed:this.isDestroyed,activeConnections:this.connections.size,totalQueuedMessages:Array.from(this.messageQueues.values()).reduce((i,r)=>i+r.length,0),rooms:s}}destroy(){this.isDestroyed=!0;const s=Array.from(this.connections.keys());for(const i of s)this.disconnectFromRoom(i,!0);this.connections.clear(),this.messageQueues.clear(),this.sequenceNumbers.clear(),this.heartbeatTimers.clear(),this.reconnectStates.clear(),ba.instance=null,console.log("🌐 NetworkService: Destroyed")}async createConnection(s,i){return new Promise((r,d)=>{const f=new WebSocket(s),g=setTimeout(()=>{f.close(),d(new Error(`Connection timeout to ${s}`))},this.config.connectionTimeout);f.onopen=()=>{clearTimeout(g),this.handleConnectionOpen(i),r(f)},f.onmessage=v=>{this.handleConnectionMessage(v,i)},f.onclose=v=>{clearTimeout(g),this.handleConnectionClose(v,i)},f.onerror=()=>{clearTimeout(g),this.handleConnectionError(i),d(new Error(`WebSocket connection failed to ${s}`))}})}handleConnectionOpen(s){console.log(`🔗 Connection opened to room ${s}`)}handleConnectionMessage(s,i){const r=this.connections.get(i);if(r)try{const d=JSON.parse(s.data);if(r.messagesReceived++,r.lastActivity=Date.now(),d.event==="pong"&&d.data?.timestamp){r.latency=Date.now()-d.data.timestamp;return}this.dispatchEvent(new CustomEvent(d.event,{detail:{roomId:i,data:d.data,message:d,timestamp:Date.now()}})),this.dispatchEvent(new CustomEvent("message",{detail:{roomId:i,message:d,timestamp:Date.now()}}))}catch(d){console.error(`Failed to parse message from ${i}:`,d),this.dispatchEvent(new CustomEvent("messageError",{detail:{roomId:i,error:d instanceof Error?d.message:"Parse error",timestamp:Date.now()}}))}}handleConnectionClose(s,i){const r=this.connections.get(i);if(!r)return;const d=r.status==="connected";r.status="disconnected",this.stopHeartbeat(i),this.dispatchEvent(new CustomEvent("disconnected",{detail:{roomId:i,code:s.code,reason:s.reason,wasClean:s.wasClean,intentional:s.code===1e3,timestamp:Date.now()}})),d&&s.code!==1e3&&!this.isDestroyed&&this.attemptReconnection(i)}handleConnectionError(s){console.error(`WebSocket error for room ${s}`),this.dispatchEvent(new CustomEvent("connectionError",{detail:{roomId:s,error:"Connection error",timestamp:Date.now()}}))}async attemptReconnection(s){const i=this.reconnectStates.get(s);if(!(!i||i.isReconnecting)){if(i.attempts>=this.config.maxReconnectAttempts){this.dispatchEvent(new CustomEvent("reconnectionFailed",{detail:{roomId:s,attempts:i.attempts,reason:"Max attempts reached",timestamp:Date.now()}}));return}i.isReconnecting=!0,i.abortController=new AbortController,this.dispatchEvent(new CustomEvent("reconnecting",{detail:{roomId:s,attempt:i.attempts+1,timestamp:Date.now()}}));try{const r=this.calculateReconnectDelay(i.attempts);if(console.log(`🔄 Reconnecting to ${s} in ${r}ms (attempt ${i.attempts+1})`),await new Promise((g,v)=>{const T=setTimeout(g,r);i.abortController.signal.addEventListener("abort",()=>{clearTimeout(T),v(new Error("Reconnection aborted"))})}),i.abortController.signal.aborted)return;const d=this.connections.get(s),f=d?.playerName;i.attempts++,d&&(d.isReconnection=!0),await this.connectToRoom(s,{playerName:f}),i.attempts=0,i.isReconnecting=!1,this.dispatchEvent(new CustomEvent("reconnected",{detail:{roomId:s,timestamp:Date.now()}}))}catch(r){i.abortController.signal.aborted||(console.error(`Reconnection attempt ${i.attempts} failed for ${s}:`,r),i.attempts<this.config.maxReconnectAttempts?setTimeout(()=>this.attemptReconnection(s),1e3):(i.isReconnecting=!1,this.dispatchEvent(new CustomEvent("reconnectionFailed",{detail:{roomId:s,attempts:i.attempts,error:r instanceof Error?r.message:"Unknown error",timestamp:Date.now()}}))))}}}calculateReconnectDelay(s){const i=Math.min(s,this.config.reconnectBackoff.length-1),r=this.config.reconnectBackoff[i],d=r*.1;return r+(Math.random()*2-1)*d}startHeartbeat(s){this.stopHeartbeat(s);const i=setInterval(()=>{this.connections.get(s)?.websocket?.readyState===WebSocket.OPEN?this.send(s,"ping",{timestamp:Date.now()}):this.stopHeartbeat(s)},this.config.heartbeatInterval);this.heartbeatTimers.set(s,i)}stopHeartbeat(s){const i=this.heartbeatTimers.get(s);i&&(clearInterval(i),this.heartbeatTimers.delete(s))}stopReconnection(s){const i=this.reconnectStates.get(s);i?.abortController&&(i.abortController.abort(),i.isReconnecting=!1)}queueMessage(s,i){let r=this.messageQueues.get(s);r||(r=[],this.messageQueues.set(s,r)),r.length>=this.config.messageQueueLimit&&(r.shift(),console.warn(`Message queue full for ${s}, dropping oldest message`)),r.push(i),this.dispatchEvent(new CustomEvent("messageQueued",{detail:{roomId:s,message:i,timestamp:Date.now()}}))}processQueuedMessages(s){const i=this.messageQueues.get(s);if(!i||i.length===0)return;const r=this.connections.get(s);if(!r?.websocket||r.websocket.readyState!==WebSocket.OPEN)return;console.log(`📤 Processing ${i.length} queued messages for ${s}`);const d=[...i];i.length=0;for(const f of d)try{r.websocket.send(JSON.stringify(f)),r.messagesSent++}catch(g){console.error(`Failed to send queued message to ${s}:`,g),i.push(f)}}getNextSequenceNumber(s){const r=(this.sequenceNumbers.get(s)||0)+1;return this.sequenceNumbers.set(s,r),r}getQueueSize(s){return this.messageQueues.get(s)?.length||0}};ba.instance=null;let bu=ba;const re=bu.getInstance(),ty="modulepreload",ay=function(o){return"/"+o},J0={},ly=function(s,i,r){let d=Promise.resolve();if(i&&i.length>0){let T=function(x){return Promise.all(x.map(N=>Promise.resolve(N).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),v=g?.nonce||g?.getAttribute("nonce");d=T(i.map(x=>{if(x=ay(x),x in J0)return;J0[x]=!0;const N=x.endsWith(".css"),p=N?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${p}`))return;const _=document.createElement("link");if(_.rel=N?"stylesheet":ty,N||(_.as="script"),_.crossOrigin="",_.href=x,v&&_.setAttribute("nonce",v),document.head.appendChild(_),N)return new Promise((B,X)=>{_.addEventListener("load",B),_.addEventListener("error",()=>X(new Error(`Unable to preload CSS for ${x}`)))})}))}function f(g){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=g,window.dispatchEvent(v),!v.defaultPrevented)throw g}return d.then(g=>{for(const v of g||[])v.status==="rejected"&&f(v.reason);return s().catch(f)})},_u="liap_tui_session",ny=24;function Su(o,s,i,r=null){const d={roomId:o,playerName:s,sessionId:i,createdAt:Date.now(),lastActivity:Date.now(),gamePhase:r};try{localStorage.setItem(_u,JSON.stringify(d)),console.log("Session stored:",{roomId:o,playerName:s})}catch(f){console.error("Failed to store session:",f)}}function xs(){try{const o=localStorage.getItem(_u);if(!o)return null;const s=JSON.parse(o),i=ny*60*60*1e3;return Date.now()-s.lastActivity>i?(ki(),null):s}catch(o){return console.error("Failed to get session:",o),null}}function ki(){try{localStorage.removeItem(_u),console.log("Session cleared")}catch(o){console.error("Failed to clear session:",o)}}function Nh(){return xs()!==null}const sy=Object.freeze(Object.defineProperty({__proto__:null,clearSession:ki,getSession:xs,hasValidSession:Nh,storeSession:Su},Symbol.toStringTag,{value:"Module"}));function iy(o){if(!o||typeof o!="string")return null;const s=o.match(/^([A-Z]+)_(RED|BLACK)\((\d+)\)$/);if(!s)return console.warn("[parsePieceString] Invalid piece format:",o),null;const[,i,r,d]=s;return{kind:i,color:r.toLowerCase(),value:parseInt(d,10),type:i}}function W0(o){return Array.isArray(o)?o.map(s=>typeof s=="object"&&s!==null&&(s.kind||s.type)&&s.color&&s.value!==void 0?s:typeof s=="string"?iy(s):null).filter(s=>s!==null):[]}const Sa=class Sa extends EventTarget{constructor(){if(super(),this.listeners=new Set,this.isDestroyed=!1,this.eventHistory=[],this.sequenceNumber=0,Sa.instance)throw new Error("GameService is a singleton. Use GameService.getInstance()");this.state=this.getInitialState(),this.setupNetworkListeners()}static getInstance(){return Sa.instance||(Sa.instance=new Sa),Sa.instance}getState(){return Object.freeze({...this.state})}async joinRoom(s,i){if(this.isDestroyed)throw new Error("GameService has been destroyed");try{this.setState({...this.state,roomId:s,playerName:i},"JOIN_ROOM_INIT"),await re.connectToRoom(s,{playerName:i}),this.setState({...this.state,isConnected:!0,error:null,gameStartTime:Date.now()},"JOIN_ROOM_CONNECTED");const r=`${s}-${i}-${Date.now()}`;Su(s,i,r,this.state.phase),console.log(`🎮 GameService: Joined room ${s} as ${i}`)}catch(r){const d=r instanceof Error?r.message:"Unknown error";throw this.setState({...this.state,error:`Failed to join room: ${d}`,isConnected:!1},"JOIN_ROOM_FAILED"),r}}async leaveRoom(){this.state.roomId&&(await re.disconnectFromRoom(this.state.roomId),ki(),this.setState({...this.getInitialState(),playerName:this.state.playerName},"LEAVE_ROOM"),console.log("🎮 GameService: Left room"))}acceptRedeal(){this.validateAction("ACCEPT_REDEAL","preparation"),this.sendAction("accept_redeal",{player_name:this.state.playerName})}declineRedeal(){this.validateAction("DECLINE_REDEAL","preparation"),this.sendAction("decline_redeal",{player_name:this.state.playerName})}makeDeclaration(s){if(this.validateAction("MAKE_DECLARATION","declaration"),typeof s!="number"||s<0||s>8)throw new Error(`Invalid declaration value: ${s}. Must be 0-8.`);if(this.state.currentDeclarer!==this.state.playerName)throw new Error("Not your turn to declare");const i=Object.keys(this.state.declarations).length,r=this.state.players.length;if(i===r-1&&Object.values(this.state.declarations).reduce((f,g)=>f+g,0)+s===8)throw new Error("Last player cannot make total equal 8");this.sendAction("declare",{value:s,player_name:this.state.playerName})}playPieces(s){if(this.validateAction("PLAY_PIECES","turn"),!Array.isArray(s)||s.length===0)throw new Error("Must select at least one piece to play");if(s.some(d=>d<0||d>=this.state.myHand.length))throw new Error("Invalid piece indices");if(!this.state.isMyTurn)throw new Error("Not your turn to play");if(this.state.requiredPieceCount!==null&&s.length!==this.state.requiredPieceCount)throw new Error(`Must play exactly ${this.state.requiredPieceCount} pieces`);const r=s.map(d=>this.state.myHand[d]).reduce((d,f)=>d+(f.value||0),0);this.sendAction("play",{piece_indices:s,player_name:this.state.playerName,play_value:r})}startNextRound(){this.validateAction("START_NEXT_ROUND","scoring"),this.sendAction("start_next_round",{})}addListener(s){if(typeof s!="function")throw new Error("Listener must be a function");return this.listeners.add(s),()=>{this.listeners.delete(s)}}removeListener(s){this.listeners.delete(s)}removeAllListeners(){this.listeners.clear()}getEventHistory(){return[...this.eventHistory]}replayToSequence(s){const i=this.getInitialState(),r=this.eventHistory.filter(d=>d.sequence<=s);this.state=r.reduce((d,f)=>this.applyEvent(d,f),i),this.notifyListeners(),console.log(`🔄 Replayed to sequence ${s}`)}destroy(){this.isDestroyed=!0,this.listeners.clear(),this.eventHistory.length=0,ki(),Sa.instance=null,console.log("🎮 GameService: Destroyed")}getInitialState(){return{isConnected:!1,roomId:null,playerName:null,phase:"waiting",currentRound:1,players:[],roundStarter:null,weakHands:[],currentWeakPlayer:null,redealRequests:{},redealMultiplier:1,myHand:[],declarations:{},declarationOrder:[],currentDeclarer:null,declarationTotal:0,currentTurnStarter:null,turnOrder:[],currentPlayer:null,currentTurnPlays:[],requiredPieceCount:null,currentTurnNumber:0,roundScores:{},totalScores:{},winners:[],turnWinner:null,winningPlay:null,playerPiles:{},turnNumber:1,nextStarter:null,allHandsEmpty:!1,willContinue:!1,disconnectedPlayers:[],host:null,isMyTurn:!1,allowedActions:[],validOptions:[],lastEventSequence:0,error:null,gameOver:!1,gameStartTime:null}}setupNetworkListeners(){re.addEventListener("connected",this.handleNetworkConnection.bind(this)),re.addEventListener("disconnected",this.handleNetworkDisconnection.bind(this));const s=["phase_change","weak_hands_found","redeal_decision_needed","redeal_executed","declare","play","turn_complete","turn_resolved","score_update","round_complete","game_ended","player_disconnected","player_reconnected","host_changed"];re.addEventListener("room_not_found",this.handleRoomNotFound.bind(this)),s.forEach(i=>{re.addEventListener(i,this.handleNetworkEvent.bind(this))})}handleNetworkConnection(){this.setState({...this.state,isConnected:!0,error:null},"NETWORK_CONNECTED")}handleNetworkDisconnection(s){const i=s,{intentional:r}=i.detail;this.setState({...this.state,isConnected:!1,error:r?null:"Connection lost"},"NETWORK_DISCONNECTED")}handleRoomNotFound(s){const i=s,{data:r}=i.detail;console.log("🚫 Room not found:",r),ly(async()=>{const{clearSession:g}=await Promise.resolve().then(()=>sy);return{clearSession:g}},void 0).then(({clearSession:g})=>{g()});const d=r?.message||"This game room no longer exists",f=r?.suggestion||"Please return to the start page";this.setState({...this.state,error:`${d}. ${f}`,phase:"waiting"},"ROOM_NOT_FOUND"),typeof window<"u"&&window.showToast&&window.showToast({type:"error",title:"Room Not Found",message:`${d}. ${f}`,duration:8e3}),setTimeout(()=>{typeof window<"u"&&(window.location.href="/")},3e3)}handleNetworkEvent(s){const i=s,{roomId:r,data:d}=i.detail;if(r===this.state.roomId)try{const f=this.processGameEvent(s.type,d);this.setState(f,`NETWORK_EVENT:${s.type.toUpperCase()}`)}catch(f){const g=f instanceof Error?f.message:"Unknown error";console.error(`Failed to process ${s.type} event:`,f),this.setState({...this.state,error:`Event processing error: ${g}`},"EVENT_ERROR")}}processGameEvent(s,i){let r={...this.state};switch(s){case"phase_change":r=this.handlePhaseChange(r,i);break;case"weak_hands_found":r=this.handleWeakHandsFound(r,i);break;case"redeal_decision_needed":r=this.handleRedealDecisionNeeded(r,i);break;case"redeal_executed":r=this.handleRedealExecuted(r,i);break;case"declare":r=this.handleDeclare(r,i);break;case"play":r=this.handlePlay(r,i);break;case"turn_resolved":r=this.handleTurnResolved(r,i);break;case"turn_complete":r=this.handleTurnComplete(r,i);break;case"score_update":r=this.handleScoreUpdate(r,i);break;case"round_complete":r=this.handleRoundComplete(r,i);break;case"game_ended":r=this.handleGameEnded(r,i);break;case"player_disconnected":r=this.handlePlayerDisconnected(r,i);break;case"player_reconnected":r=this.handlePlayerReconnected(r,i);break;case"host_changed":r=this.handleHostChanged(r,i);break;case"play_rejected":{const d=i.details||i.message||"Invalid play. Please try again.";alert(d);break}case"critical_error":alert(i.message||"Game ended due to critical error. Returning to lobby..."),window.location.href="/lobby";break;default:return console.warn(`Unknown game event: ${s}`,i),r}return r=this.updateDerivedState(r),r}handlePhaseChange(s,i){const r={...s};if(r.phase=i.phase,r.currentRound=i.round||s.currentRound,i.players&&s.playerName&&i.players[s.playerName]){const d=i.players[s.playerName];if(d.hand){const f=d.hand.map((g,v)=>{const T=g.match(/^(.+)\((\d+)\)$/);if(T){const[,x,N]=T,[p,_]=x.split("_");return{kind:p,color:_.toLowerCase(),value:parseInt(N),displayName:`${p} ${_}`,originalIndex:v}}return{kind:"UNKNOWN",color:"red",value:0,displayName:g,originalIndex:v}});r.myHand=[...f].sort((g,v)=>g.color==="red"&&v.color!=="red"?-1:g.color!=="red"&&v.color==="red"?1:(v.value||0)-(g.value||0))}}if(i.players&&(r.players=Object.entries(i.players).map(([d,f])=>({name:d,score:f.score||0,is_bot:f.is_bot||!1,is_host:f.is_host||!1,avatar_color:f.avatar_color||null,zero_declares_in_a_row:f.zero_declares_in_a_row||0,hand_size:f.hand_size||0,captured_piles:f.captured_piles||0,declared:f.declared||0}))),i.phase_data){const d=i.phase_data;if(d.players){const f=new Map(r.players.map(g=>[g.name,g]));r.players=d.players.map(g=>{const v=f.get(g.name);return{...g,avatar_color:g.avatar_color,zero_declares_in_a_row:v?.zero_declares_in_a_row||0,is_connected:g.is_connected!==void 0?g.is_connected:v?.is_connected,disconnect_time:g.disconnect_time||v?.disconnect_time,original_is_bot:g.original_is_bot!==void 0?g.original_is_bot:v?.original_is_bot}}),r.disconnectedPlayers=r.players.filter(g=>g.is_bot&&g.original_is_bot===!1).map(g=>g.name)}switch(i.phase){case"preparation":d.my_hand&&!r.myHand.length&&(r.myHand=d.my_hand,r.myHand.sort((f,g)=>f.color==="red"&&g.color!=="red"?-1:f.color!=="red"&&g.color==="red"?1:(g.value||0)-(f.value||0))),d.round_starter&&(r.roundStarter=d.round_starter),r.redealMultiplier=d.redeal_multiplier||1,d.weak_hands&&(r.weakHands=d.weak_hands),d.current_weak_player&&(r.currentWeakPlayer=d.current_weak_player),r.simultaneousMode=d.simultaneous_mode||!1,r.weakPlayersAwaiting=d.weak_players_awaiting||[],r.decisionsReceived=d.decisions_received||0,r.decisionsNeeded=d.decisions_needed||0,d.dealing_cards!==void 0&&(r.dealingCards=d.dealing_cards),r.myHand.length>0&&(r.isMyHandWeak=this.calculateWeakHand(r.myHand),r.handValue=this.calculateHandValue(r.myHand),r.highestCardValue=this.calculateHighestCardValue(r.myHand)),r.simultaneousMode&&r.playerName?r.isMyDecision=r.weakPlayersAwaiting.includes(r.playerName):d.current_weak_player&&r.playerName&&(r.isMyDecision=d.current_weak_player===r.playerName);break;case"round_start":d.current_starter&&(r.currentStarter=d.current_starter),d.starter_reason&&(r.starterReason=d.starter_reason);break;case"declaration":d.my_hand&&!r.myHand.length&&(r.myHand=d.my_hand,r.myHand.sort((f,g)=>f.color==="red"&&g.color!=="red"?-1:f.color!=="red"&&g.color==="red"?1:(g.value||0)-(f.value||0))),d.declaration_order&&(r.declarationOrder=d.declaration_order),d.current_declarer&&(r.currentDeclarer=d.current_declarer),r.declarations=d.declarations||{},r.currentTotal=d.declaration_total??Object.values(d.declarations||{}).reduce((f,g)=>f+g,0),d.declaration_order?(r.declarationProgress={declared:Object.keys(d.declarations||{}).length,total:d.declaration_order.length},r.isLastPlayer=Object.keys(d.declarations||{}).length===d.declaration_order.length-1):d.players&&(r.declarationProgress={declared:Object.keys(d.declarations||{}).length,total:d.players.length},r.isLastPlayer=Object.keys(d.declarations||{}).length===d.players.length-1),r.myHand.length>0&&(r.estimatedPiles=this.calculateEstimatedPiles(r.myHand),r.handStrength=this.calculateHandStrength(r.myHand));break;case"turn":d.turn_order&&(r.turnOrder=d.turn_order),d.current_turn_starter&&(r.currentTurnStarter=d.current_turn_starter),d.current_player&&(r.currentPlayer=d.current_player),d.required_piece_count!==void 0&&(r.requiredPieceCount=d.required_piece_count),d.pile_counts!==void 0&&(r.pileCounts=d.pile_counts),d.turn_plays!==void 0?typeof d.turn_plays=="object"&&Object.keys(d.turn_plays).length===0?r.currentTurnPlays=[]:d.turn_plays&&typeof d.turn_plays=="object"&&(r.currentTurnPlays=Object.entries(d.turn_plays).map(([f,g])=>{const v=g.type||g.play_type||"UNKNOWN",T=g.is_valid!==!1&&v!=="INVALID";return{player:f,pieces:W0(g.pieces||[]),isValid:T,playType:v,totalValue:g.play_value||0}})):r.currentTurnPlays=(d.current_turn_plays||[]).map(f=>({...f,pieces:W0(f.pieces||f.cards||[])})),r.currentTurnNumber=d.current_turn_number||0,r.canPlayAnyCount=!r.requiredPieceCount&&r.isMyTurn,r.selectedPlayValue=0;break;case"scoring":{const f={},g=d.round_scores||{};Object.entries(g).forEach(([x,N])=>{typeof N=="object"&&N!==null?N.final_score!==void 0?f[x]=N.final_score:f[x]=0:f[x]=N||0}),r.roundScores=f;const v={},T=d.total_scores||{};Object.entries(T).forEach(([x,N])=>{typeof N=="object"&&N!==null?N.total_score!==void 0?v[x]=N.total_score:v[x]=0:v[x]=N||0}),r.totalScores=v,r.gameOver=d.game_complete||!1,r.winners=d.winners||[],r.redealMultiplier=d.redeal_multiplier||1,d.scoring_players_data&&d.round_scores&&d.total_scores?r.playersWithScores=this.calculatePlayersWithScores(d.scoring_players_data,d.round_scores,d.total_scores,d.redeal_multiplier||1,d.winners||[]):!d.scoring_players_data&&r.players&&r.players.length>0&&d.round_scores&&d.total_scores&&(r.playersWithScores=this.calculatePlayersWithScores(r.players,d.round_scores,d.total_scores,d.redeal_multiplier||1,d.winners||[]));break}case"game_over":r.gameOver=!0,d.winners&&(r.winners=d.winners),d.final_rankings&&(r.final_rankings=d.final_rankings),d.game_stats&&(r.game_stats=d.game_stats);break}}if(r.error=null,s.roomId&&s.playerName){const d=`${s.roomId}-${s.playerName}-${Date.now()}`;Su(s.roomId,s.playerName,d,r.phase)}return r}handleWeakHandsFound(s,i){return{...s,weakHands:i.weak_hands||[],currentWeakPlayer:i.current_weak_player||null}}handleRedealDecisionNeeded(s,i){return{...s,currentWeakPlayer:i.player}}handleRedealExecuted(s,i){const r=i.my_hand||s.myHand;return Array.isArray(r)&&r.sort((d,f)=>d.color==="red"&&f.color!=="red"?-1:d.color!=="red"&&f.color==="red"?1:(f.value||0)-(d.value||0)),{...s,myHand:r,redealMultiplier:i.redeal_multiplier||s.redealMultiplier,weakHands:[],currentWeakPlayer:null,redealRequests:{}}}handleDeclare(s,i){const r={...s.declarations,[i.player]:i.value},d=Object.values(r).reduce((N,p)=>N+p,0),g=s.declarationOrder.indexOf(i.player)+1,v=g<s.declarationOrder.length?s.declarationOrder[g]:null,T={...s,declarations:r,declarationTotal:d,currentDeclarer:v,currentTotal:d},x=s.players&&s.players.length>0?s.players.length:s.declarationOrder&&s.declarationOrder.length>0?s.declarationOrder.length:4;return T.declarationProgress={declared:Object.keys(r).length,total:x},T}handlePlay(s,i){s.currentRound,s.currentTurnNumber,i.required_count||s.requiredPieceCount;let r=s.phase;s.phase==="turn_results"&&(r="turn"),i.player,i.pieces,i.is_valid,i.play_type,i.play_value;let d=s.requiredPieceCount;r==="turn"&&s.phase==="turn_results"&&(d=null);let f=s.currentPlayer;return i.next_player?f=i.next_player:i.turn_complete,i.turn_complete,{...s,phase:r,requiredPieceCount:d,currentPlayer:f,...r==="turn"&&s.phase==="turn_results"?{turnWinner:null,winningPlay:null,currentTurnPlays:[]}:{}}}handleTurnResolved(s,i){const r=i.my_hand||s.myHand;return Array.isArray(r)&&r.sort((d,f)=>d.color==="red"&&f.color!=="red"?-1:d.color!=="red"&&f.color==="red"?1:(f.value||0)-(d.value||0)),{...s,currentTurnPlays:[],requiredPieceCount:null,myHand:r,currentTurnNumber:s.currentTurnNumber+1}}handleTurnComplete(s,i){return s.currentRound,i.turn_number||s.currentTurnNumber,i.winner,{...s,phase:"turn_results",turnWinner:i.winner||null,winningPlay:i.winning_play||null,playerPiles:i.player_piles||{},players:i.turn_players_data||s.players,turnNumber:i.turn_number||s.currentTurnNumber||1,nextStarter:i.next_starter||null,allHandsEmpty:i.all_hands_empty||!1,willContinue:i.will_continue||!1}}handleScoreUpdate(s,i){return{...s,roundScores:i.round_scores||s.roundScores,totalScores:i.total_scores||s.totalScores}}handleRoundComplete(s,i){return{...s,roundScores:i.round_scores||s.roundScores,totalScores:i.total_scores||s.totalScores,currentRound:s.currentRound+1}}handleGameEnded(s,i){return{...s,gameOver:!0,winners:i.winners||[],totalScores:i.final_scores||s.totalScores}}handlePlayerDisconnected(s,i){const r={...s};return i.player_name&&!r.disconnectedPlayers.includes(i.player_name)&&(r.disconnectedPlayers=[...r.disconnectedPlayers,i.player_name]),i.player_name&&s.players&&(r.players=s.players.map(d=>d.name===i.player_name?{...d,is_bot:i.is_bot!==void 0?i.is_bot:!0,is_connected:!1,disconnect_time:i.disconnect_time||new Date().toISOString()}:d)),r}handlePlayerReconnected(s,i){const r={...s};return i.player_name&&(r.disconnectedPlayers=r.disconnectedPlayers.filter(d=>d!==i.player_name)),i.player_name&&s.players&&(r.players=s.players.map(d=>d.name===i.player_name?{...d,is_bot:i.original_is_bot!==void 0?i.original_is_bot:!1,is_connected:!0,disconnect_time:void 0}:d)),r}handleHostChanged(s,i){return{...s,host:i.new_host||null}}updateDerivedState(s){const i={...s};return i.isMyTurn=this.calculateIsMyTurn(s),i.allowedActions=this.calculateAllowedActions(s),i.validOptions=this.calculateValidOptions(s),i}calculateIsMyTurn(s){switch(s.phase){case"preparation":return s.currentWeakPlayer===s.playerName;case"declaration":return s.currentDeclarer===s.playerName;case"turn":return s.currentPlayer===s.playerName;case"turn_results":return!1;case"scoring":return!1;default:return!1}}calculateAllowedActions(s){const i=[];switch(s.phase){case"preparation":s.currentWeakPlayer===s.playerName&&i.push("acceptRedeal","declineRedeal");break;case"declaration":s.currentDeclarer===s.playerName&&i.push("makeDeclaration");break;case"turn":this.calculateIsMyTurn(s)&&i.push("playPieces");break;case"turn_results":break;case"scoring":s.gameOver&&i.push("startNextRound");break}return i}calculateValidOptions(s){switch(s.phase){case"declaration":if(s.currentDeclarer===s.playerName)return this.calculateValidDeclarations(s);break;case"turn":if(this.calculateIsMyTurn(s))return this.calculateValidPlays(s);break}return[]}calculateValidDeclarations(s){const i=[],r=Object.values(s.declarations).reduce((v,T)=>v+T,0),d=Object.keys(s.declarations).length,f=s.players.length,g=d===f-1;for(let v=0;v<=8;v++)g&&r+v===8||i.push(v);return i}calculateValidPlays(s){if(!s.myHand||s.myHand.length===0)return[];const i=[],r=s.myHand.length,d=1,f=s.requiredPieceCount||Math.min(6,r);for(let g=d;g<=f;g++){const v=this.generateCombinations(r,g);i.push(...v)}return i}generateCombinations(s,i){const r=[];function d(f,g){if(g.length===i){r.push([...g]);return}for(let v=f;v<s;v++)g.push(v),d(v+1,g),g.pop()}return d(0,[]),r}validateAction(s,i){if(this.isDestroyed)throw new Error("GameService has been destroyed");if(!this.state.isConnected)throw new Error("Not connected to game");if(this.state.phase!==i)throw new Error(`Cannot ${s} during ${this.state.phase} phase`);if(this.state.error)throw new Error(`Game error: ${this.state.error}`)}sendAction(s,i){if(!this.state.roomId)throw new Error("No room connected");re.send(this.state.roomId,s,i)||console.warn(`Action ${s} queued due to connection issue`),console.log(`🎮 Action sent: ${s}`,i)}setState(s,i){const r=this.state;this.state=s;const d={oldState:{...r},newState:{...s},reason:i,sequence:++this.sequenceNumber,timestamp:Date.now()};this.eventHistory.push(d),this.eventHistory.length>1e3&&this.eventHistory.shift(),this.state.lastEventSequence=this.sequenceNumber,console.group(`🎮 State Change: ${i}`),console.log("Previous:",r),console.log("New:",s),console.log("Diff:",this.stateDiff(r,s)),console.groupEnd(),typeof window<"u"&&(window.__GAME_STATE_HISTORY__=window.__GAME_STATE_HISTORY__||[],window.__GAME_STATE_HISTORY__.push(d),window.__GAME_STATE_HISTORY__.length>100&&window.__GAME_STATE_HISTORY__.shift(),window.debugReplayToEvent=f=>{this.replayToSequence(f)}),this.notifyListeners()}applyEvent(s,i){return i.newState}stateDiff(s,i){const r={};for(const d in i)JSON.stringify(s[d])!==JSON.stringify(i[d])&&(r[d]={from:s[d],to:i[d]});return r}notifyListeners(){const s=this.getState();for(const i of this.listeners)try{i(s)}catch(r){console.error("Listener error:",r)}this.dispatchEvent(new CustomEvent("stateChange",{detail:{state:s}}))}calculateWeakHand(s){return!s||s.length===0?!1:s.every(i=>(i.value||0)<=9)}calculateHandValue(s){return!s||s.length===0?0:s.reduce((i,r)=>i+(r.value||0),0)}calculateHighestCardValue(s){return!s||s.length===0?0:Math.max(...s.map(i=>i.value||0))}calculateEstimatedPiles(s){if(!s||s.length===0)return 0;const i=s.map(f=>f.value||0),r=i.reduce((f,g)=>f+g,0)/i.length,d=i.filter(f=>f>10).length;return Math.max(0,Math.min(8,Math.floor(r/4)+d))}calculateHandStrength(s){if(!s||s.length===0)return 0;const i=s.map(f=>f.value||0),r=i.reduce((f,g)=>f+g,0)/i.length,d=Math.max(...i);return Math.min(100,Math.round(r*2+d/2))}calculatePlayersWithScores(s,i,r,d,f){return s.map(g=>{const v=i[g.name],T=typeof v=="object"&&v?.final_score!==void 0?v.final_score:v||0,x=typeof v=="object"&&v?.base_score!==void 0?v.base_score:Math.round(T/Math.max(1,d)),N=typeof v=="object"&&v?.actual!==void 0?v.actual:this.deriveActualPiles(g,T),p=typeof v=="object"&&v?.declared!==void 0?v.declared:g.pile_count||0,_=typeof v=="object"&&v?.total_score!==void 0?v.total_score:r[g.name]||0,B=typeof v=="object"&&v?.bonus!==void 0?v.bonus:0,X=typeof v=="object"&&v?.hit_value!==void 0?v.hit_value:N===p?p:-Math.abs(p-N);return{...g,roundScore:T,totalScore:_,baseScore:x,actualPiles:N,pile_count:p,bonus:B,hitValue:X,scoreExplanation:this.generateScoreExplanation(g,T,d),isWinner:f.includes(g.name)}}).sort((g,v)=>v.totalScore-g.totalScore)}deriveActualPiles(s,i){const r=s.pile_count||0;return r===0&&i===3?0:r===0&&i<0?Math.abs(i):i===r+5?r:"?"}generateScoreExplanation(s,i,r){const d=s.pile_count||0,f=Math.round(i/Math.max(1,r));let g="";return d===0&&f===3?g="Perfect zero prediction bonus":d===0&&f<0?g="Penalty for breaking zero declaration":f===d+5?g="Perfect prediction bonus":f<0?g="Penalty for missing target":g="Score calculation applied",r>1&&(g+=` (×${r} redeal multiplier)`),g}};Sa.instance=null;let Cu=Sa;const Ve=Cu.getInstance(),Ca=class Ca extends EventTarget{constructor(){if(super(),this.roomStates=new Map,this.eventBuffers=new Map,this.isDestroyed=!1,Ca.instance)throw new Error("RecoveryService is a singleton. Use RecoveryService.getInstance()");this.config={snapshotInterval:50,maxEventBuffer:pu.EVENT_BUFFER_SIZE,recoveryTimeout:Tt.HEARTBEAT_INTERVAL,enablePersistence:!0,maxRetries:3,gapDetectionThreshold:5},this.setupEventListeners(),console.log("🔄 RecoveryService: Initialized")}static getInstance(){return Ca.instance||(Ca.instance=new Ca),Ca.instance}initializeRoom(s){if(this.isDestroyed)throw new Error("RecoveryService has been destroyed");if(this.roomStates.has(s)){console.log(`🔄 RecoveryService: Room ${s} already initialized`);return}const i={roomId:s,lastSequence:0,expectedSequence:1,snapshots:[],isRecovering:!1,recoveryAttempts:0,gapsDetected:[],lastSnapshotSequence:0,recoveryStartTime:null};this.roomStates.set(s,i),this.eventBuffers.set(s,{events:[],maxSize:this.config.maxEventBuffer,nextExpectedSequence:1}),this.restoreFromPersistence(s),console.log(`🔄 RecoveryService: Initialized tracking for room ${s}`)}recordEvent(s,i){const r=this.roomStates.get(s),d=this.eventBuffers.get(s);if(!r||!d){console.warn(`RecoveryService: Room ${s} not initialized`);return}this.detectSequenceGaps(s,i.sequence),this.addToEventBuffer(s,i),r.lastSequence=Math.max(r.lastSequence,i.sequence),r.expectedSequence=r.lastSequence+1,this.shouldCreateSnapshot(r)&&this.createSnapshot(s),this.config.enablePersistence&&this.persistState(s),console.log(`🔄 Event recorded: ${i.type} (seq: ${i.sequence}) for room ${s}`)}async startRecovery(s,i){const r=this.roomStates.get(s);if(!r)throw new Error(`Room ${s} not initialized for recovery`);if(r.isRecovering)return console.log(`Recovery already in progress for room ${s}`),!1;r.isRecovering=!0,r.recoveryStartTime=Date.now(),r.recoveryAttempts++,this.dispatchEvent(new CustomEvent("recoveryStarted",{detail:{roomId:s,attempt:r.recoveryAttempts,timestamp:Date.now()}}));try{const d=i||this.findOptimalRecoveryPoint(s);if(console.log(`🔄 Starting recovery for room ${s} from sequence ${d}`),await this.requestMissingEvents(s,d),await this.applyRecovery(s,d))return r.isRecovering=!1,r.recoveryAttempts=0,r.gapsDetected=[],this.dispatchEvent(new CustomEvent("recoveryCompleted",{detail:{roomId:s,timestamp:Date.now()}})),console.log(`✅ Recovery completed for room ${s}`),!0;throw new Error("Recovery application failed")}catch(d){r.isRecovering=!1;const f=d instanceof Error?d.message:"Unknown error";return console.error(`❌ Recovery failed for room ${s}:`,d),this.dispatchEvent(new CustomEvent("recoveryFailed",{detail:{roomId:s,error:f,attempt:r.recoveryAttempts,timestamp:Date.now()}})),r.recoveryAttempts<this.config.maxRetries&&(console.log(`🔄 Scheduling retry for room ${s} (attempt ${r.recoveryAttempts+1})`),setTimeout(()=>this.startRecovery(s),2e3*r.recoveryAttempts)),!1}}getRecoveryStatus(s){const i=this.roomStates.get(s),r=this.eventBuffers.get(s);return!i||!r?{roomId:s,initialized:!1,isRecovering:!1,lastSequence:0,expectedSequence:1,gapsDetected:0,snapshotCount:0,eventBufferSize:0,recoveryAttempts:0}:{roomId:s,initialized:!0,isRecovering:i.isRecovering,lastSequence:i.lastSequence,expectedSequence:i.expectedSequence,gapsDetected:i.gapsDetected.length,snapshotCount:i.snapshots.length,eventBufferSize:r.events.length,recoveryAttempts:i.recoveryAttempts,lastSnapshotSequence:i.lastSnapshotSequence,recoveryStartTime:i.recoveryStartTime}}createSnapshot(s){const i=this.roomStates.get(s);if(!i)return!1;try{const r=Ve.getState(),d={sequence:i.lastSequence,timestamp:Date.now(),gameState:JSON.parse(JSON.stringify(r)),roomId:s};return i.snapshots.push(d),i.lastSnapshotSequence=i.lastSequence,i.snapshots.length>10&&i.snapshots.shift(),this.config.enablePersistence&&this.persistState(s),console.log(`📸 Snapshot created for room ${s} at sequence ${d.sequence}`),!0}catch(r){return console.error(`Failed to create snapshot for room ${s}:`,r),!1}}cleanupRoom(s){this.roomStates.delete(s),this.eventBuffers.delete(s),this.config.enablePersistence&&this.clearPersistedState(s),console.log(`🧹 RecoveryService: Cleaned up room ${s}`)}destroy(){this.isDestroyed=!0;const s=Array.from(this.roomStates.keys());for(const i of s)this.cleanupRoom(i);Ca.instance=null,console.log("🔄 RecoveryService: Destroyed")}setupEventListeners(){re.addEventListener("message",this.handleNetworkMessage.bind(this)),re.addEventListener("connected",this.handleReconnection.bind(this)),re.addEventListener("reconnected",this.handleReconnection.bind(this)),Ve.addEventListener("stateChange",this.handleStateChange.bind(this))}handleNetworkMessage(s){const i=s,{roomId:r,message:d}=i.detail;if(!d||!d.sequence)return;const f={sequence:d.sequence,type:d.event,data:d.data,timestamp:d.timestamp,id:d.id};this.recordEvent(r,f)}handleReconnection(s){const i=s,{roomId:r}=i.detail;this.roomStates.get(r)&&this.hasSequenceGaps(r)&&(console.log(`🔄 Detected sequence gaps after reconnection, starting recovery for ${r}`),this.startRecovery(r))}handleStateChange(){}detectSequenceGaps(s,i){const r=this.roomStates.get(s);if(!r)return;const d=r.expectedSequence;if(i>d){const f={start:d,end:i-1,detected:Date.now()};r.gapsDetected.push(f),console.warn(`⚠️ Sequence gap detected in room ${s}: ${f.start}-${f.end}`),this.dispatchEvent(new CustomEvent("sequenceGap",{detail:{roomId:s,gap:f,timestamp:Date.now()}})),i-d>=this.config.gapDetectionThreshold&&(console.log(`🔄 Large gap detected, starting automatic recovery for room ${s}`),this.startRecovery(s))}}addToEventBuffer(s,i){const r=this.eventBuffers.get(s);if(!r)return;if(r.events.find(f=>f.sequence===i.sequence&&f.id===i.id)){console.log(`Duplicate event detected: ${i.type} (seq: ${i.sequence})`);return}r.events.push(i),r.events.sort((f,g)=>f.sequence-g.sequence),r.events.length>r.maxSize&&r.events.shift()}shouldCreateSnapshot(s){return s.lastSequence-s.lastSnapshotSequence>=this.config.snapshotInterval}findOptimalRecoveryPoint(s){const i=this.roomStates.get(s);return i?i.snapshots.length>0?i.snapshots[i.snapshots.length-1].sequence+1:i.gapsDetected.length>0?i.gapsDetected[0].start:1:1}async requestMissingEvents(s,i){return new Promise((r,d)=>{const f=setTimeout(()=>{d(new Error("Recovery request timeout"))},this.config.recoveryTimeout),g=T=>{T.detail.roomId===s&&(clearTimeout(f),re.removeEventListener("recovery_response",g),r())};re.addEventListener("recovery_response",g),re.send(s,"request_recovery",{from_sequence:i,to_sequence:this.roomStates.get(s)?.lastSequence||i})||(clearTimeout(f),re.removeEventListener("recovery_response",g),d(new Error("Failed to send recovery request")))})}async applyRecovery(s,i){const r=this.roomStates.get(s);if(!r)return!1;try{const d=this.findBestSnapshot(s,i);return d&&console.log(`🔄 Restoring from snapshot at sequence ${d.sequence}`),r.gapsDetected=[],!0}catch(d){return console.error(`Failed to apply recovery for room ${s}:`,d),!1}}findBestSnapshot(s,i){const r=this.roomStates.get(s);if(!r||r.snapshots.length===0)return null;let d=null;for(const f of r.snapshots)f.sequence<=i&&(!d||f.sequence>d.sequence)&&(d=f);return d}hasSequenceGaps(s){const i=this.roomStates.get(s);return i?i.gapsDetected.length>0:!1}persistState(s){try{const i=this.roomStates.get(s),r=this.eventBuffers.get(s);if(i&&r){const d={recoveryState:i,eventBuffer:{...r,events:r.events.slice(-100)}};localStorage.setItem(`recovery_${s}`,JSON.stringify(d))}}catch(i){console.warn(`Failed to persist recovery state for room ${s}:`,i)}}restoreFromPersistence(s){try{const i=localStorage.getItem(`recovery_${s}`);if(i){const r=JSON.parse(i);r.recoveryState&&this.roomStates.set(s,r.recoveryState),r.eventBuffer&&this.eventBuffers.set(s,r.eventBuffer),console.log(`🔄 Restored recovery state for room ${s} from persistence`)}}catch(i){console.warn(`Failed to restore recovery state for room ${s}:`,i)}}clearPersistedState(s){try{localStorage.removeItem(`recovery_${s}`)}catch(i){console.warn(`Failed to clear persisted state for room ${s}:`,i)}}};Ca.instance=null;let Nu=Ca;const Ut=Nu.getInstance(),Na=class Na extends EventTarget{constructor(){if(super(),this.errorHistory=[],this.metrics={totalErrors:0,recoveryAttempts:0,successfulRecoveries:0,uptime:Date.now(),lastHealthCheck:0},this.isInitialized=!1,this.isDestroyed=!1,this.healthCheckInterval=null,this.recoveryStrategies=new Map,Na.instance)throw new Error("ServiceIntegration is a singleton. Use ServiceIntegration.getInstance()");this.config={healthCheckInterval:Tt.HEARTBEAT_INTERVAL,errorRetention:100,autoRecovery:!0,recoveryTimeout:Tt.RECOVERY_TIMEOUT,maxRecoveryAttempts:3,errorThreshold:10,errorWindowMs:Tt.ERROR_WINDOW_MS,enableMetrics:!0},this.setupRecoveryStrategies(),console.log("🔗 ServiceIntegration: Initialized")}static getInstance(){return Na.instance||(Na.instance=new Na),Na.instance}async initialize(){if(this.isInitialized){console.log("ServiceIntegration already initialized");return}if(this.isDestroyed)throw new Error("ServiceIntegration has been destroyed");try{console.log(""),console.log("🎯 ============================================="),console.log("🚀 PHASE 1-4 ENTERPRISE ARCHITECTURE STARTING"),console.log("🎯 ============================================="),console.log("🔧 Initializing integrated service layer..."),this.setupErrorListeners(),await this.initializeNetworkService(),await this.initializeGameService(),await this.initializeRecoveryService(),this.setupServiceIntegrations(),this.startHealthMonitoring(),this.isInitialized=!0,this.dispatchEvent(new CustomEvent("initialized",{detail:{timestamp:Date.now()}})),console.log(""),console.log("✅ ============================================="),console.log("🎉 PHASE 1-4 ARCHITECTURE FULLY OPERATIONAL!"),console.log("✅ ============================================="),console.log("🔗 NetworkService: Advanced WebSocket with auto-reconnection"),console.log("🎮 GameService: React hooks with TypeScript state management"),console.log("🛠️ RecoveryService: Automatic error recovery and health monitoring"),console.log("🏢 Enterprise Features: Event sourcing, logging, metrics"),console.log("✅ Service integration layer initialized successfully"),console.log("")}catch(s){const i=this.createServiceError("INITIALIZATION_FAILED","CRITICAL",s instanceof Error?s.message:"Unknown initialization error","ServiceIntegration");throw this.handleError(i),new Error(`Service integration initialization failed: ${i.message}`)}}async connectToRoom(s,i){if(!this.isInitialized)throw new Error("ServiceIntegration not initialized");try{console.log(`🔗 Connecting to room ${s} as ${i}...`),Ut.initializeRoom(s),await Ve.joinRoom(s,i),this.dispatchEvent(new CustomEvent("roomConnected",{detail:{roomId:s,playerName:i,timestamp:Date.now()}})),console.log(`✅ Successfully connected to room ${s}`)}catch(r){const d=this.createServiceError("ROOM_CONNECTION_FAILED","HIGH",r instanceof Error?r.message:"Unknown connection error","ServiceIntegration",{roomId:s,playerName:i});throw await this.handleError(d),r}}async disconnectFromRoom(){try{const i=Ve.getState().roomId;i&&(console.log(`🔗 Disconnecting from room ${i}...`),await Ve.leaveRoom(),Ut.cleanupRoom(i),this.dispatchEvent(new CustomEvent("roomDisconnected",{detail:{roomId:i,timestamp:Date.now()}})),console.log(`✅ Successfully disconnected from room ${i}`))}catch(s){const i=this.createServiceError("ROOM_DISCONNECTION_FAILED","MEDIUM",s instanceof Error?s.message:"Unknown disconnection error","ServiceIntegration");await this.handleError(i)}}getHealthStatus(){const s=re.getStatus(),i=Ve.getState(),r=i.roomId?Ut.getRecoveryStatus(i.roomId):null;return{overall:this.calculateOverallHealth(s,i,r),network:{healthy:!s.isDestroyed&&s.activeConnections>=0,connections:s.activeConnections,queuedMessages:s.totalQueuedMessages,status:s.isDestroyed?"destroyed":"operational"},game:{healthy:i.error===null&&!i.gameOver,connected:i.isConnected,phase:i.phase,roomId:i.roomId,playersCount:i.players.length,status:i.error?"error":"operational"},recovery:r?{healthy:!r.isRecovering&&r.gapsDetected===0,initialized:r.initialized,isRecovering:r.isRecovering,eventBufferSize:r.eventBufferSize,gapsDetected:r.gapsDetected,status:r.isRecovering?"recovering":"operational"}:null,integration:this.getIntegrationStatus(),metrics:{...this.metrics},errors:this.getRecentErrors(5)}}async triggerRecovery(s){if(!this.isInitialized)throw new Error("ServiceIntegration not initialized");console.log(`🔄 Triggering manual recovery${s?` for ${s}`:""}...`);try{this.metrics.recoveryAttempts++;const i=Ve.getState(),r=s?this.recoveryStrategies.get(s)||[]:this.getAllRecoveryStrategies();let d=!1;const f=[];for(const v of r)try{console.log(`🔧 Applying recovery strategy: ${v.name}`),await v.execute(i),f.push(v.name),d=!0}catch(T){console.warn(`Strategy ${v.name} failed:`,T)}d&&(this.metrics.successfulRecoveries++,console.log(`✅ Recovery completed with strategies: ${f.join(", ")}`));const g={success:d,appliedStrategies:f,timestamp:Date.now(),errorType:s||"MANUAL_RECOVERY"};return this.dispatchEvent(new CustomEvent("recoveryCompleted",{detail:{recoveryResult:g,timestamp:Date.now()}})),g}catch(i){const r=i instanceof Error?i.message:"Unknown recovery error";return console.error("❌ Recovery failed:",i),{success:!1,appliedStrategies:[],timestamp:Date.now(),errorType:s||"MANUAL_RECOVERY",error:r}}}getMetrics(){return{...this.metrics}}async emergencyReset(){console.log("🚨 Performing emergency service reset...");try{await this.disconnectFromRoom(),Ve.destroy(),Ut.destroy(),re.destroy(),this.errorHistory.length=0,this.metrics.totalErrors=0,this.metrics.recoveryAttempts=0,this.metrics.successfulRecoveries=0,this.metrics.uptime=Date.now(),this.dispatchEvent(new CustomEvent("emergencyReset",{detail:{timestamp:Date.now()}})),console.log("✅ Emergency reset completed")}catch(s){throw console.error("❌ Emergency reset failed:",s),s}}destroy(){this.isDestroyed=!0,this.healthCheckInterval&&(clearInterval(this.healthCheckInterval),this.healthCheckInterval=null),Ut.destroy(),Ve.destroy(),re.destroy(),this.errorHistory.length=0,this.recoveryStrategies.clear(),Na.instance=null,console.log("🔗 ServiceIntegration: Destroyed")}setupRecoveryStrategies(){this.recoveryStrategies.set("NETWORK_CONNECTION_FAILED",[{name:"reconnect",execute:async s=>{s.roomId&&await re.connectToRoom(s.roomId)}}]),this.recoveryStrategies.set("SEQUENCE_GAP",[{name:"triggerRecovery",execute:async s=>{s.roomId&&await Ut.startRecovery(s.roomId)}}]),this.recoveryStrategies.set("GAME_STATE_ERROR",[{name:"requestStateSync",execute:async s=>{s.roomId&&s.isConnected&&re.send(s.roomId,"request_state_sync",{})}}]),this.recoveryStrategies.set("CONNECTION_LOST",[{name:"reconnectAndRecover",execute:async s=>{s.roomId&&(await re.connectToRoom(s.roomId),await Ut.startRecovery(s.roomId))}}])}setupErrorListeners(){re.addEventListener("connectionFailed",s=>{const i=s,r=this.createServiceError("NETWORK_CONNECTION_FAILED","HIGH","Network connection failed","NetworkService",i.detail);this.handleError(r)}),re.addEventListener("connectionError",s=>{const i=s,r=this.createServiceError("NETWORK_CONNECTION_ERROR","MEDIUM","Network connection error","NetworkService",i.detail);this.handleError(r)}),Ut.addEventListener("recoveryFailed",s=>{const i=s,r=this.createServiceError("RECOVERY_FAILED","HIGH",`Recovery failed: ${i.detail.error}`,"RecoveryService",i.detail);this.handleError(r)}),Ut.addEventListener("sequenceGap",s=>{const i=s,r=this.createServiceError("SEQUENCE_GAP","MEDIUM",`Sequence gap detected: ${i.detail.gap.start}-${i.detail.gap.end}`,"RecoveryService",i.detail);this.handleError(r)}),Ve.addEventListener("stateChange",s=>{const r=s.detail.state;if(r.error){const d=this.createServiceError("GAME_STATE_ERROR","HIGH",r.error,"GameService",{phase:r.phase,roomId:r.roomId});this.handleError(d)}})}setupServiceIntegrations(){Ve.addEventListener("stateChange",s=>{const r=s.detail.state;r.roomId&&r.isConnected&&(Ut.getRecoveryStatus(r.roomId).initialized||Ut.initializeRoom(r.roomId))}),Ut.addEventListener("sequenceGap",s=>{const i=s,{roomId:r,gap:d}=i.detail;d.end-d.start>=5&&(console.log(`🔄 Auto-triggering recovery for large gap in ${r}`),this.triggerRecovery("SEQUENCE_GAP"))}),re.addEventListener("disconnected",s=>{s.detail.intentional||console.log("🔄 Unintentional disconnection detected, monitoring for recovery")})}async initializeNetworkService(){console.log("✅ NetworkService integrated")}async initializeGameService(){console.log("✅ GameService integrated")}async initializeRecoveryService(){console.log("✅ RecoveryService integrated")}startHealthMonitoring(){this.healthCheckInterval=setInterval(()=>{this.performHealthCheck()},this.config.healthCheckInterval),console.log(`🩺 Health monitoring started (${this.config.healthCheckInterval}ms interval)`)}performHealthCheck(){this.metrics.lastHealthCheck=Date.now();const s=this.getHealthStatus();s.overall.healthy||(console.warn("⚠️ Health check detected issues:",s.overall.issues),this.dispatchEvent(new CustomEvent("healthIssue",{detail:{healthStatus:s,timestamp:Date.now()}})),this.config.autoRecovery&&this.triggerRecovery())}async handleError(s){this.metrics.totalErrors++,this.errorHistory.push(s),this.errorHistory.length>this.config.errorRetention&&this.errorHistory.shift(),console.error(`🚨 Service Error [${s.severity}] ${s.type}:`,s.message,s.context),this.dispatchEvent(new CustomEvent("error",{detail:{error:s,timestamp:Date.now()}})),this.config.autoRecovery&&this.shouldTriggerAutoRecovery(s)&&await this.triggerRecovery(s.type),this.checkErrorThreshold()}createServiceError(s,i,r,d,f){return{type:s,severity:i,message:r,source:d,timestamp:Date.now(),context:f}}shouldTriggerAutoRecovery(s){return s.severity==="HIGH"||s.severity==="CRITICAL"}checkErrorThreshold(){const s=this.getRecentErrors(this.config.errorWindowMs);s.length>=this.config.errorThreshold&&(console.warn(`⚠️ Error threshold exceeded: ${s.length} errors in ${this.config.errorWindowMs}ms`),this.dispatchEvent(new CustomEvent("errorThresholdExceeded",{detail:{errorCount:s.length,windowMs:this.config.errorWindowMs,timestamp:Date.now()}})))}getRecentErrors(s){const i=Date.now()-s;return this.errorHistory.filter(r=>r.timestamp>=i)}calculateOverallHealth(s,i,r){const d=[];return s.isDestroyed&&d.push("NetworkService destroyed"),i.error&&d.push(`Game error: ${i.error}`),r?.isRecovering&&d.push("Recovery in progress"),r?.gapsDetected>0&&d.push(`Sequence gaps detected: ${r.gapsDetected}`),{healthy:d.length===0,issues:d}}getIntegrationStatus(){return{initialized:this.isInitialized,destroyed:this.isDestroyed,errorCount:this.errorHistory.length,lastError:this.errorHistory[this.errorHistory.length-1]||null,healthCheckEnabled:this.healthCheckInterval!==null,autoRecoveryEnabled:this.config.autoRecovery}}getAllRecoveryStrategies(){const s=[];for(const i of this.recoveryStrategies.values())s.push(...i);return s}};Na.instance=null;let Au=Na;const ct=Au.getInstance();function F0(){return ct.getHealthStatus()}async function ry(){await ct.initialize()}function cy(){ct.destroy()}const uy=I.createContext(null),oy=({children:o,roomId:s,playerName:i,initialData:r={}})=>{const[d,f]=I.useState(!1),[g,v]=I.useState(null),[T,x]=I.useState(null);I.useEffect(()=>{s&&i&&(async()=>{try{if(F0().overall.healthy&&s&&i){console.log("🚀 GAME_CONTEXT: Phase 1-4 Enterprise Architecture initializing");const B=Ve.addListener(X=>{x(X)});return x(Ve.getState()),f(!0),B}else throw new Error("Phase 1-4 services not healthy or missing room/player data")}catch(_){console.error("Failed to initialize GameContext:",_),v(_.message)}})()},[s,i]);const N={isInitialized:d,error:g,playerName:i,roomId:s,gameState:T,currentPhase:T?.phase||"waiting",isConnected:F0().network.healthy,actions:{leaveGame:()=>Ve.disconnect()},myHand:T?.hand||[],scores:T?.scores||{},isMyTurn:T?.currentPlayer===i};return u.jsx(uy.Provider,{value:N,children:o})},Ru="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICAgIDx0ZXh0IHg9IjUwIiB5PSI1MCIgCiAgICAgICAgICBmb250LWZhbWlseT0iJ1NpbVN1bicsICflrovkvZMnLCBzZXJpZiIgCiAgICAgICAgICBmb250LXNpemU9IjcwIiAKICAgICAgICAgIGZvbnQtd2VpZ2h0PSJib2xkIiAKICAgICAgICAgIGZpbGw9IiNkYzM1NDUiIAogICAgICAgICAgdGV4dC1hbmNob3I9Im1pZGRsZSIgCiAgICAgICAgICBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+5bilPC90ZXh0Pgo8L3N2Zz4=",Tu="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICAgIDx0ZXh0IHg9IjUwIiB5PSI1MCIgCiAgICAgICAgICBmb250LWZhbWlseT0iJ1NpbVN1bicsICflrovkvZMnLCBzZXJpZiIgCiAgICAgICAgICBmb250LXNpemU9IjcwIiAKICAgICAgICAgIGZvbnQtd2VpZ2h0PSJib2xkIiAKICAgICAgICAgIGZpbGw9IiM0OTUwNTciIAogICAgICAgICAgdGV4dC1hbmNob3I9Im1pZGRsZSIgCiAgICAgICAgICBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+5bCHPC90ZXh0Pgo8L3N2Zz4=",Ah="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICAgIDx0ZXh0IHg9IjUwIiB5PSI1MCIgCiAgICAgICAgICBmb250LWZhbWlseT0iJ1NpbVN1bicsICflrovkvZMnLCBzZXJpZiIgCiAgICAgICAgICBmb250LXNpemU9IjcwIiAKICAgICAgICAgIGZvbnQtd2VpZ2h0PSJib2xkIiAKICAgICAgICAgIGZpbGw9IiNkYzM1NDUiIAogICAgICAgICAgdGV4dC1hbmNob3I9Im1pZGRsZSIgCiAgICAgICAgICBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+5LuVPC90ZXh0Pgo8L3N2Zz4=",xh="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICAgIDx0ZXh0IHg9IjUwIiB5PSI1MCIgCiAgICAgICAgICBmb250LWZhbWlseT0iJ1NpbVN1bicsICflrovkvZMnLCBzZXJpZiIgCiAgICAgICAgICBmb250LXNpemU9IjcwIiAKICAgICAgICAgIGZvbnQtd2VpZ2h0PSJib2xkIiAKICAgICAgICAgIGZpbGw9IiM0OTUwNTciIAogICAgICAgICAgdGV4dC1hbmNob3I9Im1pZGRsZSIgCiAgICAgICAgICBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+5aOrPC90ZXh0Pgo8L3N2Zz4=",Eh="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICAgIDx0ZXh0IHg9IjUwIiB5PSI1MCIgCiAgICAgICAgICBmb250LWZhbWlseT0iJ1NpbVN1bicsICflrovkvZMnLCBzZXJpZiIgCiAgICAgICAgICBmb250LXNpemU9IjcwIiAKICAgICAgICAgIGZvbnQtd2VpZ2h0PSJib2xkIiAKICAgICAgICAgIGZpbGw9IiNkYzM1NDUiIAogICAgICAgICAgdGV4dC1hbmNob3I9Im1pZGRsZSIgCiAgICAgICAgICBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+55u4PC90ZXh0Pgo8L3N2Zz4=",_h="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICAgIDx0ZXh0IHg9IjUwIiB5PSI1MCIgCiAgICAgICAgICBmb250LWZhbWlseT0iJ1NpbVN1bicsICflrovkvZMnLCBzZXJpZiIgCiAgICAgICAgICBmb250LXNpemU9IjcwIiAKICAgICAgICAgIGZvbnQtd2VpZ2h0PSJib2xkIiAKICAgICAgICAgIGZpbGw9IiM0OTUwNTciIAogICAgICAgICAgdGV4dC1hbmNob3I9Im1pZGRsZSIgCiAgICAgICAgICBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+6LGhPC90ZXh0Pgo8L3N2Zz4=",Rh="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICAgIDx0ZXh0IHg9IjUwIiB5PSI1MCIgCiAgICAgICAgICBmb250LWZhbWlseT0iJ1NpbVN1bicsICflrovkvZMnLCBzZXJpZiIgCiAgICAgICAgICBmb250LXNpemU9IjcwIiAKICAgICAgICAgIGZvbnQtd2VpZ2h0PSJib2xkIiAKICAgICAgICAgIGZpbGw9IiNkYzM1NDUiIAogICAgICAgICAgdGV4dC1hbmNob3I9Im1pZGRsZSIgCiAgICAgICAgICBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+5L+lPC90ZXh0Pgo8L3N2Zz4=",Th="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICAgIDx0ZXh0IHg9IjUwIiB5PSI1MCIgCiAgICAgICAgICBmb250LWZhbWlseT0iJ1NpbVN1bicsICflrovkvZMnLCBzZXJpZiIgCiAgICAgICAgICBmb250LXNpemU9IjcwIiAKICAgICAgICAgIGZvbnQtd2VpZ2h0PSJib2xkIiAKICAgICAgICAgIGZpbGw9IiM0OTUwNTciIAogICAgICAgICAgdGV4dC1hbmNob3I9Im1pZGRsZSIgCiAgICAgICAgICBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+6LuKPC90ZXh0Pgo8L3N2Zz4=",ju="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICAgIDx0ZXh0IHg9IjUwIiB5PSI1MCIgCiAgICAgICAgICBmb250LWZhbWlseT0iJ1NpbVN1bicsICflrovkvZMnLCBzZXJpZiIgCiAgICAgICAgICBmb250LXNpemU9IjcwIiAKICAgICAgICAgIGZvbnQtd2VpZ2h0PSJib2xkIiAKICAgICAgICAgIGZpbGw9IiNkYzM1NDUiIAogICAgICAgICAgdGV4dC1hbmNob3I9Im1pZGRsZSIgCiAgICAgICAgICBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+5YKMPC90ZXh0Pgo8L3N2Zz4=",jh="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICAgIDx0ZXh0IHg9IjUwIiB5PSI1MCIgCiAgICAgICAgICBmb250LWZhbWlseT0iJ1NpbVN1bicsICflrovkvZMnLCBzZXJpZiIgCiAgICAgICAgICBmb250LXNpemU9IjcwIiAKICAgICAgICAgIGZvbnQtd2VpZ2h0PSJib2xkIiAKICAgICAgICAgIGZpbGw9IiM0OTUwNTciIAogICAgICAgICAgdGV4dC1hbmNob3I9Im1pZGRsZSIgCiAgICAgICAgICBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+6aasPC90ZXh0Pgo8L3N2Zz4=",Dh="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICAgIDx0ZXh0IHg9IjUwIiB5PSI1MCIgCiAgICAgICAgICBmb250LWZhbWlseT0iJ1NpbVN1bicsICflrovkvZMnLCBzZXJpZiIgCiAgICAgICAgICBmb250LXNpemU9IjcwIiAKICAgICAgICAgIGZvbnQtd2VpZ2h0PSJib2xkIiAKICAgICAgICAgIGZpbGw9IiNkYzM1NDUiIAogICAgICAgICAgdGV4dC1hbmNob3I9Im1pZGRsZSIgCiAgICAgICAgICBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+54KuPC90ZXh0Pgo8L3N2Zz4=",wh="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICAgIDx0ZXh0IHg9IjUwIiB5PSI1MCIgCiAgICAgICAgICBmb250LWZhbWlseT0iJ1NpbVN1bicsICflrovkvZMnLCBzZXJpZiIgCiAgICAgICAgICBmb250LXNpemU9IjcwIiAKICAgICAgICAgIGZvbnQtd2VpZ2h0PSJib2xkIiAKICAgICAgICAgIGZpbGw9IiM0OTUwNTciIAogICAgICAgICAgdGV4dC1hbmNob3I9Im1pZGRsZSIgCiAgICAgICAgICBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+56CyPC90ZXh0Pgo8L3N2Zz4=",Oh="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICAgIDx0ZXh0IHg9IjUwIiB5PSI1MCIgCiAgICAgICAgICBmb250LWZhbWlseT0iJ1NpbVN1bicsICflrovkvZMnLCBzZXJpZiIgCiAgICAgICAgICBmb250LXNpemU9IjcwIiAKICAgICAgICAgIGZvbnQtd2VpZ2h0PSJib2xkIiAKICAgICAgICAgIGZpbGw9IiNkYzM1NDUiIAogICAgICAgICAgdGV4dC1hbmNob3I9Im1pZGRsZSIgCiAgICAgICAgICBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+5YW1PC90ZXh0Pgo8L3N2Zz4=",Du="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICAgIDx0ZXh0IHg9IjUwIiB5PSI1MCIgCiAgICAgICAgICBmb250LWZhbWlseT0iJ1NpbVN1bicsICflrovkvZMnLCBzZXJpZiIgCiAgICAgICAgICBmb250LXNpemU9IjcwIiAKICAgICAgICAgIGZvbnQtd2VpZ2h0PSJib2xkIiAKICAgICAgICAgIGZpbGw9IiM0OTUwNTciIAogICAgICAgICAgdGV4dC1hbmNob3I9Im1pZGRsZSIgCiAgICAgICAgICBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+5Y2SPC90ZXh0Pgo8L3N2Zz4=",Mh={GENERAL_RED:Ru,GENERAL_BLACK:Tu,ADVISOR_RED:Ah,ADVISOR_BLACK:xh,ELEPHANT_RED:Eh,ELEPHANT_BLACK:_h,CHARIOT_RED:Rh,CHARIOT_BLACK:Th,HORSE_RED:ju,HORSE_BLACK:jh,CANNON_RED:Dh,CANNON_BLACK:wh,SOLDIER_RED:Oh,SOLDIER_BLACK:Du},dy=o=>Mh[o]||null,fy=Object.freeze(Object.defineProperty({__proto__:null,ADVISOR_BLACK:xh,ADVISOR_RED:Ah,CANNON_BLACK:wh,CANNON_RED:Dh,CHARIOT_BLACK:Th,CHARIOT_RED:Rh,ELEPHANT_BLACK:_h,ELEPHANT_RED:Eh,GENERAL_BLACK:Tu,GENERAL_RED:Ru,HORSE_BLACK:jh,HORSE_RED:ju,SOLDIER_BLACK:Du,SOLDIER_RED:Oh,default:Mh,getPieceAsset:dy},Symbol.toStringTag,{value:"Module"})),wu="/assets/GENERAL_RED-BzstVDtO.svg",Ou="/assets/GENERAL_BLACK-Cq1E9aiP.svg",zh="/assets/ADVISOR_RED-D5BR3OSL.svg",Lh="/assets/ADVISOR_BLACK-Ci-Q6UeK.svg",Hh="/assets/ELEPHANT_RED-CMPdiypw.svg",Ih="/assets/ELEPHANT_BLACK-CZ7CYkBU.svg",Bh="/assets/CHARIOT_RED-_gXviMIh.svg",Uh="/assets/CHARIOT_BLACK-D_175MVG.svg",Vh="/assets/HORSE_RED-ClTOibxc.svg",qh="/assets/HORSE_BLACK-COwrpbbf.svg",Gh="/assets/CANNON_RED-CMtXwYbO.svg",Mu="/assets/CANNON_BLACK-BDKMai1i.svg",Zh="/assets/SOLDIER_RED-CLAgwBdt.svg",zu="/assets/SOLDIER_BLACK-C9Z77c8L.svg",kh={GENERAL_RED:wu,GENERAL_BLACK:Ou,ADVISOR_RED:zh,ADVISOR_BLACK:Lh,ELEPHANT_RED:Hh,ELEPHANT_BLACK:Ih,CHARIOT_RED:Bh,CHARIOT_BLACK:Uh,HORSE_RED:Vh,HORSE_BLACK:qh,CANNON_RED:Gh,CANNON_BLACK:Mu,SOLDIER_RED:Zh,SOLDIER_BLACK:zu},hy=o=>kh[o]||null,my=Object.freeze(Object.defineProperty({__proto__:null,ADVISOR_BLACK:Lh,ADVISOR_RED:zh,CANNON_BLACK:Mu,CANNON_RED:Gh,CHARIOT_BLACK:Uh,CHARIOT_RED:Bh,ELEPHANT_BLACK:Ih,ELEPHANT_RED:Hh,GENERAL_BLACK:Ou,GENERAL_RED:wu,HORSE_BLACK:qh,HORSE_RED:Vh,SOLDIER_BLACK:zu,SOLDIER_RED:Zh,default:kh,getPieceAsset:hy},Symbol.toStringTag,{value:"Module"})),Lu="/assets/GENERAL_RED-dvPhzr-G.svg",Hu="/assets/GENERAL_BLACK-CXuFrJCy.svg",Xh="/assets/ADVISOR_RED-Dc33oXc0.svg",Yh="/assets/ADVISOR_BLACK-DuWRQNTP.svg",Kh="/assets/ELEPHANT_RED-DiMaxdpD.svg",Qh="/assets/ELEPHANT_BLACK-nh0Os0O5.svg",Iu="/assets/HORSE_RED-SiKSOUuT.svg",$h="/assets/HORSE_BLACK-C6QBOuQ8.svg",Ph="/assets/CHARIOT_RED-0uQT_jHK.svg",Jh="/assets/CHARIOT_BLACK-C3oSxGaB.svg",Wh="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='512'%20height='512'%20viewBox='0%200%20512%20512'%20version='1.1'%3e%3cpath%20d=''%20stroke='none'%20fill='%23dc3545'%20fill-rule='evenodd'/%3e%3cpath%20d='M%20173.577%2052.071%20C%20151.365%2055.145,%20119.694%2066.388,%20118.368%2071.670%20C%20118.043%2072.966,%20118.268%2074.618,%20118.868%2075.341%20C%20120.164%2076.903,%20114.684%20336.778,%20113.329%20337.973%20C%20112.873%20338.375,%2099.161%20349.558,%2082.858%20362.823%20C%2060.332%20381.152,%2052.950%20387.705,%2052.108%20390.120%20C%2048.060%20401.732,%2055.656%20417.617,%2074%20435.899%20C%2084.729%20446.591,%2092.761%20452.831,%20101.444%20457.220%20C%20108.408%20460.740,%20117.315%20461.941,%20122.017%20459.993%20C%20124.147%20459.111,%20132.603%20449.563,%20149.302%20429.184%20C%20162.611%20412.943,%20173.774%20399.246,%20174.108%20398.747%20C%20174.449%20398.239,%20214.275%20397.020,%20264.608%20395.977%20C%20410.719%20392.949,%20434.202%20392.659,%20437.195%20393.843%20C%20441.131%20395.399,%20443.039%20393.225,%20447.925%20381.621%20C%20456.251%20361.842,%20459.838%20345.376,%20460.711%20322.930%20C%20461.970%20290.557,%20454.965%20257.493,%20439.394%20222.305%20C%20431.929%20205.435,%20417.993%20180.350,%20415.090%20178.556%20C%20414.153%20177.977,%20375%20213.513,%20375%20214.942%20C%20375%20215.361,%20377.752%20218.808,%20381.117%20222.602%20C%20414.990%20260.805,%20432.430%20300.233,%20436.175%20347.080%20C%20437.171%20359.545,%20436.167%20384.166,%20434.598%20385.735%20C%20434.159%20386.175,%20381.090%20387.364,%20246.500%20389.951%20C%20215.700%20390.543,%20188.094%20391.255,%20185.154%20391.534%20L%20179.808%20392.040%20185.866%20384.770%20L%20191.925%20377.500%20183.729%20369.244%20C%20179.221%20364.704,%20175.212%20361.104,%20174.820%20361.244%20C%20174.428%20361.385,%20163.396%20371.879,%20150.304%20384.563%20C%20137.212%20397.248,%20125.659%20407.942,%20124.630%20408.328%20C%20123.172%20408.875,%20120.693%20407.002,%20113.380%20399.830%20C%20107.245%20393.814,%20104%20389.880,%20104%20388.461%20C%20104%20386.987,%20110.985%20379.087,%20125.750%20363.859%20C%20137.713%20351.522,%20148.373%20340.414,%20149.440%20339.175%20L%20151.379%20336.923%20143.029%20328.529%20L%20134.678%20320.135%20127.189%20326.254%20L%20119.699%20332.374%20120.333%20314.937%20C%20120.681%20305.347,%20121.944%20248,%20123.139%20187.500%20C%20124.334%20127,%20125.408%2077.371,%20125.527%2077.212%20C%20125.645%2077.054,%20132.351%2076.405,%20140.428%2075.770%20C%20180.264%2072.636,%20222.797%2084.139,%20259.121%20107.870%20C%20270.494%20115.300,%20282.623%20124.681,%20290.702%20132.296%20C%20293.563%20134.992,%20296.379%20137.040,%20296.959%20136.847%20C%20298.242%20136.419,%20334.015%2098.027,%20333.964%2097.133%20C%20333.917%2096.305,%20317.800%2086.467,%20307%2080.674%20C%20284.142%2068.413,%20254.920%2058.416,%20227.500%2053.476%20C%20216.751%2051.539,%20183.653%2050.677,%20173.577%2052.071%20M%20418.500%2068.898%20C%20399.800%2075.372,%20384.572%2081.006,%20384.661%2081.420%20C%20385.018%2083.097,%20429.331%20128.056,%20430.305%20127.732%20C%20430.884%20127.539,%20436.830%20111.545,%20443.518%2092.190%20C%20453.015%2064.710,%20455.331%2057.014,%20454.089%2057.065%20C%20453.215%2057.100,%20437.200%2062.425,%20418.500%2068.898%20M%20341.251%2097.690%20C%20338.320%2099.322,%20305.779%20134.474,%20180%20271.873%20C%20157.725%20296.206,%20139.334%20316.587,%20139.131%20317.164%20C%20138.712%20318.357,%20152.902%20333,%20154.478%20333%20C%20155.043%20333,%20182.729%20305.037,%20216.003%20270.861%20C%20391.818%2090.273,%20375.128%20107.799,%20373.259%20105.734%20C%20372.331%20104.708,%20368.405%20102.347,%20364.536%20100.487%20C%20355.485%2096.136,%20346.070%2095.005,%20341.251%2097.690%20M%20273.853%20217.776%20C%20209.147%20284.174,%20145.284%20349.672,%20131.936%20363.326%20L%20107.666%20388.151%20115.718%20396.203%20L%20123.770%20404.255%20184.656%20344.877%20C%20233.352%20297.387,%20362.750%20171.360,%20407%20128.326%20L%20415.500%20120.059%20404.016%20108.530%20C%20397.700%20102.188,%20392.300%2097.012,%20392.016%2097.026%20C%20391.732%2097.040,%20338.559%20151.378,%20273.853%20217.776%20M%20322.810%20216.208%20C%20278.089%20259.841,%20227.200%20309.460,%20209.721%20326.470%20L%20177.943%20357.398%20185.721%20365.224%20C%20190%20369.528,%20194.048%20372.926,%20194.719%20372.775%20C%20195.389%20372.624,%20210.884%20358.775,%20229.153%20342%20C%20366.978%20215.444,%20413.192%20172.530,%20414.610%20169.788%20C%20417.293%20164.598,%20415.984%20156.425,%20410.837%20146.242%20C%20408.452%20141.522,%20405.964%20137.484,%20405.310%20137.267%20C%20404.655%20137.050,%20367.530%20172.574,%20322.810%20216.208'%20stroke='none'%20fill='%23dc3545'%20fill-rule='evenodd'/%3e%3c/svg%3e",Fh="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='512'%20height='512'%20viewBox='0%200%20512%20512'%20version='1.1'%3e%3cpath%20d=''%20stroke='none'%20fill='%23495057'%20fill-rule='evenodd'/%3e%3cpath%20d='M%20173.577%2052.071%20C%20151.365%2055.145,%20119.694%2066.388,%20118.368%2071.670%20C%20118.043%2072.966,%20118.268%2074.618,%20118.868%2075.341%20C%20120.164%2076.903,%20114.684%20336.778,%20113.329%20337.973%20C%20112.873%20338.375,%2099.161%20349.558,%2082.858%20362.823%20C%2060.332%20381.152,%2052.950%20387.705,%2052.108%20390.120%20C%2048.060%20401.732,%2055.656%20417.617,%2074%20435.899%20C%2084.729%20446.591,%2092.761%20452.831,%20101.444%20457.220%20C%20108.408%20460.740,%20117.315%20461.941,%20122.017%20459.993%20C%20124.147%20459.111,%20132.603%20449.563,%20149.302%20429.184%20C%20162.611%20412.943,%20173.774%20399.246,%20174.108%20398.747%20C%20174.449%20398.239,%20214.275%20397.020,%20264.608%20395.977%20C%20410.719%20392.949,%20434.202%20392.659,%20437.195%20393.843%20C%20441.131%20395.399,%20443.039%20393.225,%20447.925%20381.621%20C%20456.251%20361.842,%20459.838%20345.376,%20460.711%20322.930%20C%20461.970%20290.557,%20454.965%20257.493,%20439.394%20222.305%20C%20431.929%20205.435,%20417.993%20180.350,%20415.090%20178.556%20C%20414.153%20177.977,%20375%20213.513,%20375%20214.942%20C%20375%20215.361,%20377.752%20218.808,%20381.117%20222.602%20C%20414.990%20260.805,%20432.430%20300.233,%20436.175%20347.080%20C%20437.171%20359.545,%20436.167%20384.166,%20434.598%20385.735%20C%20434.159%20386.175,%20381.090%20387.364,%20246.500%20389.951%20C%20215.700%20390.543,%20188.094%20391.255,%20185.154%20391.534%20L%20179.808%20392.040%20185.866%20384.770%20L%20191.925%20377.500%20183.729%20369.244%20C%20179.221%20364.704,%20175.212%20361.104,%20174.820%20361.244%20C%20174.428%20361.385,%20163.396%20371.879,%20150.304%20384.563%20C%20137.212%20397.248,%20125.659%20407.942,%20124.630%20408.328%20C%20123.172%20408.875,%20120.693%20407.002,%20113.380%20399.830%20C%20107.245%20393.814,%20104%20389.880,%20104%20388.461%20C%20104%20386.987,%20110.985%20379.087,%20125.750%20363.859%20C%20137.713%20351.522,%20148.373%20340.414,%20149.440%20339.175%20L%20151.379%20336.923%20143.029%20328.529%20L%20134.678%20320.135%20127.189%20326.254%20L%20119.699%20332.374%20120.333%20314.937%20C%20120.681%20305.347,%20121.944%20248,%20123.139%20187.500%20C%20124.334%20127,%20125.408%2077.371,%20125.527%2077.212%20C%20125.645%2077.054,%20132.351%2076.405,%20140.428%2075.770%20C%20180.264%2072.636,%20222.797%2084.139,%20259.121%20107.870%20C%20270.494%20115.300,%20282.623%20124.681,%20290.702%20132.296%20C%20293.563%20134.992,%20296.379%20137.040,%20296.959%20136.847%20C%20298.242%20136.419,%20334.015%2098.027,%20333.964%2097.133%20C%20333.917%2096.305,%20317.800%2086.467,%20307%2080.674%20C%20284.142%2068.413,%20254.920%2058.416,%20227.500%2053.476%20C%20216.751%2051.539,%20183.653%2050.677,%20173.577%2052.071%20M%20418.500%2068.898%20C%20399.800%2075.372,%20384.572%2081.006,%20384.661%2081.420%20C%20385.018%2083.097,%20429.331%20128.056,%20430.305%20127.732%20C%20430.884%20127.539,%20436.830%20111.545,%20443.518%2092.190%20C%20453.015%2064.710,%20455.331%2057.014,%20454.089%2057.065%20C%20453.215%2057.100,%20437.200%2062.425,%20418.500%2068.898%20M%20341.251%2097.690%20C%20338.320%2099.322,%20305.779%20134.474,%20180%20271.873%20C%20157.725%20296.206,%20139.334%20316.587,%20139.131%20317.164%20C%20138.712%20318.357,%20152.902%20333,%20154.478%20333%20C%20155.043%20333,%20182.729%20305.037,%20216.003%20270.861%20C%20391.818%2090.273,%20375.128%20107.799,%20373.259%20105.734%20C%20372.331%20104.708,%20368.405%20102.347,%20364.536%20100.487%20C%20355.485%2096.136,%20346.070%2095.005,%20341.251%2097.690%20M%20273.853%20217.776%20C%20209.147%20284.174,%20145.284%20349.672,%20131.936%20363.326%20L%20107.666%20388.151%20115.718%20396.203%20L%20123.770%20404.255%20184.656%20344.877%20C%20233.352%20297.387,%20362.750%20171.360,%20407%20128.326%20L%20415.500%20120.059%20404.016%20108.530%20C%20397.700%20102.188,%20392.300%2097.012,%20392.016%2097.026%20C%20391.732%2097.040,%20338.559%20151.378,%20273.853%20217.776%20M%20322.810%20216.208%20C%20278.089%20259.841,%20227.200%20309.460,%20209.721%20326.470%20L%20177.943%20357.398%20185.721%20365.224%20C%20190%20369.528,%20194.048%20372.926,%20194.719%20372.775%20C%20195.389%20372.624,%20210.884%20358.775,%20229.153%20342%20C%20366.978%20215.444,%20413.192%20172.530,%20414.610%20169.788%20C%20417.293%20164.598,%20415.984%20156.425,%20410.837%20146.242%20C%20408.452%20141.522,%20405.964%20137.484,%20405.310%20137.267%20C%20404.655%20137.050,%20367.530%20172.574,%20322.810%20216.208'%20stroke='none'%20fill='%23495057'%20fill-rule='evenodd'/%3e%3c/svg%3e",em="/assets/SOLDIER_RED-kjyiCQkr.svg",Bu="/assets/SOLDIER_BLACK-D34te_AK.svg",tm={GENERAL_RED:Lu,GENERAL_BLACK:Hu,ADVISOR_RED:Xh,ADVISOR_BLACK:Yh,ELEPHANT_RED:Kh,ELEPHANT_BLACK:Qh,HORSE_RED:Iu,HORSE_BLACK:$h,CHARIOT_RED:Ph,CHARIOT_BLACK:Jh,CANNON_RED:Wh,CANNON_BLACK:Fh,SOLDIER_RED:em,SOLDIER_BLACK:Bu},gy=o=>tm[o]||null,yy=Object.freeze(Object.defineProperty({__proto__:null,ADVISOR_BLACK:Yh,ADVISOR_RED:Xh,CANNON_BLACK:Fh,CANNON_RED:Wh,CHARIOT_BLACK:Jh,CHARIOT_RED:Ph,ELEPHANT_BLACK:Qh,ELEPHANT_RED:Kh,GENERAL_BLACK:Hu,GENERAL_RED:Lu,HORSE_BLACK:$h,HORSE_RED:Iu,SOLDIER_BLACK:Bu,SOLDIER_RED:em,default:tm,getPieceAsset:gy},Symbol.toStringTag,{value:"Module"})),Aa={classic:{id:"classic",name:"Classic",description:"Traditional Chinese chess pieces with authentic calligraphy",pieceColors:{red:"#dc3545",black:"#495057"},pieceStyle:"classic",pieceAssets:fy,uiElements:{startIcon:{main:Ru,piece1:ju,piece2:Du},lobbyEmpty:Tu}},modern:{id:"modern",name:"Modern",description:"Fresh yellow and blue color scheme",pieceColors:{red:"#ffc107",black:"#0d6efd"},pieceStyle:"modern",pieceAssets:my,uiElements:{startIcon:{main:wu,piece1:Mu,piece2:zu},lobbyEmpty:Ou}},medieval:{id:"medieval",name:"Medieval",description:"European medieval-style pieces with heraldic designs",pieceColors:{red:"#dc3545",black:"#495057"},pieceStyle:"medieval",pieceAssets:yy,uiElements:{startIcon:{main:Lu,piece1:Iu,piece2:Bu},lobbyEmpty:Hu}}},am=()=>{const o=localStorage.getItem("liap-tui-theme");return o&&Aa[o]?Aa[o]:Aa.medieval},vy=o=>Aa[o]?(localStorage.setItem("liap-tui-theme",o),Uu(Aa[o]),!0):(console.error(`Theme ${o} not found`),!1),Uu=o=>{const s=document.documentElement;s.className=`theme-${o.id}`,s.style.setProperty("--piece-color-red",o.pieceColors.red),s.style.setProperty("--piece-color-black",o.pieceColors.black),s.style.setProperty("--ui-piece-red",o.pieceColors.red),s.style.setProperty("--ui-piece-black",o.pieceColors.black)},py=()=>{const o=am();return Uu(o),o},lm=I.createContext();function by({children:o}){const[s,i]=I.useState(()=>am());I.useEffect(()=>{Uu(s)},[s]);const d={currentTheme:s,changeTheme:f=>{const g=Aa[f];if(!g){console.error(`Theme ${f} not found`);return}vy(f),i(g)},themes:Aa};return u.jsx(lm.Provider,{value:d,children:o})}const Es=()=>{const o=I.useContext(lm);if(!o)throw new Error("useTheme must be used within a ThemeProvider");return o},nm=I.memo(({children:o,variant:s="primary",size:i="md",disabled:r=!1,loading:d=!1,onClick:f,className:g="",type:v="button",loadingText:T="Loading...",icon:x=null,fullWidth:N=!1,...p})=>{const _=`
    inline-flex items-center justify-center font-medium rounded-md transform-gpu
    transition-all duration-300 ease-out focus:outline-none focus:ring-2 focus:ring-offset-2
    hover:scale-105 active:scale-95 hover:shadow-lg
    disabled:opacity-50 disabled:cursor-not-allowed disabled:pointer-events-none
    disabled:hover:scale-100 disabled:hover:shadow-none
  `,B={primary:"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 focus:ring-blue-500 shadow-blue-500/25",secondary:"bg-gradient-to-r from-gray-200 to-gray-300 text-gray-900 hover:from-gray-300 hover:to-gray-400 focus:ring-gray-500 shadow-gray-400/25",success:"bg-gradient-to-r from-green-600 to-green-700 text-white hover:from-green-700 hover:to-green-800 focus:ring-green-500 shadow-green-500/25",danger:"bg-gradient-to-r from-red-600 to-red-700 text-white hover:from-red-700 hover:to-red-800 focus:ring-red-500 shadow-red-500/25",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 hover:shadow-gray-300/50 focus:ring-gray-500 border border-gray-300",outline:"bg-transparent border-2 border-blue-600 text-blue-600 hover:bg-blue-50 hover:border-blue-700 focus:ring-blue-500"},X={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},P=[_,B[s],X[i],N&&"w-full",g].filter(Boolean).join(" "),U=k=>{r||d||f?.(k)};return u.jsx("button",{type:v,className:P,disabled:r||d,onClick:U,...p,children:d?u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),u.jsx("span",{children:T})]}):u.jsxs("div",{className:"flex items-center space-x-2",children:[x&&u.jsx("span",{className:"w-4 h-4",children:x}),u.jsx("span",{children:o})]})})});nm.displayName="Button";const Sy=I.forwardRef(({type:o="text",placeholder:s="",value:i,onChange:r,onBlur:d,onFocus:f,disabled:g=!1,required:v=!1,error:T=null,label:x="",helperText:N="",size:p="md",fullWidth:_=!1,className:B="",...X},P)=>{const te=`${`
    border rounded-md transition-all duration-200 focus:outline-none focus:ring-2
    disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-100
    ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-5 py-3 text-lg"}[p]}
    ${_?"w-full":""}
  `} ${T?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-300 focus:border-blue-500 focus:ring-blue-200 hover:border-gray-400"} ${B}`;return u.jsxs("div",{className:_?"w-full":"",children:[x&&u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[x,v&&u.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),u.jsx("input",{ref:P,type:o,placeholder:s,value:i,onChange:r,onBlur:d,onFocus:f,disabled:g,required:v,className:te,...X}),T&&u.jsx("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:T}),N&&!T&&u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:N})]})});Sy.displayName="Input";const sm=({isConnected:o=!1,isConnecting:s=!1,isReconnecting:i=!1,error:r=null,roomId:d=null,showDetails:f=!1,className:g="",disconnectedPlayers:v=[]})=>{const x=r?{status:"error",text:"Connection Error",color:"bg-red-500",icon:"❌"}:i?{status:"reconnecting",text:"Reconnecting...",color:"bg-yellow-500 animate-pulse",icon:"🔄"}:s?{status:"connecting",text:"Connecting...",color:"bg-yellow-500 animate-pulse",icon:"⚡"}:o?{status:"connected",text:"Connected",color:"bg-green-500",icon:"✅"}:{status:"disconnected",text:"Disconnected",color:"bg-gray-500",icon:"⚫"},N=`
    inline-flex items-center space-x-2 px-3 py-1 rounded-full text-sm font-medium text-white
    ${x.color}
  `,p=v.length>0;return u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("div",{className:`${N} ${g}`,children:[u.jsx("span",{className:"text-xs",children:x.icon}),u.jsx("span",{children:x.text}),f&&d&&u.jsxs("span",{className:"text-xs opacity-75",children:["(",d,")"]}),r&&f&&u.jsx("span",{className:"text-xs opacity-75",title:r.message||r,children:"⚠️"})]}),p&&u.jsxs("div",{className:"text-xs text-gray-600 bg-yellow-100 px-3 py-1 rounded-full",children:[u.jsx("span",{className:"mr-1",children:"🤖"}),"AI Playing for: ",v.join(", ")," - Can reconnect anytime"]})]})},As=({children:o,title:s="Liap TUI",showConnection:i=!1,connectionProps:r={},showHeader:d=!0,headerContent:f=null,className:g=""})=>u.jsxs("div",{className:`${g}`,children:[d&&u.jsx("header",{children:u.jsx("div",{children:u.jsxs("div",{children:[u.jsx("div",{children:u.jsx("h1",{children:s})}),u.jsxs("div",{children:[f,i&&u.jsx(sm,{showDetails:!0,...r})]})]})})}),u.jsx("main",{children:o})]}),Qi=({isVisible:o=!1,message:s="Loading...",subtitle:i="",showSpinner:r=!0,overlay:d=!0,className:f=""})=>{if(!o)return null;const g=d?"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-50":"absolute inset-0 bg-white bg-opacity-90 z-10";return u.jsx("div",{className:`${g} flex items-center justify-center ${f} animate-in fade-in duration-300`,children:u.jsx("div",{className:"bg-white rounded-xl shadow-2xl p-8 max-w-sm w-full mx-4 transform-gpu animate-in zoom-in-95 duration-300 delay-100",children:u.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r&&u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),u.jsx("div",{className:"absolute inset-0 w-12 h-12 border-4 border-transparent border-l-blue-400 rounded-full animate-spin animate-reverse"})]}),u.jsxs("div",{className:"text-center animate-in slide-in-from-bottom-4 duration-500 delay-200",children:[u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:s}),i&&u.jsx("p",{className:"text-sm text-gray-500",children:i})]})]})})})};class yn extends Vt.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,i){this.setState({error:s,errorInfo:i})}render(){return this.state.hasError?u.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full",children:[u.jsxs("div",{className:"text-red-600 text-center mb-4",children:[u.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})}),u.jsx("h2",{className:"text-xl font-bold mb-2",children:"Something went wrong"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"An unexpected error occurred. Please try refreshing the page."})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors",children:"Refresh Page"}),u.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"w-full bg-gray-300 text-gray-700 py-2 px-4 rounded hover:bg-gray-400 transition-colors",children:"Try Again"})]}),!1]})}):this.props.children}}var mu={exports:{}},gu,eh;function Cy(){if(eh)return gu;eh=1;var o="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return gu=o,gu}var yu,th;function Ny(){if(th)return yu;th=1;var o=Cy();function s(){}function i(){}return i.resetWarningCache=s,yu=function(){function r(g,v,T,x,N,p){if(p!==o){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}r.isRequired=r;function d(){return r}var f={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:d,element:r,elementType:r,instanceOf:d,node:r,objectOf:d,oneOf:d,oneOfType:d,shape:d,exact:d,checkPropTypes:i,resetWarningCache:s};return f.PropTypes=f,f},yu}var ah;function Ay(){return ah||(ah=1,mu.exports=Ny()()),mu.exports}var xy=Ay();const y=Zg(xy);function vn({isConnected:o,isConnecting:s,isReconnecting:i,connectionError:r,message:d="Waiting...",phase:f="waiting",onRetry:g,onCancel:v}){return u.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:u.jsxs("div",{className:"rounded-2xl p-8 max-w-md w-full text-center",style:{background:"var(--gradient-white)",boxShadow:"var(--shadow-lg), var(--shadow-inset-white)"},children:[u.jsx("div",{className:"mb-6",children:u.jsx(sm,{isConnected:o,isConnecting:s,isReconnecting:i,error:r})}),u.jsxs("div",{className:"mb-8",children:[u.jsx("div",{className:"text-6xl mb-4",children:Ey(f)}),u.jsx("h1",{className:"text-2xl font-bold mb-2",style:{color:"var(--color-gray-700)"},children:_y(f)}),u.jsx("p",{className:"text-lg",style:{color:"var(--color-gray-500)"},children:d})]}),(s||i)&&u.jsx("div",{className:"mb-6",children:u.jsx(Qi,{message:i?"Reconnecting...":"Connecting..."})}),r&&u.jsxs("div",{className:"mb-6 p-4 rounded-lg",style:{backgroundColor:"rgba(220, 53, 69, 0.1)",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[u.jsxs("div",{className:"text-sm mb-3",style:{color:"var(--color-danger)"},children:["Connection Error: ",r]}),g&&u.jsx("button",{onClick:g,className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors text-white",style:{background:"var(--gradient-danger)"},onMouseOver:T=>T.target.style.background="var(--color-danger-dark)",onMouseOut:T=>T.target.style.background="var(--gradient-danger)","aria-label":"Retry connection",children:"Retry Connection"})]}),!r&&!s&&!i&&u.jsx("div",{className:"mb-6",children:u.jsx("div",{className:"waiting-dots",children:[0,1,2].map(T=>u.jsx("div",{className:"waiting-dot"},T))})}),u.jsxs("div",{className:"text-sm space-y-1",style:{color:"var(--color-gray-600)"},children:[u.jsxs("div",{children:["Phase:"," ",u.jsx("span",{className:"font-medium",style:{color:"var(--color-gray-500)"},children:f})]}),u.jsxs("div",{children:["Status:"," ",u.jsx("span",{className:"font-medium",style:{color:"var(--color-gray-500)"},children:Ry(o,s,i,r)})]})]}),v&&u.jsx("div",{className:"mt-6",children:u.jsx("button",{onClick:v,className:"text-sm underline transition-colors",style:{color:"var(--color-gray-400)"},onMouseOver:T=>T.target.style.color="var(--color-gray-600)",onMouseOut:T=>T.target.style.color="var(--color-gray-400)","aria-label":"Cancel and return",children:"Cancel"})})]})})}function Ey(o){switch(o){case"waiting":return"⏳";case"preparation":return"🃏";case"declaration":return"🎯";case"turn":return"🎮";case"scoring":return"🏆";default:return"⏳"}}function _y(o){switch(o){case"waiting":return"Waiting for Game";case"preparation":return"Preparing Cards";case"declaration":return"Making Declarations";case"turn":return"Playing Turn";case"scoring":return"Calculating Scores";default:return"Waiting"}}function Ry(o,s,i,r){return r?"Error":i?"Reconnecting":s?"Connecting":o?"Connected":"Disconnected"}vn.propTypes={isConnected:y.bool.isRequired,isConnecting:y.bool,isReconnecting:y.bool,connectionError:y.string,message:y.string,phase:y.oneOf(["waiting","preparation","declaration","turn","scoring"]),onRetry:y.func,onCancel:y.func};vn.defaultProps={isConnecting:!1,isReconnecting:!1,connectionError:null,message:"Waiting...",phase:"waiting",onRetry:null,onCancel:null};const Ty="/assets/bot-B5pOzJH9.svg",jy="/assets/human-BFXvWqJg.svg",Cl=({name:o,isBot:s=!1,isThinking:i=!1,className:r="",size:d="medium",theme:f="default",isDisconnected:g=!1,showAIBadge:v=!1,avatarColor:T=null})=>{console.log("🎨 PlayerAvatar received:",{name:o,isBot:s,avatarColor:T});const x=()=>{switch(d){case"mini":return"player-avatar--mini";case"small":return"player-avatar--small";case"large":return"player-avatar--large";default:return"player-avatar--medium"}},N=()=>f==="yellow"?"player-avatar--yellow":"",p=()=>{if(!s&&T){const _=`player-avatar--color-${T}`;return console.log(`🎨 PlayerAvatar ${o} color class:`,_),_}return""};return s?u.jsxs("div",{className:"player-avatar-wrapper",children:[u.jsx("div",{className:`player-avatar player-avatar--bot ${x()} ${N()} ${p()} ${i?"thinking":""} ${g?"disconnected":""} ${r}`,children:u.jsx("img",{src:Ty,alt:"Bot",className:"bot-icon"})}),v&&u.jsx("div",{className:"ai-badge",children:"AI"})]}):u.jsxs("div",{className:"player-avatar-wrapper",children:[u.jsx("div",{className:`player-avatar ${x()} ${N()} ${p()} ${g?"disconnected":""} ${r}`,children:u.jsx("img",{src:jy,alt:o,className:"human-icon"})}),g&&u.jsx("div",{className:"disconnect-badge",children:"🔴"})]})};Cl.propTypes={name:y.string.isRequired,isBot:y.bool,isThinking:y.bool,className:y.string,size:y.oneOf(["mini","small","medium","large"]),theme:y.oneOf(["default","yellow"]),isDisconnected:y.bool,showAIBadge:y.bool,avatarColor:y.string};const Vi={GENERAL_RED:"帥",GENERAL_BLACK:"將",ADVISOR_RED:"仕",ADVISOR_BLACK:"士",ELEPHANT_RED:"相",ELEPHANT_BLACK:"象",CHARIOT_RED:"俥",CHARIOT_BLACK:"車",HORSE_RED:"傌",HORSE_BLACK:"馬",CANNON_RED:"炮",CANNON_BLACK:"砲",SOLDIER_RED:"兵",SOLDIER_BLACK:"卒"},lh={GENERAL:"帥/將",ADVISOR:"仕/士",ELEPHANT:"相/象",CHARIOT:"俥/車",HORSE:"傌/馬",CANNON:"炮/砲",SOLDIER:"兵/卒"};function Vu(o){if(typeof o=="object"&&o!==null&&o.kind)return o;if(typeof o=="string"){const s=o.match(/^([A-Z]+)_([A-Z]+)\((\d+)\)$/);if(s){const[,i,r,d]=s;return{kind:i,color:r.toLowerCase(),value:parseInt(d,10)}}}return{kind:"UNKNOWN",color:"black",value:0}}function nh(o){const s=Vu(o);if(!s||!s.kind)return"?";const i=`${s.kind}_${s.color?.toUpperCase()}`;if(Vi[i])return Vi[i];if(Vi[s.kind])return Vi[s.kind];const r=s.kind.replace(/_RED|_BLACK/i,"");if(lh[r]){const d=lh[r].split("/");return s.color?.toLowerCase()==="red"?d[0]:d[1]||d[0]}return s.kind.charAt(0).toUpperCase()}function sh(o){if(o&&o.color)return`piece-${o.color.toLowerCase()}`;const s=Vu(o);return!s||!s.color?"piece-unknown":`piece-${s.color.toLowerCase()}`}function Dy(o){const s=Vu(o);return s.value===void 0||s.value===null?"0":s.value.toString()}function ih(o,s){if(!o||!o.kind||!s||!s.pieceAssets)return null;const i=`${o.kind}_${o.color.toUpperCase()}`;return s.pieceAssets[i]||null}const fe=({piece:o,size:s="medium",variant:i="default",selected:r=!1,flipped:d=!1,flippable:f=!1,showValue:g=!1,onClick:v,className:T="",animationDelay:x})=>{const{currentTheme:N}=Es(),p=["game-piece",`game-piece--${s}`,`game-piece--${i}`,sh(o),r&&"selected",f&&"flippable",d&&"flipped",T].filter(Boolean).join(" "),_={};return x!==void 0&&(_.animationDelay=`${x}s`),f?u.jsxs("div",{className:p,onClick:v,style:_,title:T.includes("invalid-play")?"Play type doesn't match":"",children:[u.jsx("div",{className:"game-piece__face game-piece__face--back"}),u.jsx("div",{className:`game-piece__face game-piece__face--front ${sh(o)}`,children:u.jsx("img",{src:ih(o,N),alt:nh(o)})})]}):u.jsxs("div",{className:p,onClick:v,style:_,children:[u.jsx("div",{className:"game-piece__character",children:u.jsx("img",{src:ih(o,N),alt:nh(o)})}),g&&u.jsx("div",{className:"game-piece__value",children:Dy(o)})]})};fe.propTypes={piece:y.shape({kind:y.string,color:y.string,value:y.number}).isRequired,size:y.oneOf(["mini","small","medium","large"]),variant:y.oneOf(["default","table","selectable","dealing"]),selected:y.bool,flipped:y.bool,flippable:y.bool,showValue:y.bool,onClick:y.func,className:y.string,animationDelay:y.number};const $i=({pieces:o=[],variant:s="default",onPieceClick:i,selectedPieces:r=[],showValues:d=!0,animateAppear:f=!1,animationType:g="bounce",className:v=""})=>{const T=["piece-tray",s==="active"&&"piece-tray--active",s==="fixed"&&"piece-tray--fixed",v].filter(Boolean).join(" "),x=(p,_)=>{i&&i(p,_)},N=(p,_)=>{if(!r.length)return!1;const B=`${_}-${p.kind}-${p.color}`;return r.some(X=>X.id===B||X===B)};return u.jsx("div",{className:T,children:u.jsx("div",{className:"piece-tray__inner",children:u.jsx("div",{className:"piece-tray__grid",children:o.map((p,_)=>{const B=!!i,X=N(p,_);let P="default";f&&g==="verticalDrop"?P="dealing":B&&(P="selectable");const U=f?g==="verticalDrop"?_*.08:_*.1:void 0;return u.jsx(fe,{piece:p,size:"large",variant:P,selected:X,showValue:d,onClick:B?()=>x(p,_):null,animationDelay:U},_)})})})})};$i.propTypes={pieces:y.arrayOf(y.shape({type:y.string,color:y.string,value:y.number})),variant:y.oneOf(["default","active","fixed"]),onPieceClick:y.func,selectedPieces:y.array,showValues:y.bool,animateAppear:y.bool,animationType:y.oneOf(["bounce","verticalDrop"]),className:y.string};const _s=({duration:o=5,onComplete:s,prefix:i="",suffix:r="seconds",variant:d="inline",className:f=""})=>{const[g,v]=I.useState(o);I.useEffect(()=>{const x=setInterval(()=>{v(N=>N<=1?(clearInterval(x),s&&s(),0):N-1)},1e3);return()=>clearInterval(x)},[s]);const T=["footer-timer",`footer-timer--${d}`,f].filter(Boolean).join(" ");return u.jsx("div",{className:T,children:u.jsxs("span",{className:"footer-timer__text",children:[i&&u.jsxs("span",{className:"footer-timer__prefix",children:[i," "]}),u.jsx("span",{className:"footer-timer__count",children:g}),r&&u.jsxs("span",{className:"footer-timer__suffix",children:[" ",r]})]})})};_s.propTypes={duration:y.number,onComplete:y.func,prefix:y.string,suffix:y.string,variant:y.oneOf(["inline","footer"]),className:y.string};const im=({myHand:o=[],players:s=[],weakHands:i=[],redealMultiplier:r=1,currentWeakPlayer:d,isMyDecision:f=!1,isMyHandWeak:g=!1,handValue:v=0,highestCardValue:T=0,simultaneousMode:x=!1,weakPlayersAwaiting:N=[],decisionsReceived:p=0,decisionsNeeded:_=0,dealingCards:B=!1,onAcceptRedeal:X,onDeclineRedeal:P})=>{const[U,k]=I.useState(!0),[Y,te]=I.useState(!1),[L,G]=I.useState(0);I.useEffect(()=>{const J=setTimeout(()=>{k(!1)},Tt.DEALING_ANIMATION_DURATION);return()=>{clearTimeout(J)}},[]),I.useEffect(()=>{B===!0&&!U&&(te(!0),G(J=>J+1))},[B,U]),I.useEffect(()=>{if(Y){const J=setTimeout(()=>{te(!1)},Tt.DEALING_ANIMATION_DURATION);return()=>{clearTimeout(J)}}},[Y,g,N]);const Z=()=>!U&&!Y&&g?x?!0:f:!1;return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"content-section",children:U||Y?u.jsxs("div",{className:"dealing-container",children:[u.jsxs("div",{className:"dealing-icon",children:[u.jsx("div",{className:"card-stack"}),u.jsx("div",{className:"card-stack"}),u.jsx("div",{className:"card-stack"})]}),u.jsx("div",{className:"dealing-message",children:Y?"Redealing Cards":"Dealing Cards"}),u.jsx("div",{className:"dealing-status",children:"Please wait while cards are being dealt..."}),u.jsx("div",{className:"progress-container",children:u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-fill"})})})]}):u.jsxs(u.Fragment,{children:[Z()&&u.jsxs("div",{className:"weak-hand-alert show",children:[u.jsx("div",{className:"alert-title",children:"⚠️ Weak Hand Detected"}),u.jsxs("div",{className:"alert-message",children:["No piece greater than ",T," points. Would you like to request a redeal?",u.jsxs("div",{className:"multiplier-warning",children:["Warning: ",r+1,"x penalty if you redeal!"]})]}),u.jsxs("div",{className:"alert-buttons",children:[u.jsx("button",{className:"alert-button primary",onClick:X,children:"Request Redeal"}),u.jsx("button",{className:"alert-button secondary",onClick:P,children:"Keep Hand"})]})]}),x&&N.length>0&&!f&&u.jsxs("div",{className:"waiting-indicator",children:[u.jsx("div",{className:"waiting-text",children:"Waiting for weak hand decisions..."}),u.jsxs("div",{className:"waiting-progress",children:[p," of ",_," players decided"]})]})]})}),u.jsx($i,{pieces:o,variant:"fixed",showValues:!0,animateAppear:!0,animationType:"verticalDrop"},`deal-${L}`)]})};im.propTypes={myHand:y.array,players:y.array,weakHands:y.array,redealMultiplier:y.number,currentWeakPlayer:y.string,isMyDecision:y.bool,isMyHandWeak:y.bool,handValue:y.number,highestCardValue:y.number,simultaneousMode:y.bool,weakPlayersAwaiting:y.array,decisionsReceived:y.number,decisionsNeeded:y.number,dealingCards:y.bool,onAcceptRedeal:y.func,onDeclineRedeal:y.func};function qu({myHand:o=[],players:s=[],weakHands:i=[],redealMultiplier:r=1,currentWeakPlayer:d=null,isMyDecision:f=!1,isMyHandWeak:g=!1,handValue:v=0,highestCardValue:T=0,simultaneousMode:x=!1,weakPlayersAwaiting:N=[],decisionsReceived:p=0,decisionsNeeded:_=0,dealingCards:B=!1,onAcceptRedeal:X,onDeclineRedeal:P}){return u.jsx(im,{myHand:o,players:s,weakHands:i,redealMultiplier:r,currentWeakPlayer:d,isMyDecision:f,isMyHandWeak:g,handValue:v,highestCardValue:T,simultaneousMode:x,weakPlayersAwaiting:N,decisionsReceived:p,decisionsNeeded:_,dealingCards:B,onAcceptRedeal:X,onDeclineRedeal:P})}qu.propTypes={myHand:y.arrayOf(y.shape({type:y.string.isRequired,color:y.oneOf(["red","black"]).isRequired,value:y.number.isRequired})),players:y.arrayOf(y.shape({name:y.string.isRequired,isActive:y.bool})).isRequired,weakHands:y.arrayOf(y.string),redealMultiplier:y.number,currentWeakPlayer:y.string,isMyDecision:y.bool.isRequired,isMyHandWeak:y.bool,handValue:y.number,highestCardValue:y.number,simultaneousMode:y.bool,weakPlayersAwaiting:y.arrayOf(y.string),decisionsReceived:y.number,decisionsNeeded:y.number,dealingCards:y.bool,onAcceptRedeal:y.func,onDeclineRedeal:y.func};qu.defaultProps={myHand:[],weakHands:[],redealMultiplier:1,currentWeakPlayer:null,isMyHandWeak:!1,handValue:0,highestCardValue:0,simultaneousMode:!1,weakPlayersAwaiting:[],decisionsReceived:0,decisionsNeeded:0,dealingCards:!1,onAcceptRedeal:()=>{},onDeclineRedeal:()=>{}};const rm=({myHand:o=[],players:s=[],currentPlayer:i="",myName:r="",declarations:d={},totalDeclared:f=0,consecutiveZeros:g=0,redealMultiplier:v=1,onDeclare:T})=>{const[x,N]=I.useState(null),[p,_]=I.useState(!1),B=i===r;I.useEffect(()=>{B?_(!0):(_(!1),N(null))},[B]);const P=(()=>{const L={message:"Declare your target pile count",disabledValues:[]};if(Object.keys(d).length===s.length-1){const J=8-f;J>=0&&J<=8&&(L.disabledValues.push(J),L.message="The total number cannot be 8")}return g>=2&&(L.disabledValues.push(0),L.message="No third consecutive 0"),L})(),U=L=>{const G=L.name;if(d[G]!==void 0)return{type:"declared",value:d[G]};if(G===i)return{type:"current",text:"Declaring"};{const Z=s.findIndex(ge=>ge.name===i),J=s.findIndex(ge=>ge.name===G);return Z!==-1&&J!==-1&&J===Z+1?{type:"pending",text:"Next"}:{type:"waiting",text:"Waiting"}}},k=L=>{P.disabledValues.includes(L)||N(L)},Y=()=>{x!==null&&T&&T(x)},te=()=>{N(null)};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"dec-game-status-section",children:u.jsx("div",{className:"dec-players-list",children:s.map(L=>{console.log("🎨 Declaration player data:",L.name,"avatar_color:",L.avatar_color,"is_bot:",L.is_bot,"full player:",L);const G=L.name,Z=G,J=U(L),ge=G===i,Ae=J.type==="declared";return u.jsxs("div",{className:`dec-player-row ${ge?"current-turn":""} ${Ae?"declared":""}`,children:[u.jsx(Cl,{name:Z,isBot:L.is_bot,isThinking:ge&&L.is_bot,avatarColor:L.avatar_color,size:"large"}),u.jsx("div",{className:"dec-player-info",children:u.jsxs("div",{className:"dec-player-name",children:[Z,G===r?" (You)":""]})}),u.jsx("div",{className:"dec-player-status",children:J.type==="declared"?u.jsx("div",{className:"dec-declared-value",children:J.value}):u.jsx("div",{className:`dec-status-badge ${J.type}`,children:J.text})})]},G)})})}),u.jsxs("div",{className:`dec-panel ${p?"show":""}`,children:[u.jsx("div",{className:"dec-options",children:[0,1,2,3,4,5,6,7,8].map(L=>{const G=P.disabledValues.includes(L),Z=x===L;return u.jsx("button",{className:`dec-option ${Z?"selected":""} ${G?"disabled":""}`,onClick:()=>k(L),disabled:G,children:L},L)})}),u.jsxs("div",{className:"dec-actions",children:[u.jsx("button",{className:"dec-action-btn",onClick:Y,disabled:x===null,children:"Confirm"}),u.jsx("button",{className:"dec-action-btn secondary",onClick:te,children:"Clear"})]})]}),u.jsx($i,{pieces:o,showValues:!0})]})};rm.propTypes={myHand:y.array,players:y.array,currentPlayer:y.string,myName:y.string,declarations:y.object,totalDeclared:y.number,consecutiveZeros:y.number,redealMultiplier:y.number,onDeclare:y.func};function cm({myHand:o=[],declarations:s={},players:i=[],currentTotal:r=0,isMyTurn:d=!1,validOptions:f=[],declarationProgress:g={declared:0,total:4},isLastPlayer:v=!1,estimatedPiles:T=0,handStrength:x=0,currentPlayer:N="",myName:p="",consecutiveZeros:_=0,redealMultiplier:B=1,onDeclare:X}){return u.jsx(rm,{myHand:o,players:i,currentPlayer:N,myName:p,declarations:s,totalDeclared:r,consecutiveZeros:_,redealMultiplier:B,onDeclare:X})}cm.propTypes={myHand:y.array,declarations:y.object,players:y.array,currentTotal:y.number,isMyTurn:y.bool,validOptions:y.array,declarationProgress:y.shape({declared:y.number,total:y.number}),isLastPlayer:y.bool,estimatedPiles:y.number,handStrength:y.number,currentPlayer:y.string,myName:y.string,consecutiveZeros:y.number,redealMultiplier:y.number,onDeclare:y.func};function gn(o){return{SINGLE:"Single",PAIR:"Pair",THREE_OF_A_KIND:"Three of a Kind",STRAIGHT:"Straight",FOUR_OF_A_KIND:"Four of a Kind",EXTENDED_STRAIGHT:"Extended Straight",EXTENDED_STRAIGHT_5:"Five-Card Straight",FIVE_OF_A_KIND:"Five of a Kind",DOUBLE_STRAIGHT:"Double Straight",INVALID:"Invalid Play",UNKNOWN:"Unknown"}[o]||o}const rh={GENERAL:14,ADVISOR:13,SOLDIER:11,ELEPHANT:10,CHARIOT:9,CANNON:8,HORSE:7};function xa(o){return o.value!==void 0?o.value:o.kind&&rh[o.kind]?rh[o.kind]:0}function wy(o){return o.length!==2?!1:xa(o[0])===xa(o[1])}function Oy(o){if(o.length!==3)return!1;const s=xa(o[0]);return o.every(i=>xa(i)===s)}function My(o){const s=o.map(r=>r.kind),i=[["GENERAL","ADVISOR","ELEPHANT"],["CHARIOT","HORSE","CANNON"]];return o.every(r=>r.color===o[0].color)&&i.some(r=>s.sort().join()===r.sort().join())}function zy(o){if(o.length!==4)return!1;const s=xa(o[0]),i=o.every(r=>xa(r)===s);return console.log("[isFourOfAKind] Check:",{firstPieceValue:s,allPieceValues:o.map(r=>xa(r)),result:i}),i}function Ly(o){const s=o[0].color,i=o.map(f=>f.kind),r={};i.forEach(f=>r[f]=(r[f]||0)+1);const d=[["GENERAL","ADVISOR","ELEPHANT"],["CHARIOT","HORSE","CANNON"]];return o.every(f=>f.color===s)&&d.some(f=>i.every(g=>f.includes(g))&&Object.keys(r).length===3&&Object.values(r).sort().join()==="1,1,2")}function Hy(o){if(o.length!==5)return!1;const s=xa(o[0]);return o.every(i=>xa(i)===s)}function Iy(o){const s=o[0].color,i=o.map(f=>f.kind),r={};i.forEach(f=>r[f]=(r[f]||0)+1);const d=[["GENERAL","ADVISOR","ELEPHANT"],["CHARIOT","HORSE","CANNON"]];return o.every(f=>f.color===s)&&d.some(f=>i.every(g=>f.includes(g)))&&Object.values(r).sort().join()==="1,2,2"}function By(o){if(o.length!==6)return!1;const s=o[0].color,i=o.map(d=>d.kind),r={};return i.forEach(d=>r[d]=(r[d]||0)+1),o.every(d=>d.color===s)&&Object.keys(r).sort().join()==="CANNON,CHARIOT,HORSE"&&Object.values(r).every(d=>d===2)}function pn(o){if(console.log("[getPlayType] Analyzing pieces:",{count:o?.length,pieces:JSON.stringify(o?.map(s=>({kind:s.kind||s.type,color:s.color,value:s.value})))}),!o||o.length===0)return null;if(o.length===1)return"SINGLE";if(o.length===2&&wy(o))return"PAIR";if(o.length===3){if(Oy(o))return"THREE_OF_A_KIND";if(My(o))return"STRAIGHT"}if(o.length===4){if(zy(o))return console.log("[getPlayType] Detected FOUR_OF_A_KIND"),"FOUR_OF_A_KIND";if(Ly(o))return console.log("[getPlayType] Detected EXTENDED_STRAIGHT"),"EXTENDED_STRAIGHT"}if(o.length===5){if(Hy(o))return"FIVE_OF_A_KIND";if(Iy(o))return"EXTENDED_STRAIGHT_5"}return o.length===6&&By(o)?"DOUBLE_STRAIGHT":null}function Uy(o,s){if(console.log("[doesPlayMatchStarterType] Input:",{starterPlayType:s,pieceCount:o?.length,pieceDetails:JSON.stringify(o?.map(d=>({kind:d.kind||d.type,color:d.color,value:d.value})))}),!o)return console.log("[doesPlayMatchStarterType] Missing pieces, returning false"),!1;if(!s)return console.log("[doesPlayMatchStarterType] Missing starterPlayType, returning false"),!1;const i=pn(o);if(console.log("[doesPlayMatchStarterType] Player play type:",i),!i||i==="INVALID"||i==="UNKNOWN")return console.log("[doesPlayMatchStarterType] Invalid/unknown play type, returning false"),!1;if(s==="SINGLE"&&o.length===1)return console.log("[doesPlayMatchStarterType] Single piece match, returning true"),!0;const r=i===s;return console.log("[doesPlayMatchStarterType] Comparison result:",{playerPlayType:i,starterPlayType:s,matches:r}),r}function um(o,s,i){console.log("[determinePiecesToReveal] Input:",{playerPieces:o,starterPlayType:s,starterName:i});const r=new Set;if(!o)return console.log("[determinePiecesToReveal] Missing playerPieces, returning empty set"),r;let d=s;return!s&&i&&o[i]&&(d=pn(o[i]),console.log("[determinePiecesToReveal] Calculated starter play type from pieces:",{starterName:i,starterPieces:o[i],calculatedType:d})),d?(Object.entries(o).forEach(([f,g])=>{if(console.log(`[determinePiecesToReveal] Checking player: ${f}`,{pieces:g,pieceCount:g?.length}),!g||g.length===0){console.log(`[determinePiecesToReveal] ${f} has no pieces, skipping`);return}if(f===i){console.log(`[determinePiecesToReveal] ${f} is the starter, revealing all pieces`),g.forEach((T,x)=>{r.add(`${f}-${x}`)});return}const v=Uy(g,d);console.log(`[determinePiecesToReveal] ${f} matches starter type: ${v}`),v&&g.forEach((T,x)=>{r.add(`${f}-${x}`)})}),console.log("[determinePiecesToReveal] Final pieces to reveal:",Array.from(r)),r):(console.log("[determinePiecesToReveal] No starter play type available, revealing all pieces"),Object.entries(o).forEach(([f,g])=>{g&&g.length>0&&g.forEach((v,T)=>{r.add(`${f}-${T}`)})}),r)}function qi(o,s,i=0,r=100){const d=s.findIndex(f=>f.name===o);return d===-1?i:i+d*r}const om=({myHand:o=[],players:s=[],currentPlayer:i="",myName:r="",currentPile:d=[],requiredPieceCount:f=0,turnNumber:g=1,playerPieces:v={},lastWinner:T="",playType:x="",playerStats:N={},playerHandSizes:p={},onPlayPieces:_,onPass:B})=>{const[X,P]=I.useState([]),[U,k]=I.useState(!1),[Y,te]=I.useState(new Set),L=I.useRef(!1),G=i===r,Z=s.findIndex(Q=>Q.name===r),J=Q=>{const se=s.findIndex(F=>F.name===Q);if(se===-1)return"bottom";const E=(se-Z+4)%4;return["bottom","right","top","left"][E]};I.useEffect(()=>{k(X.length>0&&G)},[X,G]),I.useEffect(()=>{if(Object.keys(v).filter(E=>v[E]?.length>0).length===s.length&&!L.current){L.current=!0;const E=setTimeout(()=>{console.log("[TurnContent] Determining pieces to reveal:",{playType:x,lastWinner:T,playerPieces:v});const q=um(v,x,T);console.log("[TurnContent] Pieces to reveal:",q),te(q)},Tt.TURN_FLIP_DELAY);return()=>clearTimeout(E)}},[v,s.length,x,T]),I.useEffect(()=>{L.current=!1,te(new Set)},[g]);const ge=(Q,se)=>{if(!G)return;const E=`${se}-${Q.kind}-${Q.color}`;P(q=>{if(q.some(pe=>pe.id===E))return q.filter(pe=>pe.id!==E);const F=Q.originalIndex!==void 0?Q.originalIndex:se,ie={...Q,id:E,index:F,displayIndex:se};return f>0&&q.length>=f?[ie]:f===0&&q.length>=6?q:[...q,ie]})},Ae=()=>{P([])},Ie=()=>G?f===0||f===null?X.length===0?!1:X.length===1?!0:pn(X)!==null:X.length===f:!1,ue=()=>{if(Ie()&&_){const Q=X.map(se=>se.index);_(Q),P([])}},W=Q=>N[Q]||{pilesWon:0,declared:0},me=(Q,se)=>Q===0&&se===0?"pile-status-none":Q===se&&se>0?"pile-status-perfect":Q>se?"pile-status-over":"pile-status-under";return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`turn-indicator ${me(W(r).pilesWon,W(r).declared)}`,children:[W(r).pilesWon,"/",W(r).declared]}),u.jsx("div",{className:"turn-table-section",children:u.jsxs("div",{className:"turn-table-layout",children:[u.jsxs("div",{className:"turn-central-table",children:[u.jsx("div",{className:"turn-table-wood-grain"}),s.map(Q=>{const se=J(Q.name),E=v[Q.name]||[];return E.length>0&&u.jsx("div",{className:`turn-player-pieces-area ${se} ${E.length<=3?"single-line":""}`,children:E.map((F,ie)=>{const pe=`${Q.name}-${ie}`,qe=Y.has(pe),Te=!qe&&L.current,Ee=qi(Q.name,s)/1e3;return u.jsx(fe,{piece:F,size:"mini",variant:"table",flippable:!0,flipped:qe,className:Te?"invalid-play":"",animationDelay:qe?Ee:void 0},ie)})},Q.name)})]}),s.map(Q=>{console.log("🎨 Turn player data:",Q.name,"avatar_color:",Q.avatar_color,"is_bot:",Q.is_bot,"full player:",Q);const se=J(Q.name),E=Q.name===i,q=(v[Q.name]||[]).length>0,F=W(Q.name),ie=p[Q.name]||0,pe=Q.name===r;return se==="bottom"?null:u.jsxs("div",{className:`turn-player-summary-bar ${se} ${E?"active":""} ${q?"played":""} ${pe?"current-user":""}`,children:[u.jsxs("div",{className:"turn-player-summary-content",children:[u.jsx(Cl,{name:Q.name,isBot:Q.is_bot,isThinking:E&&Q.is_bot,avatarColor:Q.avatar_color,size:"mini"}),u.jsx("span",{className:"turn-player-name-short",children:Q.name}),u.jsxs("div",{className:"turn-player-stats-compact",children:[u.jsx("span",{className:`turn-stat-number ${me(F.pilesWon,F.declared)}`,children:F.pilesWon}),u.jsx("span",{className:"turn-stat-separator",children:"/"}),u.jsx("span",{className:"turn-stat-number",children:F.declared})]})]}),u.jsx("div",{className:"turn-status-icons",children:[...Array(Math.min(ie,8))].map((qe,Te)=>u.jsx("span",{className:"turn-status-icon"},Te))})]},Q.name)})]})}),u.jsxs("div",{className:`turn-confirm-panel ${U?"show":""}`,children:[u.jsx("div",{className:"turn-selection-info",children:u.jsx("div",{className:"turn-selection-count",children:(()=>{if(f===0||f===null){if(X.length>=2){const E=pn(X);return E?`✓ Valid ${gn(E)}`:"That's not a valid play"}return"As starter, your play must be valid"}const se=`Must play exactly ${f} piece${f>1?"s":""}`;if(X.length===f){if(f===1)return"✓ Ready to play";const E=pn(X);return E?E===x?`✓ Your ${gn(E)} can compete this turn`:`⚠️ Your ${gn(E)} cannot compete against ${gn(x)}`:`⚠️ Not a ${gn(x||"combination")} - play to forfeit turn`}return se})()})}),u.jsxs("div",{className:"turn-action-buttons",children:[u.jsx("button",{className:"turn-action-button",onClick:ue,disabled:!Ie(),children:"Play Pieces"}),u.jsx("button",{className:"turn-action-button secondary",onClick:Ae,children:"Clear"})]})]}),u.jsx($i,{pieces:o,variant:G?"active":"default",showValues:!0,onPieceClick:G?ge:null,selectedPieces:X})]})};om.propTypes={myHand:y.array,players:y.array,currentPlayer:y.string,myName:y.string,currentPile:y.array,requiredPieceCount:y.number,turnNumber:y.number,playerPieces:y.object,lastWinner:y.string,playType:y.string,playerStats:y.object,playerHandSizes:y.object,onPlayPieces:y.func,onPass:y.func};function dm({myHand:o=[],players:s=[],currentPlayer:i="",playerName:r="",currentPile:d=[],requiredPieceCount:f=0,turnNumber:g=1,piecesWonCount:v={},previousWinner:T="",currentTurnPlays:x=[],playType:N="",declarationData:p={},playerHandSizes:_={},isMyTurn:B=!1,canPlayAnyCount:X=!1,onPlayPieces:P,onPass:U}){const k={};console.log("[TurnUI] Building playerPieces from currentTurnPlays:",x),x.forEach((Z,J)=>{console.log(`[TurnUI] Turn play ${J+1}:`,{player:Z.player,hasPieces:!!Z.pieces,hasCards:!!Z.cards,playType:Z.playType||Z.play_type,isValid:Z.isValid,pieces:Z.pieces?JSON.stringify(Z.pieces):"null",cards:Z.cards?JSON.stringify(Z.cards):"null"})}),x.forEach(Z=>{Z.player&&(Z.pieces||Z.cards)&&(k[Z.player]=Z.pieces||Z.cards)});const Y=N||(()=>{const Z=x.filter(J=>J.isValid!==!1);if(Z.length>0){const J=Z[Z.length-1],ge=J.playType||J.play_type||"";return console.log("[TurnUI] Extracting play type:",{playType:N,currentTurnPlays:x,validPlays:Z,lastPlay:J,extractedType:ge}),ge}return console.log("[TurnUI] No valid plays found, returning empty play type"),""})(),te={};s.forEach(Z=>{te[Z.name]={pilesWon:v[Z.name]||0,declared:p[Z.name]||0}});const L=d.length>0?d:x.reduce((Z,J)=>[...Z,...J.pieces||J.cards||[]],[]),G=X?0:f;return u.jsx(om,{myHand:o,players:s,currentPlayer:i,myName:r,currentPile:L,requiredPieceCount:G,turnNumber:g,playerPieces:k,lastWinner:T,playType:Y,playerStats:te,playerHandSizes:_,onPlayPieces:P,onPass:U})}dm.propTypes={myHand:y.array,players:y.array,currentPlayer:y.string,playerName:y.string,currentPile:y.array,requiredPieceCount:y.number,turnNumber:y.number,piecesWonCount:y.object,previousWinner:y.string,currentTurnPlays:y.array,playType:y.string,declarationData:y.object,playerHandSizes:y.object,isMyTurn:y.bool,canPlayAnyCount:y.bool,onPlayPieces:y.func,onPass:y.func};const fm=({players:o=[],scores:s=[],roundNumber:i=1,redealMultiplier:r=1,myName:d="",onContinue:f})=>{const g=p=>p>0?`+${p}`:p.toString(),v=p=>p.declared===0&&p.actual===0?"value-blue":p.declared===p.actual?"value-positive":"value-negative",T=p=>p.declared===0&&p.actual===0?"value-blue":p.hit?"value-positive":"value-negative",x=p=>p.declared===0&&p.actual===0?"value-blue":p.bonus>0?"value-positive":"value-neutral",N=p=>p.declared===0&&p.actual===0?"value-blue":p.roundScore>0?"value-positive":p.roundScore<0?"value-negative":"value-neutral";return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"sc-scoring-section",children:s.map((p,_)=>{const B=o.find(X=>X.name===p.playerName)||{name:p.playerName};return console.log("🎨 Scoring player data:",B.name,"avatar_color:",B.avatar_color,"is_bot:",B.is_bot,"full player:",B),u.jsxs("div",{className:"sc-score-card",children:[u.jsxs("div",{className:"sc-top-row",children:[u.jsxs("div",{className:"sc-player-info",children:[u.jsx(Cl,{name:B.name,isBot:B.is_bot,avatarColor:B.avatar_color,size:"medium"}),u.jsxs("div",{className:"sc-player-name",children:[B.name,B.name===d?" (You)":""]})]}),u.jsxs("div",{className:"sc-total-score",children:[u.jsx("span",{className:"sc-total-label",children:"Total:"}),u.jsx("span",{className:"sc-total-value neutral",children:p.totalScore})]})]}),u.jsxs("div",{className:"sc-bottom-row",children:[u.jsxs("div",{className:"sc-stat sc-target",children:[u.jsx("span",{className:"sc-stat-label",children:"Target"}),u.jsxs("span",{className:`sc-target-value ${v(p)}`,children:[p.actual,"/",p.declared]})]}),u.jsxs("div",{className:"sc-stat",children:[u.jsx("span",{className:"sc-stat-label",children:p.hit?"Hit":"Penalty"}),u.jsx("span",{className:`sc-stat-value ${T(p)}`,children:g(p.hitValue)})]}),u.jsxs("div",{className:"sc-stat",children:[u.jsx("span",{className:"sc-stat-label",children:"Bonus"}),u.jsx("span",{className:`sc-stat-value ${x(p)}`,children:g(p.bonus)})]}),p.multiplier>1&&u.jsxs("div",{className:"sc-stat",children:[u.jsx("span",{className:"sc-stat-label",children:"Mult"}),u.jsxs("span",{className:"sc-multiplier",children:["×",p.multiplier]})]}),u.jsxs("div",{className:"sc-stat",children:[u.jsx("span",{className:"sc-stat-label",children:"Score"}),u.jsx("span",{className:`sc-stat-value ${N(p)}`,children:g(p.roundScore)})]})]})]},B.name)})}),u.jsx("div",{className:"sc-continue-section",children:u.jsxs("div",{className:"sc-continue-info",children:[u.jsxs("div",{className:"sc-next-round",children:["Starting Round ",i+1]}),u.jsx("div",{className:"sc-auto-continue",children:u.jsx(_s,{prefix:"Continuing in",onComplete:f,variant:"inline"})})]})})]})};fm.propTypes={players:y.array,scores:y.arrayOf(y.shape({playerName:y.string,declared:y.number,actual:y.number,hit:y.bool,hitValue:y.number,bonus:y.number,multiplier:y.number,roundScore:y.number,totalScore:y.number})),roundNumber:y.number,redealMultiplier:y.number,myName:y.string,onContinue:y.func};function Gu({players:o=[],roundScores:s={},totalScores:i={},redealMultiplier:r=1,playersWithScores:d=[],roundNumber:f=1,playerName:g="",gameOver:v=!1,winners:T=[],onStartNextRound:x}){const N=d.length>0?d.map(p=>({playerName:p.name,declared:p.pile_count||0,actual:p.actualPiles||0,hit:p.pile_count===p.actualPiles,hitValue:p.hitValue||(p.pile_count===p.actualPiles?p.pile_count:-Math.abs(p.pile_count-p.actualPiles)),bonus:p.bonus||0,multiplier:r,roundScore:p.roundScore||s[p.name]||0,totalScore:p.totalScore||i[p.name]||0})):o.map(p=>({playerName:p.name,declared:p.pile_count||0,actual:p.actualPiles||0,hit:p.pile_count===p.actualPiles,hitValue:p.pile_count===p.actualPiles?p.pile_count:-Math.abs(p.pile_count-p.actualPiles),bonus:p.pile_count===p.actualPiles?p.pile_count===0?3:5:0,multiplier:r,roundScore:s[p.name]||0,totalScore:i[p.name]||0}));return u.jsx(fm,{players:o,scores:N,roundNumber:f,redealMultiplier:r,myName:g,onContinue:x})}Gu.propTypes={players:y.arrayOf(y.shape({name:y.string.isRequired,pile_count:y.number,actualPiles:y.number})).isRequired,roundScores:y.objectOf(y.number),totalScores:y.objectOf(y.number),redealMultiplier:y.number,roundNumber:y.number,playerName:y.string,playersWithScores:y.arrayOf(y.shape({name:y.string.isRequired,pile_count:y.number,actualPiles:y.number,roundScore:y.number,totalScore:y.number,baseScore:y.number,scoreExplanation:y.string,isWinner:y.bool})),gameOver:y.bool,winners:y.arrayOf(y.string),onStartNextRound:y.func};Gu.defaultProps={players:[],roundScores:{},totalScores:{},redealMultiplier:1,roundNumber:1,playerName:"",playersWithScores:[],gameOver:!1,winners:[],onStartNextRound:null};function Zu(){const[o,s]=I.useState(()=>Ve.getState()),i=I.useRef(o);return I.useEffect(()=>{const r=g=>{i.current!==g&&(i.current=g,s(g))},d=Ve.addListener(r),f=Ve.getState();return i.current!==f&&(i.current=f,s(f)),d},[]),o}function hm(o={}){const s=Zu(),{enableLogging:i=!1,throwOnError:r=!1,validateState:d=!0}=o,f=I.useCallback((L,G)=>{i&&console.log(`🎯 Action: ${L}`,G||"")},[i]),g=I.useCallback((L,G)=>{const Z=G instanceof Error?G.message:"Unknown error";if(console.error(`❌ Action ${L} failed:`,G),r)throw G;return Z},[r]),v=I.useCallback((L,G,Z=!0)=>d?Z&&!s.isConnected?(console.warn(`Cannot ${L}: Not connected to game`),!1):G&&s.phase!==G?(console.warn(`Cannot ${L}: Wrong phase (current: ${s.phase}, required: ${G})`),!1):s.error?(console.warn(`Cannot ${L}: Game has error - ${s.error}`),!1):!0:!0,[s,d]),T=I.useCallback(async(L,G)=>{try{if(f("connectToRoom",{roomId:L,playerName:G}),!L||!G)throw new Error("Room ID and player name are required");await ct.connectToRoom(L,G)}catch(Z){throw g("connectToRoom",Z),Z}},[f,g]),x=I.useCallback(async()=>{try{f("disconnectFromRoom"),await ct.disconnectFromRoom()}catch(L){throw g("disconnectFromRoom",L),L}},[f,g]),N=I.useCallback(async()=>{try{if(f("acceptRedeal"),!v("acceptRedeal","preparation"))return;if(!s.isMyDecision)throw new Error("Not your turn to make redeal decision");Ve.acceptRedeal()}catch(L){if(g("acceptRedeal",L),r)throw L}},[f,v,s.isMyDecision,g,r]),p=I.useCallback(async()=>{try{if(f("declineRedeal"),!v("declineRedeal","preparation"))return;if(!s.isMyDecision)throw new Error("Not your turn to make redeal decision");Ve.declineRedeal()}catch(L){if(g("declineRedeal",L),r)throw L}},[f,v,s.isMyDecision,g,r]),_=I.useCallback(async L=>{try{if(f("makeDeclaration",{value:L}),!v("makeDeclaration","declaration"))return;if(!s.isMyTurn)throw new Error("Not your turn to declare");if(typeof L!="number"||L<0||L>8)throw new Error("Declaration value must be between 0 and 8");const G=Object.keys(s.declarations).length,Z=s.players.length;if(G===Z-1&&Object.values(s.declarations).reduce((Ae,Ie)=>Ae+Ie,0)+L===8)throw new Error("Last player cannot make total equal 8");Ve.makeDeclaration(L)}catch(G){if(g("makeDeclaration",G),r)throw G}},[f,v,s.isMyTurn,s.declarations,s.players.length,g,r]),B=I.useCallback(async L=>{try{if(f("playPieces",{indices:L}),!v("playPieces","turn"))return;if(!s.isMyTurn)throw new Error("Not your turn to play pieces");if(!Array.isArray(L)||L.length===0)throw new Error("Must select at least one piece to play");if(L.some(J=>J<0||J>=s.myHand.length))throw new Error("Invalid piece indices selected");if(s.requiredPieceCount!==null&&L.length!==s.requiredPieceCount)throw new Error(`Must play exactly ${s.requiredPieceCount} pieces`);const Z=Array.from(new Set(L));if(Z.length!==L.length)throw new Error("Cannot play the same piece multiple times");Ve.playPieces(Z)}catch(G){if(g("playPieces",G),r)throw G}},[f,v,s.isMyTurn,s.myHand.length,s.requiredPieceCount,g,r,s]),X=I.useCallback(async()=>{try{if(f("startNextRound"),!v("startNextRound","scoring"))return;if(s.gameOver)throw new Error("Game is over, cannot start next round");Ve.startNextRound()}catch(L){if(g("startNextRound",L),r)throw L}},[f,v,s.gameOver,g,r]),P=I.useCallback(async L=>{try{return f("triggerRecovery",{errorType:L}),await ct.triggerRecovery(L)}catch(G){throw g("triggerRecovery",G),G}},[f,g]),U=I.useCallback(async()=>{try{f("emergencyReset"),await ct.emergencyReset()}catch(L){throw g("emergencyReset",L),L}},[f,g]),k=I.useCallback(()=>{f("refreshState"),ct.getHealthStatus()},[f]),Y=I.useCallback(()=>{f("clearError")},[f]);return I.useMemo(()=>({connectToRoom:T,disconnectFromRoom:x,acceptRedeal:N,declineRedeal:p,makeDeclaration:_,playPieces:B,startNextRound:X,triggerRecovery:P,emergencyReset:U,refreshState:k,clearError:Y}),[T,x,N,p,_,B,X,P,U,k,Y])}function mm(o){const[s,i]=I.useState(()=>Vy(o)),r=I.useCallback(()=>{const d=re.getStatus(),f=ct.getHealthStatus(),g=o?d.rooms[o]:null,v=f.network.healthy,T={isConnected:g?g.connected:f.network.connections>0,isConnecting:g?.status==="connecting"||!1,isReconnecting:g?g.reconnecting:!1,roomId:g?.roomId||null,connectedAt:g?.connectedAt||null,uptime:g?.uptime||null,latency:g?.latency||null,messagesSent:g?.messagesSent||0,messagesReceived:g?.messagesReceived||0,queuedMessages:g?.queueSize||f.network.queuedMessages,status:qy(g,v),error:g||f.network.healthy?null:"Network error",reconnectAttempts:g?.reconnectAttempts||0,lastActivity:g?.lastActivity||null};i(T)},[o]);return I.useEffect(()=>{r();const d=["connected","disconnected","connecting","reconnecting","reconnected","connectionFailed","connectionError","messageSent","messageReceived"],f=()=>{r()};return d.forEach(g=>{re.addEventListener(g,f)}),ct.addEventListener("healthIssue",f),ct.addEventListener("initialized",f),ct.addEventListener("metricsUpdated",f),re.addEventListener("metricsUpdated",f),()=>{d.forEach(g=>{re.removeEventListener(g,f)}),ct.removeEventListener("healthIssue",f),ct.removeEventListener("initialized",f),ct.removeEventListener("metricsUpdated",f),re.removeEventListener("metricsUpdated",f)}},[r]),s}function Vy(o){const s=re.getStatus(),i=o?s.rooms[o]:null;return{isConnected:i?i.connected:!1,isConnecting:!1,isReconnecting:!1,roomId:i?.roomId||null,connectedAt:i?.connectedAt||null,uptime:i?.uptime||null,latency:i?.latency||null,messagesSent:i?.messagesSent||0,messagesReceived:i?.messagesReceived||0,queuedMessages:i?.queueSize||0,status:i?.connected?"connected":"disconnected",error:null,reconnectAttempts:i?.reconnectAttempts||0,lastActivity:i?.lastActivity||null}}function qy(o,s){return o?o.reconnecting?"reconnecting":o.connected?"connected":o.status==="connecting"?"connecting":"disconnected":s?"disconnected":"error"}const gm=({roundNumber:o,starter:s,starterReason:i})=>{const r=()=>{switch(i){case"has_general_red":return"has the General Red piece";case"won_last_turn":return"won the last turn";case"accepted_redeal":return"accepted the redeal";default:return"starts this round"}};return u.jsxs("div",{className:"rs-content",children:[u.jsxs("div",{className:"rs-round-section",children:[u.jsx("div",{className:"rs-round-label",children:"Round"}),u.jsx("div",{className:"rs-round-number",children:o})]}),u.jsxs("div",{className:"rs-starter-section",children:[u.jsx("div",{className:"rs-starter-label",children:"Starter"}),u.jsx("div",{className:"rs-starter-name",children:s}),i==="has_general_red"?u.jsx("div",{className:"rs-general-piece",children:u.jsx(fe,{piece:{kind:"GENERAL",color:"red",value:14},size:"large",showValue:!1})}):u.jsx("div",{className:"rs-starter-reason",children:r()})]}),u.jsx("div",{className:"rs-timer-section",children:u.jsx(_s,{duration:5,prefix:"Starting in",onComplete:()=>{},variant:"inline"})})]})};gm.propTypes={roundNumber:y.number.isRequired,starter:y.string.isRequired,starterReason:y.string.isRequired};function ku({roundNumber:o=1,starter:s="",starterReason:i="default"}){return u.jsx(gm,{roundNumber:o,starter:s,starterReason:i})}ku.propTypes={roundNumber:y.number.isRequired,starter:y.string.isRequired,starterReason:y.oneOf(["has_general_red","won_last_turn","accepted_redeal","default"]).isRequired};ku.defaultProps={roundNumber:1,starter:"",starterReason:"default"};const ym=({winner:o="",winningPieces:s=[],playerPlays:i=[],myName:r="",turnNumber:d=1,roundNumber:f=1,isLastTurn:g=!1,nextStarter:v="",starterPlayType:T="",starterName:x="",onContinue:N})=>{const[p,_]=I.useState(new Set),B=T||(()=>{const k=i.find(te=>te.playerName===x||te.playerName===o),Y=k?pn(k.pieces):"";return console.log("[TurnResultsContent] Calculating starter play type:",{starterPlayType:T,starterName:x,winner:o,starterPlay:k,calculatedType:Y}),Y})();I.useEffect(()=>{const k=setTimeout(()=>{const Y={};i.forEach(L=>{Y[L.playerName]=L.pieces}),console.log("[TurnResultsContent] Determining pieces to reveal:",{effectiveStarterPlayType:B,starterName:x,winner:o,playerPiecesMap:Y});const te=um(Y,B,x||o);console.log("[TurnResultsContent] Pieces to reveal:",te),_(te)},Tt.TURN_RESULTS_REVEAL_DELAY);return()=>clearTimeout(k)},[i,B,x,o]);const P=g?{starter:`${v} will start Round ${f+1}`,continue:`Starting Round ${f+1} in`}:{starter:`${v} will start Turn ${d+1}`,continue:"Continuing in"},U=(k,Y)=>k===0&&Y===0?"pile-status-none":k===Y&&Y>0?"pile-status-perfect":k>Y?"pile-status-over":"pile-status-under";return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"tr-players-summary",children:u.jsx("div",{className:"tr-player-list",children:i.map(k=>{const Y=k.playerName===o,te=k.pieces.length,L=te>3;return u.jsxs("div",{className:`tr-player-row ${Y?"winner":""}`,children:[u.jsxs("div",{className:"tr-player-info",children:[u.jsx("div",{className:"tr-player-name",children:k.playerName}),u.jsxs("div",{className:`tr-player-piles ${U(k.player?.captured_piles||0,k.player?.declared||0)}`,children:[k.player?.captured_piles||0,"/",k.player?.declared||0," piles"]})]}),u.jsx("div",{className:`tr-played-pieces ${L?"two-rows":""}`,children:te===0?u.jsx("span",{className:"tr-pass-indicator",children:"Passed"}):L?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"pieces-row",children:k.pieces.slice(0,Math.ceil(te/2)).map((G,Z)=>{const J=`${k.playerName}-${Z}`,ge=p.has(J),Ae=!ge&&p.size>0,Ie=qi(k.playerName,i.map(ue=>({name:ue.playerName})))/1e3;return u.jsx(fe,{piece:G,size:"small",flippable:!0,flipped:ge,className:`tr-played-piece ${Ae?"invalid-play":""}`,animationDelay:ge?Ie:void 0},Z)})}),u.jsx("div",{className:"pieces-row",children:k.pieces.slice(Math.ceil(te/2)).map((G,Z)=>{const J=Z+Math.ceil(te/2),ge=`${k.playerName}-${J}`,Ae=p.has(ge),Ie=!Ae&&p.size>0,ue=qi(k.playerName,i.map(W=>({name:W.playerName})))/1e3;return u.jsx(fe,{piece:G,size:"small",flippable:!0,flipped:Ae,className:`tr-played-piece ${Ie?"invalid-play":""}`,animationDelay:Ae?ue:void 0},J)})})]}):k.pieces.map((G,Z)=>{const J=`${k.playerName}-${Z}`,ge=p.has(J),Ae=!ge&&p.size>0,Ie=qi(k.playerName,i.map(ue=>({name:ue.playerName})))/1e3;return u.jsx(fe,{piece:G,size:"medium",flippable:!0,flipped:ge,className:`tr-played-piece ${Ae?"invalid-play":""}`,animationDelay:ge?Ie:void 0},Z)})})]},k.playerName)})})}),u.jsxs("div",{className:"tr-next-turn-info",children:[u.jsx("div",{className:"tr-next-starter",children:P.starter}),u.jsx("div",{className:"tr-auto-continue",children:u.jsx(_s,{prefix:P.continue,onComplete:N,variant:"inline"})})]})]})};ym.propTypes={winner:y.string,winningPieces:y.array,playerPlays:y.arrayOf(y.shape({playerName:y.string,pieces:y.array,player:y.object})),myName:y.string,turnNumber:y.number,roundNumber:y.number,isLastTurn:y.bool,nextStarter:y.string,starterPlayType:y.string,starterName:y.string,onContinue:y.func};function vm({winner:o="",winningPlay:s=null,playerPiles:i={},players:r=[],turnNumber:d=1,roundNumber:f=1,nextStarter:g="",playerName:v="",isLastTurn:T=!1,currentTurnPlays:x=[],onContinue:N}){const p=s?.pieces||[];console.log("[TurnResultsUI] Building playerPlays from currentTurnPlays:",x),x.forEach((U,k)=>{console.log(`[TurnResultsUI] Turn play ${k+1}:`,{player:U.player,hasPieces:!!U.pieces,hasCards:!!U.cards,playType:U.playType||U.play_type,isValid:U.isValid,isStarter:U.isStarter,pieces:U.pieces?JSON.stringify(U.pieces):"null",cards:U.cards?JSON.stringify(U.cards):"null"})});const _=r.map(U=>{const k=x.find(Y=>Y.player===U.name);return{playerName:U.name,player:U,pieces:k?.pieces||k?.cards||[]}}),B=x.find(U=>U.isStarter||U.player===s?.starter),X=B?.player||o,P=B?.playType||B?.play_type||s?.type||"";return console.log("[TurnResultsUI] Extracting starter info:",{currentTurnPlays:x,starterPlay:B,starterName:X,starterPlayType:P,winningPlay:s}),u.jsx(ym,{winner:o,winningPieces:p,playerPlays:_,myName:v,turnNumber:d,roundNumber:f,isLastTurn:T,nextStarter:g,starterPlayType:P,starterName:X,onContinue:N})}vm.propTypes={winner:y.string,winningPlay:y.shape({pieces:y.array,value:y.number,type:y.string,pilesWon:y.number}),playerPiles:y.object,players:y.array,turnNumber:y.number,roundNumber:y.number,nextStarter:y.string,playerName:y.string,isLastTurn:y.bool,currentTurnPlays:y.array,onContinue:y.func};const pm=({winner:o,finalScores:s,players:i,gameStats:r,onBackToLobby:d})=>{const f=()=>{const N=[],p=["color-1","color-2","color-3","color-4","color-5","color-6"],_=["size-small","size-medium","size-large"];for(let B=0;B<50;B++){const X=p[Math.floor(Math.random()*p.length)],P=_[Math.floor(Math.random()*_.length)],U=Math.random()*100,k=Math.random()*3,Y=3+Math.random()*2;N.push(u.jsx("div",{className:`go-confetti ${X} ${P}`,style:{left:`${U}%`,top:"-20px",animationDelay:`${k}s`,animationDuration:`${Y}s`}},B))}return N},g=[...i].sort((N,p)=>{const _=s[N.id]||0;return(s[p.id]||0)-_}),v=N=>{switch(N){case 1:return"🥇";case 2:return"🥈";case 3:return"🥉";default:return null}},T=I.useCallback(()=>{d&&d()},[d]),x=N=>`${Math.floor(N/60)}`;return u.jsxs("div",{className:"go-content",children:[u.jsx("div",{className:"go-confetti-container",children:f()}),u.jsx("div",{className:"go-trophy-container",children:u.jsx("div",{className:"go-trophy",children:"🏆"})}),u.jsxs("div",{className:"go-winner-section",children:[u.jsx("div",{className:"go-winner-name",children:o?.name||"Unknown"}),u.jsx("div",{className:"go-winner-subtitle",children:"Champion!"})]}),u.jsx("div",{className:"go-rankings-container",children:u.jsx("div",{className:"go-rankings",children:g.map((N,p)=>{const _=p+1,B=v(_),X=s[N.id]||0;return u.jsxs("div",{className:"go-rank-item",children:[u.jsx("div",{className:"go-rank-position",children:_}),B&&u.jsx("div",{className:"go-medal",children:B}),u.jsxs("div",{className:"go-player-info",children:[u.jsx("div",{className:"go-player-name",children:N.name}),u.jsx("div",{className:"go-player-score",children:N.perfect_rounds>0?`${N.perfect_rounds} perfect round${N.perfect_rounds>1?"s":""}`:"Aim needs work 🎯"})]}),u.jsx("div",{className:"go-final-score",children:X})]},N.id)})})}),r&&u.jsxs("div",{className:"go-stats",children:[u.jsx("div",{className:"go-stats-title",children:"Game Statistics"}),r.duration!==void 0&&u.jsxs("div",{className:"go-stat-item",children:[u.jsx("span",{className:"go-stat-label",children:"Game Duration"}),u.jsx("span",{className:"go-stat-value",children:x(r.duration)})]}),r.totalRounds&&u.jsxs("div",{className:"go-stat-item",children:[u.jsx("span",{className:"go-stat-label",children:"Rounds Played"}),u.jsx("span",{className:"go-stat-value",children:r.totalRounds})]}),r.highestScore!==void 0&&u.jsxs("div",{className:"go-stat-item",children:[u.jsx("span",{className:"go-stat-label",children:"Highest Score"}),u.jsx("span",{className:"go-stat-value",children:r.highestScore})]})]}),u.jsxs("div",{className:"go-actions",children:[u.jsx("button",{className:"go-action-button primary",onClick:T,children:"Return to Lobby"}),u.jsx("button",{className:"go-action-button secondary",disabled:!0,children:"Play Again"})]}),u.jsx(_s,{duration:10,prefix:"Returning to lobby in",suffix:"seconds...",onComplete:T,variant:"footer"})]})};pm.propTypes={winner:y.shape({id:y.string,name:y.string}),finalScores:y.object.isRequired,players:y.array.isRequired,gameStats:y.shape({duration:y.number,totalRounds:y.number,highestScore:y.number}),onBackToLobby:y.func};function Xu({finalRankings:o,gameStats:s,onBackToLobby:i}){const r=o.map(x=>({id:x.name,name:x.name,turns_won:x.turns_won||0,perfect_rounds:x.perfect_rounds||0})),d=o.reduce((x,N)=>(x[N.name]=N.score,x),{}),f=o.find(x=>x.rank===1),g=f?{id:f.name,name:f.name}:null,v={totalRounds:s.total_rounds,duration:s.game_duration?T(s.game_duration):void 0,highestScore:o.length>0?Math.max(...o.map(x=>x.score)):0};function T(x){const N=x.match(/(\d+)\s*min/);return N?parseInt(N[1])*60:0}return u.jsx(pm,{winner:g,finalScores:d,players:r,gameStats:v,onBackToLobby:i})}Xu.propTypes={finalRankings:y.arrayOf(y.shape({name:y.string.isRequired,score:y.number.isRequired,rank:y.number.isRequired})).isRequired,gameStats:y.shape({total_rounds:y.number.isRequired,game_duration:y.string.isRequired}).isRequired,winners:y.arrayOf(y.string),onBackToLobby:y.func.isRequired};Xu.defaultProps={winners:[]};const Ja=({children:o,phase:s,roundNumber:i=1,showMultiplier:r=!1,multiplierValue:d=2,playType:f="",currentPlayer:g="",turnRequirement:v=null,winner:T=""})=>{const x=()=>{switch(s){case"preparation":return{title:"Preparation Phase",subtitle:"Dealing cards to all players"};case"declaration":return{title:"Declaration",subtitle:"Choose your target piles"};case"turn":return{title:f?gn(f):"Turn Phase",subtitle:g?`Round ${i} • ${g}'s Turn`:"Play your pieces strategically"};case"turn_results":return{title:"Turn Results",subtitle:T?`${T} wins this turn!`:"See who won this turn"};case"scoring":return{title:"Scoring",subtitle:"Round complete"};case"game_over":return{title:"Game Over",subtitle:"Final results"};default:return{title:"Loading",subtitle:"Please wait..."}}},{title:N,subtitle:p}=x();return u.jsxs("div",{className:"gl-game-container",children:[u.jsxs("div",{className:"gl-round-indicator",children:["Round ",i]}),u.jsxs("div",{className:`gl-multiplier-badge ${r?"show":""}`,children:[d,"x Multiplier"]}),u.jsxs("div",{className:"gl-phase-header",children:[u.jsx("h1",{className:`gl-phase-title ${s==="turn"&&f?"turn-play-type":""}`,children:N}),u.jsx("p",{className:"gl-phase-subtitle",children:p})]}),u.jsx("div",{className:"gl-content-section",children:o})]})};Ja.propTypes={children:y.node.isRequired,phase:y.oneOf(["preparation","declaration","turn","turn_results","scoring","game_over"]).isRequired,roundNumber:y.number,showMultiplier:y.bool,multiplierValue:y.number,playType:y.string,currentPlayer:y.string,turnRequirement:y.shape({type:y.string,text:y.string}),winner:y.string};function Yu({roomId:o,onNavigateToLobby:s}){const i=Zu(),r=hm(),d=mm(o),f=I.useMemo(()=>i.phase!=="preparation"?null:{myHand:i.myHand||[],players:i.players||[],weakHands:i.weakHands||[],redealMultiplier:i.redealMultiplier||1,currentWeakPlayer:i.currentWeakPlayer,isMyDecision:i.isMyDecision||!1,isMyHandWeak:i.isMyHandWeak||!1,handValue:i.handValue||0,highestCardValue:i.highestCardValue||0,simultaneousMode:i.simultaneousMode||!1,weakPlayersAwaiting:i.weakPlayersAwaiting||[],decisionsReceived:i.decisionsReceived||0,decisionsNeeded:i.decisionsNeeded||0,dealingCards:i.dealingCards||!1,onAcceptRedeal:r.acceptRedeal,onDeclineRedeal:r.declineRedeal},[i,r]),g=I.useMemo(()=>i.phase!=="round_start"?null:{roundNumber:i.currentRound||1,starter:i.currentStarter||"",starterReason:i.starterReason||"default"},[i]),v=I.useMemo(()=>{if(i.phase!=="declaration")return null;let B=i.players||[];i.declarationOrder&&i.declarationOrder.length>0&&(B=i.declarationOrder.map(U=>i.players.find(Y=>Y.name===U)||{name:U}).filter(U=>U!==void 0));const P=i.players?.find(U=>U.name===i.playerName)?.zero_declares_in_a_row||0;return{myHand:i.myHand||[],declarations:i.declarations||{},players:B,currentTotal:i.currentTotal||0,currentPlayer:i.currentDeclarer||"",myName:i.playerName||"",isMyTurn:i.isMyTurn||!1,validOptions:i.validOptions||[],declarationProgress:i.declarationProgress||{declared:0,total:4},isLastPlayer:i.isLastPlayer||!1,estimatedPiles:i.estimatedPiles||0,handStrength:i.handStrength||0,consecutiveZeros:P,redealMultiplier:i.redealMultiplier||1,onDeclare:r.makeDeclaration}},[i,r]),T=I.useMemo(()=>{if(i.phase!=="turn")return null;let B="";if(i.currentTurnPlays&&i.currentTurnPlays.length>0&&i.currentTurnStarter){const U=i.currentTurnPlays.find(k=>k.player===i.currentTurnStarter);if(U){const k=U.playType||U.play_type;k&&k!=="UNKNOWN"&&k!=="unknown"&&(B=k)}}const X=i.pileCounts||i.pile_counts||{},P={};return i.players&&i.players.forEach(U=>{U.name===i.playerName?P[U.name]=i.myHand.length:P[U.name]=U.hand_size||0}),{myHand:i.myHand||[],players:i.players||[],currentPlayer:i.currentPlayer||"",playerName:i.playerName||"",currentTurnPlays:i.currentTurnPlays||[],requiredPieceCount:i.requiredPieceCount,turnNumber:i.currentTurnNumber||1,piecesWonCount:X,previousWinner:i.currentTurnStarter||"",playType:B,declarationData:i.declarations||{},playerHandSizes:P,isMyTurn:i.isMyTurn||!1,canPlayAnyCount:i.canPlayAnyCount||!1,onPlayPieces:r.playPieces,onPass:r.pass}},[i,r]),x=I.useMemo(()=>{if(i.phase!=="turn_results")return null;const B=i.allHandsEmpty||!1;return{winner:i.turnWinner||null,winningPlay:i.winningPlay||null,playerPiles:i.playerPiles||{},players:i.players||[],turnNumber:i.currentTurnNumber||i.turnNumber||1,roundNumber:i.currentRound||1,nextStarter:i.nextStarter||null,playerName:i.playerName||"",isLastTurn:B,currentTurnPlays:i.currentTurnPlays||[],onContinue:()=>{console.log("Turn results continue requested")}}},[i,r]),N=I.useMemo(()=>i.phase!=="scoring"?null:{players:i.players||[],roundScores:i.roundScores||{},totalScores:i.totalScores||{},redealMultiplier:i.redealMultiplier||1,playersWithScores:i.playersWithScores||[],roundNumber:i.currentRound||1,playerName:i.playerName||"",gameOver:i.gameOver||!1,winners:i.winners||[],onStartNextRound:i.gameOver?null:r.startNextRound},[i,r]),p=I.useMemo(()=>({isConnected:d.isConnected,isConnecting:d.isConnecting,isReconnecting:d.isReconnecting,connectionError:d.error,message:Gy(i,d),phase:i.phase||"waiting",onRetry:r.triggerRecovery,onCancel:async()=>{try{await r.disconnectFromRoom()}catch(B){console.warn("Error disconnecting during cancel:",B)}finally{s&&s()}}}),[i,d,r,s]),_=I.useMemo(()=>i.phase!=="game_over"?null:{finalRankings:i.final_rankings||[],gameStats:i.game_stats||{total_rounds:0,game_duration:"Unknown"},winners:i.winners||[],onBackToLobby:()=>{r.cleanup&&r.cleanup(),s&&s()}},[i,r,s]);return i.error?u.jsx(yn,{children:u.jsx(vn,{...p,message:`Error: ${i.error}`,connectionError:i.error})}):!d.isConnected&&!d.isConnecting?u.jsx(yn,{children:u.jsx(vn,{...p,message:"Not connected to game"})}):d.isConnecting||d.isReconnecting?u.jsx(yn,{children:u.jsx(vn,{...p,message:d.isReconnecting?"Reconnecting to game...":"Connecting to game..."})}):u.jsx(yn,{children:(()=>{switch(i.phase){case"preparation":return u.jsx(Ja,{phase:"preparation",roundNumber:i.currentRound,showMultiplier:i.redealMultiplier>1,multiplierValue:i.redealMultiplier,children:u.jsx(qu,{...f})});case"round_start":return u.jsx(Ja,{phase:"round_start",roundNumber:i.currentRound,showMultiplier:i.redealMultiplier>1,multiplierValue:i.redealMultiplier,children:u.jsx(ku,{...g})});case"declaration":return u.jsx(Ja,{phase:"declaration",roundNumber:i.currentRound,showMultiplier:i.redealMultiplier>1,multiplierValue:i.redealMultiplier,children:u.jsx(cm,{...v})});case"turn":{const B=(()=>{if(!T)return null;const{currentPlayer:X,playerName:P,requiredPieceCount:U}=T;return X===P?U===0||U===null?{type:"active",text:"Play any number of pieces or pass"}:{type:"active",text:`Must play exactly ${U} piece${U>1?"s":""}`}:{type:"waiting",text:`Waiting for ${X} to play`}})();return u.jsx(Ja,{phase:"turn",roundNumber:i.currentRound,showMultiplier:i.redealMultiplier>1,multiplierValue:i.redealMultiplier,playType:T?.playType||"",currentPlayer:T?.currentPlayer||"",turnRequirement:B,children:u.jsx(dm,{...T})})}case"turn_results":return u.jsx(Ja,{phase:"turn_results",roundNumber:i.currentRound,showMultiplier:i.redealMultiplier>1,multiplierValue:i.redealMultiplier,winner:i.turnWinner,children:u.jsx(vm,{...x})});case"scoring":return u.jsx(Ja,{phase:"scoring",roundNumber:i.currentRound,showMultiplier:i.redealMultiplier>1,multiplierValue:i.redealMultiplier,children:u.jsx(Gu,{...N})});case"game_over":return u.jsx(Ja,{phase:"game_over",roundNumber:i.currentRound,showMultiplier:!1,children:u.jsx(Xu,{..._})});case"waiting":default:return u.jsx(vn,{...p})}})()})}function Gy(o,s){if(!s.isConnected)return"Connecting to game...";if(s.isReconnecting)return"Reconnecting...";switch(o.phase){case"waiting":return"Waiting for game to start...";case"preparation":return"Preparing for next phase...";case"round_start":return"Starting new round...";case"declaration":return"Declaration phase in progress...";case"turn":return"Turn phase in progress...";case"turn_results":return"Showing turn results...";case"scoring":return"Calculating scores...";default:return"Loading game..."}}Yu.propTypes={roomId:y.string,onNavigateToLobby:y.func};Yu.defaultProps={roomId:null,onNavigateToLobby:null};var Rs=o=>o.type==="checkbox",Sl=o=>o instanceof Date,ht=o=>o==null;const bm=o=>typeof o=="object";var Ke=o=>!ht(o)&&!Array.isArray(o)&&bm(o)&&!Sl(o),Zy=o=>Ke(o)&&o.target?Rs(o.target)?o.target.checked:o.target.value:o,ky=o=>o.substring(0,o.search(/\.\d+(\.|$)/))||o,Xy=(o,s)=>o.has(ky(s)),Yy=o=>{const s=o.constructor&&o.constructor.prototype;return Ke(s)&&s.hasOwnProperty("isPrototypeOf")},Ku=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function dt(o){let s;const i=Array.isArray(o),r=typeof FileList<"u"?o instanceof FileList:!1;if(o instanceof Date)s=new Date(o);else if(o instanceof Set)s=new Set(o);else if(!(Ku&&(o instanceof Blob||r))&&(i||Ke(o)))if(s=i?[]:{},!i&&!Yy(o))s=o;else for(const d in o)o.hasOwnProperty(d)&&(s[d]=dt(o[d]));else return o;return s}var Pi=o=>/^\w*$/.test(o),Je=o=>o===void 0,Qu=o=>Array.isArray(o)?o.filter(Boolean):[],$u=o=>Qu(o.replace(/["|']|\]/g,"").split(/\.|\[/)),le=(o,s,i)=>{if(!s||!Ke(o))return i;const r=(Pi(s)?[s]:$u(s)).reduce((d,f)=>ht(d)?d:d[f],o);return Je(r)||r===o?Je(o[s])?i:o[s]:r},ea=o=>typeof o=="boolean",Be=(o,s,i)=>{let r=-1;const d=Pi(s)?[s]:$u(s),f=d.length,g=f-1;for(;++r<f;){const v=d[r];let T=i;if(r!==g){const x=o[v];T=Ke(x)||Array.isArray(x)?x:isNaN(+d[r+1])?{}:[]}if(v==="__proto__"||v==="constructor"||v==="prototype")return;o[v]=T,o=o[v]}};const ch={BLUR:"blur",FOCUS_OUT:"focusout"},kt={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},pa={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Ky=Vt.createContext(null);Ky.displayName="HookFormContext";var Qy=(o,s,i,r=!0)=>{const d={defaultValues:s._defaultValues};for(const f in o)Object.defineProperty(d,f,{get:()=>{const g=f;return s._proxyFormState[g]!==kt.all&&(s._proxyFormState[g]=!r||kt.all),o[g]}});return d};const $y=typeof window<"u"?I.useLayoutEffect:I.useEffect;var ta=o=>typeof o=="string",Py=(o,s,i,r,d)=>ta(o)?(r&&s.watch.add(o),le(i,o,d)):Array.isArray(o)?o.map(f=>(r&&s.watch.add(f),le(i,f))):(r&&(s.watchAll=!0),i),Jy=(o,s,i,r,d)=>s?{...i[o],types:{...i[o]&&i[o].types?i[o].types:{},[r]:d||!0}}:{},Cs=o=>Array.isArray(o)?o:[o],uh=()=>{let o=[];return{get observers(){return o},next:d=>{for(const f of o)f.next&&f.next(d)},subscribe:d=>(o.push(d),{unsubscribe:()=>{o=o.filter(f=>f!==d)}}),unsubscribe:()=>{o=[]}}},xu=o=>ht(o)||!bm(o);function Wa(o,s){if(xu(o)||xu(s))return o===s;if(Sl(o)&&Sl(s))return o.getTime()===s.getTime();const i=Object.keys(o),r=Object.keys(s);if(i.length!==r.length)return!1;for(const d of i){const f=o[d];if(!r.includes(d))return!1;if(d!=="ref"){const g=s[d];if(Sl(f)&&Sl(g)||Ke(f)&&Ke(g)||Array.isArray(f)&&Array.isArray(g)?!Wa(f,g):f!==g)return!1}}return!0}var bt=o=>Ke(o)&&!Object.keys(o).length,Pu=o=>o.type==="file",Xt=o=>typeof o=="function",Xi=o=>{if(!Ku)return!1;const s=o?o.ownerDocument:0;return o instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},Sm=o=>o.type==="select-multiple",Ju=o=>o.type==="radio",Wy=o=>Ju(o)||Rs(o),vu=o=>Xi(o)&&o.isConnected;function Fy(o,s){const i=s.slice(0,-1).length;let r=0;for(;r<i;)o=Je(o)?r++:o[s[r++]];return o}function ev(o){for(const s in o)if(o.hasOwnProperty(s)&&!Je(o[s]))return!1;return!0}function et(o,s){const i=Array.isArray(s)?s:Pi(s)?[s]:$u(s),r=i.length===1?o:Fy(o,i),d=i.length-1,f=i[d];return r&&delete r[f],d!==0&&(Ke(r)&&bt(r)||Array.isArray(r)&&ev(r))&&et(o,i.slice(0,-1)),o}var Cm=o=>{for(const s in o)if(Xt(o[s]))return!0;return!1};function Yi(o,s={}){const i=Array.isArray(o);if(Ke(o)||i)for(const r in o)Array.isArray(o[r])||Ke(o[r])&&!Cm(o[r])?(s[r]=Array.isArray(o[r])?[]:{},Yi(o[r],s[r])):ht(o[r])||(s[r]=!0);return s}function Nm(o,s,i){const r=Array.isArray(o);if(Ke(o)||r)for(const d in o)Array.isArray(o[d])||Ke(o[d])&&!Cm(o[d])?Je(s)||xu(i[d])?i[d]=Array.isArray(o[d])?Yi(o[d],[]):{...Yi(o[d])}:Nm(o[d],ht(s)?{}:s[d],i[d]):i[d]=!Wa(o[d],s[d]);return i}var bs=(o,s)=>Nm(o,s,Yi(s));const oh={value:!1,isValid:!1},dh={value:!0,isValid:!0};var Am=o=>{if(Array.isArray(o)){if(o.length>1){const s=o.filter(i=>i&&i.checked&&!i.disabled).map(i=>i.value);return{value:s,isValid:!!s.length}}return o[0].checked&&!o[0].disabled?o[0].attributes&&!Je(o[0].attributes.value)?Je(o[0].value)||o[0].value===""?dh:{value:o[0].value,isValid:!0}:dh:oh}return oh},xm=(o,{valueAsNumber:s,valueAsDate:i,setValueAs:r})=>Je(o)?o:s?o===""?NaN:o&&+o:i&&ta(o)?new Date(o):r?r(o):o;const fh={isValid:!1,value:null};var Em=o=>Array.isArray(o)?o.reduce((s,i)=>i&&i.checked&&!i.disabled?{isValid:!0,value:i.value}:s,fh):fh;function hh(o){const s=o.ref;return Pu(s)?s.files:Ju(s)?Em(o.refs).value:Sm(s)?[...s.selectedOptions].map(({value:i})=>i):Rs(s)?Am(o.refs).value:xm(Je(s.value)?o.ref.value:s.value,o)}var tv=(o,s,i,r)=>{const d={};for(const f of o){const g=le(s,f);g&&Be(d,f,g._f)}return{criteriaMode:i,names:[...o],fields:d,shouldUseNativeValidation:r}},Ki=o=>o instanceof RegExp,Ss=o=>Je(o)?o:Ki(o)?o.source:Ke(o)?Ki(o.value)?o.value.source:o.value:o,mh=o=>({isOnSubmit:!o||o===kt.onSubmit,isOnBlur:o===kt.onBlur,isOnChange:o===kt.onChange,isOnAll:o===kt.all,isOnTouch:o===kt.onTouched});const gh="AsyncFunction";var av=o=>!!o&&!!o.validate&&!!(Xt(o.validate)&&o.validate.constructor.name===gh||Ke(o.validate)&&Object.values(o.validate).find(s=>s.constructor.name===gh)),lv=o=>o.mount&&(o.required||o.min||o.max||o.maxLength||o.minLength||o.pattern||o.validate),yh=(o,s,i)=>!i&&(s.watchAll||s.watch.has(o)||[...s.watch].some(r=>o.startsWith(r)&&/^\.\w+/.test(o.slice(r.length))));const Ns=(o,s,i,r)=>{for(const d of i||Object.keys(o)){const f=le(o,d);if(f){const{_f:g,...v}=f;if(g){if(g.refs&&g.refs[0]&&s(g.refs[0],d)&&!r)return!0;if(g.ref&&s(g.ref,g.name)&&!r)return!0;if(Ns(v,s))break}else if(Ke(v)&&Ns(v,s))break}}};function vh(o,s,i){const r=le(o,i);if(r||Pi(i))return{error:r,name:i};const d=i.split(".");for(;d.length;){const f=d.join("."),g=le(s,f),v=le(o,f);if(g&&!Array.isArray(g)&&i!==f)return{name:i};if(v&&v.type)return{name:f,error:v};if(v&&v.root&&v.root.type)return{name:`${f}.root`,error:v.root};d.pop()}return{name:i}}var nv=(o,s,i,r)=>{i(o);const{name:d,...f}=o;return bt(f)||Object.keys(f).length>=Object.keys(s).length||Object.keys(f).find(g=>s[g]===(!r||kt.all))},sv=(o,s,i)=>!o||!s||o===s||Cs(o).some(r=>r&&(i?r===s:r.startsWith(s)||s.startsWith(r))),iv=(o,s,i,r,d)=>d.isOnAll?!1:!i&&d.isOnTouch?!(s||o):(i?r.isOnBlur:d.isOnBlur)?!o:(i?r.isOnChange:d.isOnChange)?o:!0,rv=(o,s)=>!Qu(le(o,s)).length&&et(o,s),cv=(o,s,i)=>{const r=Cs(le(o,i));return Be(r,"root",s[i]),Be(o,i,r),o},Gi=o=>ta(o);function ph(o,s,i="validate"){if(Gi(o)||Array.isArray(o)&&o.every(Gi)||ea(o)&&!o)return{type:i,message:Gi(o)?o:"",ref:s}}var mn=o=>Ke(o)&&!Ki(o)?o:{value:o,message:""},bh=async(o,s,i,r,d,f)=>{const{ref:g,refs:v,required:T,maxLength:x,minLength:N,min:p,max:_,pattern:B,validate:X,name:P,valueAsNumber:U,mount:k}=o._f,Y=le(i,P);if(!k||s.has(P))return{};const te=v?v[0]:g,L=W=>{d&&te.reportValidity&&(te.setCustomValidity(ea(W)?"":W||""),te.reportValidity())},G={},Z=Ju(g),J=Rs(g),ge=Z||J,Ae=(U||Pu(g))&&Je(g.value)&&Je(Y)||Xi(g)&&g.value===""||Y===""||Array.isArray(Y)&&!Y.length,Ie=Jy.bind(null,P,r,G),ue=(W,me,Q,se=pa.maxLength,E=pa.minLength)=>{const q=W?me:Q;G[P]={type:W?se:E,message:q,ref:g,...Ie(W?se:E,q)}};if(f?!Array.isArray(Y)||!Y.length:T&&(!ge&&(Ae||ht(Y))||ea(Y)&&!Y||J&&!Am(v).isValid||Z&&!Em(v).isValid)){const{value:W,message:me}=Gi(T)?{value:!!T,message:T}:mn(T);if(W&&(G[P]={type:pa.required,message:me,ref:te,...Ie(pa.required,me)},!r))return L(me),G}if(!Ae&&(!ht(p)||!ht(_))){let W,me;const Q=mn(_),se=mn(p);if(!ht(Y)&&!isNaN(Y)){const E=g.valueAsNumber||Y&&+Y;ht(Q.value)||(W=E>Q.value),ht(se.value)||(me=E<se.value)}else{const E=g.valueAsDate||new Date(Y),q=pe=>new Date(new Date().toDateString()+" "+pe),F=g.type=="time",ie=g.type=="week";ta(Q.value)&&Y&&(W=F?q(Y)>q(Q.value):ie?Y>Q.value:E>new Date(Q.value)),ta(se.value)&&Y&&(me=F?q(Y)<q(se.value):ie?Y<se.value:E<new Date(se.value))}if((W||me)&&(ue(!!W,Q.message,se.message,pa.max,pa.min),!r))return L(G[P].message),G}if((x||N)&&!Ae&&(ta(Y)||f&&Array.isArray(Y))){const W=mn(x),me=mn(N),Q=!ht(W.value)&&Y.length>+W.value,se=!ht(me.value)&&Y.length<+me.value;if((Q||se)&&(ue(Q,W.message,me.message),!r))return L(G[P].message),G}if(B&&!Ae&&ta(Y)){const{value:W,message:me}=mn(B);if(Ki(W)&&!Y.match(W)&&(G[P]={type:pa.pattern,message:me,ref:g,...Ie(pa.pattern,me)},!r))return L(me),G}if(X){if(Xt(X)){const W=await X(Y,i),me=ph(W,te);if(me&&(G[P]={...me,...Ie(pa.validate,me.message)},!r))return L(me.message),G}else if(Ke(X)){let W={};for(const me in X){if(!bt(W)&&!r)break;const Q=ph(await X[me](Y,i),te,me);Q&&(W={...Q,...Ie(me,Q.message)},L(Q.message),r&&(G[P]=W))}if(!bt(W)&&(G[P]={ref:te,...W},!r))return G}}return L(!0),G};const uv={mode:kt.onSubmit,reValidateMode:kt.onChange,shouldFocusError:!0};function ov(o={}){let s={...uv,...o},i={submitCount:0,isDirty:!1,isReady:!1,isLoading:Xt(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1};const r={};let d=Ke(s.defaultValues)||Ke(s.values)?dt(s.defaultValues||s.values)||{}:{},f=s.shouldUnregister?{}:dt(d),g={action:!1,mount:!1,watch:!1},v={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},T,x=0;const N={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...N};const _={array:uh(),state:uh()},B=s.criteriaMode===kt.all,X=S=>D=>{clearTimeout(x),x=setTimeout(S,D)},P=async S=>{if(!s.disabled&&(N.isValid||p.isValid||S)){const D=s.resolver?bt((await J()).errors):await Ae(r,!0);D!==i.isValid&&_.state.next({isValid:D})}},U=(S,D)=>{!s.disabled&&(N.isValidating||N.validatingFields||p.isValidating||p.validatingFields)&&((S||Array.from(v.mount)).forEach(z=>{z&&(D?Be(i.validatingFields,z,D):et(i.validatingFields,z))}),_.state.next({validatingFields:i.validatingFields,isValidating:!bt(i.validatingFields)}))},k=(S,D=[],z,ee,$=!0,K=!0)=>{if(ee&&z&&!s.disabled){if(g.action=!0,K&&Array.isArray(le(r,S))){const ne=z(le(r,S),ee.argA,ee.argB);$&&Be(r,S,ne)}if(K&&Array.isArray(le(i.errors,S))){const ne=z(le(i.errors,S),ee.argA,ee.argB);$&&Be(i.errors,S,ne),rv(i.errors,S)}if((N.touchedFields||p.touchedFields)&&K&&Array.isArray(le(i.touchedFields,S))){const ne=z(le(i.touchedFields,S),ee.argA,ee.argB);$&&Be(i.touchedFields,S,ne)}(N.dirtyFields||p.dirtyFields)&&(i.dirtyFields=bs(d,f)),_.state.next({name:S,isDirty:ue(S,D),dirtyFields:i.dirtyFields,errors:i.errors,isValid:i.isValid})}else Be(f,S,D)},Y=(S,D)=>{Be(i.errors,S,D),_.state.next({errors:i.errors})},te=S=>{i.errors=S,_.state.next({errors:i.errors,isValid:!1})},L=(S,D,z,ee)=>{const $=le(r,S);if($){const K=le(f,S,Je(z)?le(d,S):z);Je(K)||ee&&ee.defaultChecked||D?Be(f,S,D?K:hh($._f)):Q(S,K),g.mount&&P()}},G=(S,D,z,ee,$)=>{let K=!1,ne=!1;const ye={name:S};if(!s.disabled){if(!z||ee){(N.isDirty||p.isDirty)&&(ne=i.isDirty,i.isDirty=ye.isDirty=ue(),K=ne!==ye.isDirty);const Ne=Wa(le(d,S),D);ne=!!le(i.dirtyFields,S),Ne?et(i.dirtyFields,S):Be(i.dirtyFields,S,!0),ye.dirtyFields=i.dirtyFields,K=K||(N.dirtyFields||p.dirtyFields)&&ne!==!Ne}if(z){const Ne=le(i.touchedFields,S);Ne||(Be(i.touchedFields,S,z),ye.touchedFields=i.touchedFields,K=K||(N.touchedFields||p.touchedFields)&&Ne!==z)}K&&$&&_.state.next(ye)}return K?ye:{}},Z=(S,D,z,ee)=>{const $=le(i.errors,S),K=(N.isValid||p.isValid)&&ea(D)&&i.isValid!==D;if(s.delayError&&z?(T=X(()=>Y(S,z)),T(s.delayError)):(clearTimeout(x),T=null,z?Be(i.errors,S,z):et(i.errors,S)),(z?!Wa($,z):$)||!bt(ee)||K){const ne={...ee,...K&&ea(D)?{isValid:D}:{},errors:i.errors,name:S};i={...i,...ne},_.state.next(ne)}},J=async S=>{U(S,!0);const D=await s.resolver(f,s.context,tv(S||v.mount,r,s.criteriaMode,s.shouldUseNativeValidation));return U(S),D},ge=async S=>{const{errors:D}=await J(S);if(S)for(const z of S){const ee=le(D,z);ee?Be(i.errors,z,ee):et(i.errors,z)}else i.errors=D;return D},Ae=async(S,D,z={valid:!0})=>{for(const ee in S){const $=S[ee];if($){const{_f:K,...ne}=$;if(K){const ye=v.array.has(K.name),Ne=$._f&&av($._f);Ne&&N.validatingFields&&U([ee],!0);const Le=await bh($,v.disabled,f,B,s.shouldUseNativeValidation&&!D,ye);if(Ne&&N.validatingFields&&U([ee]),Le[K.name]&&(z.valid=!1,D))break;!D&&(le(Le,K.name)?ye?cv(i.errors,Le,K.name):Be(i.errors,K.name,Le[K.name]):et(i.errors,K.name))}!bt(ne)&&await Ae(ne,D,z)}}return z.valid},Ie=()=>{for(const S of v.unMount){const D=le(r,S);D&&(D._f.refs?D._f.refs.every(z=>!vu(z)):!vu(D._f.ref))&&Ea(S)}v.unMount=new Set},ue=(S,D)=>!s.disabled&&(S&&D&&Be(f,S,D),!Wa(pe(),d)),W=(S,D,z)=>Py(S,v,{...g.mount?f:Je(D)?d:ta(S)?{[S]:D}:D},z,D),me=S=>Qu(le(g.mount?f:d,S,s.shouldUnregister?le(d,S,[]):[])),Q=(S,D,z={})=>{const ee=le(r,S);let $=D;if(ee){const K=ee._f;K&&(!K.disabled&&Be(f,S,xm(D,K)),$=Xi(K.ref)&&ht(D)?"":D,Sm(K.ref)?[...K.ref.options].forEach(ne=>ne.selected=$.includes(ne.value)):K.refs?Rs(K.ref)?K.refs.forEach(ne=>{(!ne.defaultChecked||!ne.disabled)&&(Array.isArray($)?ne.checked=!!$.find(ye=>ye===ne.value):ne.checked=$===ne.value||!!$)}):K.refs.forEach(ne=>ne.checked=ne.value===$):Pu(K.ref)?K.ref.value="":(K.ref.value=$,K.ref.type||_.state.next({name:S,values:dt(f)})))}(z.shouldDirty||z.shouldTouch)&&G(S,$,z.shouldTouch,z.shouldDirty,!0),z.shouldValidate&&ie(S)},se=(S,D,z)=>{for(const ee in D){if(!D.hasOwnProperty(ee))return;const $=D[ee],K=S+"."+ee,ne=le(r,K);(v.array.has(S)||Ke($)||ne&&!ne._f)&&!Sl($)?se(K,$,z):Q(K,$,z)}},E=(S,D,z={})=>{const ee=le(r,S),$=v.array.has(S),K=dt(D);Be(f,S,K),$?(_.array.next({name:S,values:dt(f)}),(N.isDirty||N.dirtyFields||p.isDirty||p.dirtyFields)&&z.shouldDirty&&_.state.next({name:S,dirtyFields:bs(d,f),isDirty:ue(S,K)})):ee&&!ee._f&&!ht(K)?se(S,K,z):Q(S,K,z),yh(S,v)&&_.state.next({...i}),_.state.next({name:g.mount?S:void 0,values:dt(f)})},q=async S=>{g.mount=!0;const D=S.target;let z=D.name,ee=!0;const $=le(r,z),K=Ne=>{ee=Number.isNaN(Ne)||Sl(Ne)&&isNaN(Ne.getTime())||Wa(Ne,le(f,z,Ne))},ne=mh(s.mode),ye=mh(s.reValidateMode);if($){let Ne,Le;const _l=D.type?hh($._f):Zy(S),Qt=S.type===ch.BLUR||S.type===ch.FOCUS_OUT,Wi=!lv($._f)&&!s.resolver&&!le(i.errors,z)&&!$._f.deps||iv(Qt,le(i.touchedFields,z),i.isSubmitted,ye,ne),_a=yh(z,v,Qt);Be(f,z,_l),Qt?($._f.onBlur&&$._f.onBlur(S),T&&T(0)):$._f.onChange&&$._f.onChange(S);const Ra=G(z,_l,Qt),aa=!bt(Ra)||_a;if(!Qt&&_.state.next({name:z,type:S.type,values:dt(f)}),Wi)return(N.isValid||p.isValid)&&(s.mode==="onBlur"?Qt&&P():Qt||P()),aa&&_.state.next({name:z,..._a?{}:Ra});if(!Qt&&_a&&_.state.next({...i}),s.resolver){const{errors:tl}=await J([z]);if(K(_l),ee){const al=vh(i.errors,r,z),js=vh(tl,r,al.name||z);Ne=js.error,z=js.name,Le=bt(tl)}}else U([z],!0),Ne=(await bh($,v.disabled,f,B,s.shouldUseNativeValidation))[z],U([z]),K(_l),ee&&(Ne?Le=!1:(N.isValid||p.isValid)&&(Le=await Ae(r,!0)));ee&&($._f.deps&&ie($._f.deps),Z(z,Le,Ne,Ra))}},F=(S,D)=>{if(le(i.errors,D)&&S.focus)return S.focus(),1},ie=async(S,D={})=>{let z,ee;const $=Cs(S);if(s.resolver){const K=await ge(Je(S)?S:$);z=bt(K),ee=S?!$.some(ne=>le(K,ne)):z}else S?(ee=(await Promise.all($.map(async K=>{const ne=le(r,K);return await Ae(ne&&ne._f?{[K]:ne}:ne)}))).every(Boolean),!(!ee&&!i.isValid)&&P()):ee=z=await Ae(r);return _.state.next({...!ta(S)||(N.isValid||p.isValid)&&z!==i.isValid?{}:{name:S},...s.resolver||!S?{isValid:z}:{},errors:i.errors}),D.shouldFocus&&!ee&&Ns(r,F,S?$:v.mount),ee},pe=S=>{const D={...g.mount?f:d};return Je(S)?D:ta(S)?le(D,S):S.map(z=>le(D,z))},qe=(S,D)=>({invalid:!!le((D||i).errors,S),isDirty:!!le((D||i).dirtyFields,S),error:le((D||i).errors,S),isValidating:!!le(i.validatingFields,S),isTouched:!!le((D||i).touchedFields,S)}),Te=S=>{S&&Cs(S).forEach(D=>et(i.errors,D)),_.state.next({errors:S?i.errors:{}})},Ee=(S,D,z)=>{const ee=(le(r,S,{_f:{}})._f||{}).ref,$=le(i.errors,S)||{},{ref:K,message:ne,type:ye,...Ne}=$;Be(i.errors,S,{...Ne,...D,ref:ee}),_.state.next({name:S,errors:i.errors,isValid:!1}),z&&z.shouldFocus&&ee&&ee.focus&&ee.focus()},Qe=(S,D)=>Xt(S)?_.state.subscribe({next:z=>S(W(void 0,D),z)}):W(S,D,!0),St=S=>_.state.subscribe({next:D=>{sv(S.name,D.name,S.exact)&&nv(D,S.formState||N,jt,S.reRenderRoot)&&S.callback({values:{...f},...i,...D})}}).unsubscribe,Yt=S=>(g.mount=!0,p={...p,...S.formState},St({...S,formState:p})),Ea=(S,D={})=>{for(const z of S?Cs(S):v.mount)v.mount.delete(z),v.array.delete(z),D.keepValue||(et(r,z),et(f,z)),!D.keepError&&et(i.errors,z),!D.keepDirty&&et(i.dirtyFields,z),!D.keepTouched&&et(i.touchedFields,z),!D.keepIsValidating&&et(i.validatingFields,z),!s.shouldUnregister&&!D.keepDefaultValue&&et(d,z);_.state.next({values:dt(f)}),_.state.next({...i,...D.keepDirty?{isDirty:ue()}:{}}),!D.keepIsValid&&P()},Fa=({disabled:S,name:D})=>{(ea(S)&&g.mount||S||v.disabled.has(D))&&(S?v.disabled.add(D):v.disabled.delete(D))},Kt=(S,D={})=>{let z=le(r,S);const ee=ea(D.disabled)||ea(s.disabled);return Be(r,S,{...z||{},_f:{...z&&z._f?z._f:{ref:{name:S}},name:S,mount:!0,...D}}),v.mount.add(S),z?Fa({disabled:ea(D.disabled)?D.disabled:s.disabled,name:S}):L(S,!0,D.value),{...ee?{disabled:D.disabled||s.disabled}:{},...s.progressive?{required:!!D.required,min:Ss(D.min),max:Ss(D.max),minLength:Ss(D.minLength),maxLength:Ss(D.maxLength),pattern:Ss(D.pattern)}:{},name:S,onChange:q,onBlur:q,ref:$=>{if($){Kt(S,D),z=le(r,S);const K=Je($.value)&&$.querySelectorAll&&$.querySelectorAll("input,select,textarea")[0]||$,ne=Wy(K),ye=z._f.refs||[];if(ne?ye.find(Ne=>Ne===K):K===z._f.ref)return;Be(r,S,{_f:{...z._f,...ne?{refs:[...ye.filter(vu),K,...Array.isArray(le(d,S))?[{}]:[]],ref:{type:K.type,name:S}}:{ref:K}}}),L(S,!1,void 0,K)}else z=le(r,S,{}),z._f&&(z._f.mount=!1),(s.shouldUnregister||D.shouldUnregister)&&!(Xy(v.array,S)&&g.action)&&v.unMount.add(S)}}},el=()=>s.shouldFocusError&&Ns(r,F,v.mount),Al=S=>{ea(S)&&(_.state.next({disabled:S}),Ns(r,(D,z)=>{const ee=le(r,z);ee&&(D.disabled=ee._f.disabled||S,Array.isArray(ee._f.refs)&&ee._f.refs.forEach($=>{$.disabled=ee._f.disabled||S}))},0,!1))},xl=(S,D)=>async z=>{let ee;z&&(z.preventDefault&&z.preventDefault(),z.persist&&z.persist());let $=dt(f);if(_.state.next({isSubmitting:!0}),s.resolver){const{errors:K,values:ne}=await J();i.errors=K,$=ne}else await Ae(r);if(v.disabled.size)for(const K of v.disabled)Be($,K,void 0);if(et(i.errors,"root"),bt(i.errors)){_.state.next({errors:{}});try{await S($,z)}catch(K){ee=K}}else D&&await D({...i.errors},z),el(),setTimeout(el);if(_.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:bt(i.errors)&&!ee,submitCount:i.submitCount+1,errors:i.errors}),ee)throw ee},Sn=(S,D={})=>{le(r,S)&&(Je(D.defaultValue)?E(S,dt(le(d,S))):(E(S,D.defaultValue),Be(d,S,dt(D.defaultValue))),D.keepTouched||et(i.touchedFields,S),D.keepDirty||(et(i.dirtyFields,S),i.isDirty=D.defaultValue?ue(S,dt(le(d,S))):ue()),D.keepError||(et(i.errors,S),N.isValid&&P()),_.state.next({...i}))},El=(S,D={})=>{const z=S?dt(S):d,ee=dt(z),$=bt(S),K=$?d:ee;if(D.keepDefaultValues||(d=z),!D.keepValues){if(D.keepDirtyValues){const ne=new Set([...v.mount,...Object.keys(bs(d,f))]);for(const ye of Array.from(ne))le(i.dirtyFields,ye)?Be(K,ye,le(f,ye)):E(ye,le(K,ye))}else{if(Ku&&Je(S))for(const ne of v.mount){const ye=le(r,ne);if(ye&&ye._f){const Ne=Array.isArray(ye._f.refs)?ye._f.refs[0]:ye._f.ref;if(Xi(Ne)){const Le=Ne.closest("form");if(Le){Le.reset();break}}}}for(const ne of v.mount)E(ne,le(K,ne))}f=dt(K),_.array.next({values:{...K}}),_.state.next({values:{...K}})}v={mount:D.keepDirtyValues?v.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},g.mount=!N.isValid||!!D.keepIsValid||!!D.keepDirtyValues,g.watch=!!s.shouldUnregister,_.state.next({submitCount:D.keepSubmitCount?i.submitCount:0,isDirty:$?!1:D.keepDirty?i.isDirty:!!(D.keepDefaultValues&&!Wa(S,d)),isSubmitted:D.keepIsSubmitted?i.isSubmitted:!1,dirtyFields:$?{}:D.keepDirtyValues?D.keepDefaultValues&&f?bs(d,f):i.dirtyFields:D.keepDefaultValues&&S?bs(d,S):D.keepDirty?i.dirtyFields:{},touchedFields:D.keepTouched?i.touchedFields:{},errors:D.keepErrors?i.errors:{},isSubmitSuccessful:D.keepIsSubmitSuccessful?i.isSubmitSuccessful:!1,isSubmitting:!1})},Ts=(S,D)=>El(Xt(S)?S(f):S,D),Ji=(S,D={})=>{const z=le(r,S),ee=z&&z._f;if(ee){const $=ee.refs?ee.refs[0]:ee.ref;$.focus&&($.focus(),D.shouldSelect&&Xt($.select)&&$.select())}},jt=S=>{i={...i,...S}},Cn={control:{register:Kt,unregister:Ea,getFieldState:qe,handleSubmit:xl,setError:Ee,_subscribe:St,_runSchema:J,_focusError:el,_getWatch:W,_getDirty:ue,_setValid:P,_setFieldArray:k,_setDisabledField:Fa,_setErrors:te,_getFieldArray:me,_reset:El,_resetDefaultValues:()=>Xt(s.defaultValues)&&s.defaultValues().then(S=>{Ts(S,s.resetOptions),_.state.next({isLoading:!1})}),_removeUnmounted:Ie,_disableForm:Al,_subjects:_,_proxyFormState:N,get _fields(){return r},get _formValues(){return f},get _state(){return g},set _state(S){g=S},get _defaultValues(){return d},get _names(){return v},set _names(S){v=S},get _formState(){return i},get _options(){return s},set _options(S){s={...s,...S}}},subscribe:Yt,trigger:ie,register:Kt,handleSubmit:xl,watch:Qe,setValue:E,getValues:pe,reset:Ts,resetField:Sn,clearErrors:Te,unregister:Ea,setError:Ee,setFocus:Ji,getFieldState:qe};return{...Cn,formControl:Cn}}function dv(o={}){const s=Vt.useRef(void 0),i=Vt.useRef(void 0),[r,d]=Vt.useState({isDirty:!1,isValidating:!1,isLoading:Xt(o.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:o.errors||{},disabled:o.disabled||!1,isReady:!1,defaultValues:Xt(o.defaultValues)?void 0:o.defaultValues});if(!s.current)if(o.formControl)s.current={...o.formControl,formState:r},o.defaultValues&&!Xt(o.defaultValues)&&o.formControl.reset(o.defaultValues,o.resetOptions);else{const{formControl:g,...v}=ov(o);s.current={...v,formState:r}}const f=s.current.control;return f._options=o,$y(()=>{const g=f._subscribe({formState:f._proxyFormState,callback:()=>d({...f._formState}),reRenderRoot:!0});return d(v=>({...v,isReady:!0})),f._formState.isReady=!0,g},[f]),Vt.useEffect(()=>f._disableForm(o.disabled),[f,o.disabled]),Vt.useEffect(()=>{o.mode&&(f._options.mode=o.mode),o.reValidateMode&&(f._options.reValidateMode=o.reValidateMode)},[f,o.mode,o.reValidateMode]),Vt.useEffect(()=>{o.errors&&(f._setErrors(o.errors),f._focusError())},[f,o.errors]),Vt.useEffect(()=>{o.shouldUnregister&&f._subjects.state.next({values:f._getWatch()})},[f,o.shouldUnregister]),Vt.useEffect(()=>{if(f._proxyFormState.isDirty){const g=f._getDirty();g!==r.isDirty&&f._subjects.state.next({isDirty:g})}},[f,r.isDirty]),Vt.useEffect(()=>{o.values&&!Wa(o.values,i.current)?(f._reset(o.values,f._options.resetOptions),i.current=o.values,d(g=>({...g}))):f._resetDefaultValues()},[f,o.values]),Vt.useEffect(()=>{f._state.mount||(f._setValid(),f._state.mount=!0),f._state.watch&&(f._state.watch=!1,f._subjects.state.next({...f._formState})),f._removeUnmounted()}),s.current.formState=Qy(r,f),s.current}const fv="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='512'%20height='512'%20viewBox='0%200%20512%20512'%20version='1.1'%3e%3cpath%20d=''%20stroke='none'%20fill='%23080404'%20fill-rule='evenodd'/%3e%3cpath%20d='M%20177.445%2062.899%20C%20151.832%2073.662,%20150.745%2074.214,%20148.542%2077.576%20C%20145.057%2082.896,%20144.957%2085.557,%20147.616%20102.376%20C%20149.118%20111.871,%20149.949%20120.425,%20149.638%20123.182%20C%20148.567%20132.686,%20142.248%20141.221,%20132.778%20145.953%20C%20125.259%20149.710,%20120.906%20149.840,%20101.312%20146.890%20C%2092.921%20145.627,%2085.650%20145.031,%2083.517%20145.431%20C%2076.786%20146.694,%2074.720%20149.829,%2064.366%20174.500%20C%2050.605%20207.291,%2050.577%20207.088,%2070.910%20222.467%20C%2086.569%20234.310,%2088.178%20235.888,%2090.922%20242.091%20C%2095.287%20251.957,%2094.310%20264.146,%2088.454%20272.915%20C%2087.136%20274.887,%2079.890%20281.225,%2072.350%20287%20C%2055.884%20299.611,%2054.536%20301.233,%2054.672%20308.275%20C%2054.754%20312.526,%2056.564%20317.684,%2064.376%20335.935%20C%2069.778%20348.554,%2075.118%20359.558,%2076.583%20361.087%20C%2081.079%20365.779,%2085.258%20366.153,%20102.696%20363.422%20C%20121.493%20360.479,%20123.461%20360.452,%20130.389%20363.044%20C%20139.775%20366.556,%20148.250%20377.227,%20149.619%20387.256%20C%20149.963%20389.775,%20149.150%20398.222,%20147.620%20408.032%20C%20144.769%20426.307,%20145.024%20429.751,%20149.562%20434.290%20C%20151.028%20435.756,%20161.680%20440.909,%20174.799%20446.498%20C%20206.779%20460.124,%20207.744%20460.020,%20221.798%20441.459%20C%20236.461%20422.094,%20240.899%20418.838,%20253.529%20418.173%20C%20268.100%20417.407,%20274.184%20421.175,%20287.834%20439.419%20C%20299.622%20455.174,%20301.260%20456.506,%20308.823%20456.483%20C%20313.717%20456.468,%20317.534%20455.186,%20336.500%20447.184%20C%20359.596%20437.440,%20364.073%20434.538,%20365.640%20428.299%20C%20366.028%20426.754,%20365.516%20420.121,%20364.498%20413.500%20C%20361.585%20394.551,%20361.414%20386.112,%20363.835%20380.641%20C%20366.791%20373.957,%20371.470%20368.606,%20376.980%20365.607%20C%20385.286%20361.086,%20389.500%20360.824,%20407.655%20363.700%20C%20434.016%20367.875,%20433.902%20367.953,%20447.161%20336.500%20C%20455%20317.903,%20456.439%20313.649,%20456.467%20309%20C%20456.512%20301.531,%20454.680%20299.225,%20438.801%20286.769%20C%20421.496%20273.193,%20419.500%20269.951,%20419.500%20255.422%20C%20419.500%20245.938,%20419.679%20245.053,%20422.541%20240.424%20C%20424.758%20236.839,%20429.327%20232.631,%20439.393%20224.905%20C%20446.989%20219.075,%20454.145%20212.820,%20455.294%20211.004%20C%20459.161%20204.896,%20458.287%20200.765,%20447.991%20176.500%20C%20442.857%20164.400,%20437.990%20153.462,%20437.176%20152.192%20C%20436.361%20150.923,%20433.885%20148.962,%20431.673%20147.833%20C%20427.189%20145.546,%20426.669%20145.559,%20403.500%20148.535%20C%20390.324%20150.227,%20389.166%20150.234,%20383.816%20148.658%20C%20377.163%20146.697,%20370.677%20142.053,%20366.797%20136.471%20C%20361.295%20128.557,%20360.728%20121.555,%20363.868%20100.311%20C%20365.956%2086.183,%20365.643%2081.715,%20362.243%2077.077%20C%20360.892%2075.236,%20353.809%2071.655,%20337.426%2064.533%20C%20316.789%2055.561,%20313.901%2054.566,%20308.500%2054.568%20C%20304.380%2054.569,%20301.647%2055.138,%20299.779%2056.381%20C%20298.282%2057.377,%20292.722%2064.264,%20287.422%2071.686%20C%20274.783%2089.385,%20269.383%2092.982,%20255.428%2092.994%20C%20247.708%2093.002,%20241.322%2090.823,%20236.194%2086.434%20C%20233.972%2084.532,%20227.870%2077.195,%20222.633%2070.129%20C%20207.972%2050.346,%20207.500%2050.270,%20177.445%2062.899%20M%20238.334%20155.410%20C%20186.946%20165.242,%20151.338%20210.205,%20154.317%20261.500%20C%20157.566%20317.449,%20204.890%20360.306,%20260.500%20357.661%20C%20273.773%20357.029,%20281.142%20355.513,%20292.821%20351.009%20C%20333.446%20335.342,%20359.988%20294.538,%20357.618%20251.393%20C%20355.036%20204.397,%20322.404%20165.838,%20277.295%20156.483%20C%20266.449%20154.233,%20247.246%20153.705,%20238.334%20155.410%20M%20248.500%20204.980%20C%20234.084%20207.280,%20219.162%20217.081,%20212.304%20228.755%20C%20191.619%20263.965,%20215.737%20307.334,%20256%20307.331%20C%20291.889%20307.328,%20316.691%20271.431,%20304.021%20237.828%20C%20295.575%20215.426,%20271.671%20201.283,%20248.500%20204.980'%20stroke='none'%20fill='%23040404'%20fill-rule='evenodd'/%3e%3c/svg%3e",hv=({onClick:o})=>u.jsx("button",{className:"settings-button",onClick:o,"aria-label":"Settings",children:u.jsx("img",{src:fv,alt:"Settings",className:"settings-icon"})}),mv=({isOpen:o,onClose:s})=>{const{currentTheme:i,changeTheme:r}=Es(),[d,f]=I.useState(i.id),g=[Aa.classic,Aa.medieval];I.useEffect(()=>{f(i.id)},[i]);const v=p=>{f(p)},T=()=>{d!==i.id&&r(d),s()},x=()=>{f(i.id),s()},N=p=>{p.target===p.currentTarget&&x()};return I.useEffect(()=>{const p=_=>{_.key==="Escape"&&o&&x()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[o]),o?u.jsx("div",{className:"settings-modal-overlay",onClick:N,children:u.jsxs("div",{className:"settings-modal",children:[u.jsxs("div",{className:"settings-modal-header",children:[u.jsx("h2",{className:"settings-modal-title",children:"Settings"}),u.jsx("button",{className:"settings-modal-close",onClick:x,"aria-label":"Close settings",children:u.jsx("svg",{className:"modal-close-icon",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),u.jsxs("div",{className:"settings-modal-body",children:[u.jsxs("div",{className:"settings-section",children:[u.jsx("h3",{className:"settings-section-title",children:"Theme"}),u.jsx("div",{className:"theme-options",children:g.map(p=>u.jsxs("div",{className:`theme-option ${d===p.id?"active":""}`,onClick:()=>v(p.id),children:[u.jsxs("div",{className:"theme-option-preview",children:[u.jsx("img",{src:p.pieceAssets.GENERAL_RED,alt:"Red General",className:"piece-preview"}),u.jsx("img",{src:p.pieceAssets.GENERAL_BLACK,alt:"Black General",className:"piece-preview"})]}),u.jsxs("div",{className:"theme-option-info",children:[u.jsx("div",{className:"theme-option-name",children:p.name}),u.jsx("div",{className:"theme-option-desc",children:p.description})]}),d===p.id&&u.jsx("div",{className:"theme-option-check",children:u.jsx("svg",{className:"check-icon",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},p.id))})]}),u.jsxs("div",{className:"settings-section",children:[u.jsx("h3",{className:"settings-section-title",children:"Other Settings"}),u.jsxs("div",{className:"settings-placeholder",children:["More settings coming soon...",u.jsx("br",{}),"(Sound, Animations, etc.)"]})]})]}),u.jsxs("div",{className:"settings-modal-footer",children:[u.jsx("button",{className:"btn-modal btn-cancel",onClick:x,children:"Cancel"}),u.jsx("button",{className:"btn-modal btn-apply",onClick:T,children:"Apply"})]})]})}):null},gv=()=>{const o=bn(),s=Nl(),{currentTheme:i}=Es(),[r,d]=I.useState(!1),[f,g]=I.useState(!1),{register:v,handleSubmit:T,formState:{errors:x},setValue:N,watch:p}=dv({defaultValues:{playerName:s.playerName||""}}),_=p("playerName");I.useEffect(()=>{s.playerName&&N("playerName",s.playerName)},[s.playerName,N]);const B=async P=>{d(!0);try{s.updatePlayerName(P.playerName),o("/lobby")}catch(U){console.error("Failed to set player name:",U)}finally{d(!1)}},X=()=>{s.playerName&&o("/lobby")};return u.jsxs(u.Fragment,{children:[u.jsx(As,{title:"Castellan - Welcome",showConnection:!1,showHeader:!1,children:u.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"var(--gradient-gray)"},children:u.jsxs("div",{className:"sp-game-container",children:[u.jsx(hv,{onClick:()=>g(!0)}),u.jsxs("div",{className:"sp-content-wrapper",children:[u.jsxs("div",{className:"sp-game-icon",children:[u.jsx("div",{className:"sp-icon-circle",children:u.jsx("img",{src:i.uiElements.startIcon.main,alt:"Game icon"})}),u.jsx("div",{className:"sp-icon-pieces sp-icon-piece-1",children:u.jsx("img",{src:i.uiElements.startIcon.piece1,alt:"Red piece"})}),u.jsx("div",{className:"sp-icon-pieces sp-icon-piece-2",children:u.jsx("img",{src:i.uiElements.startIcon.piece2,alt:"Black piece"})})]}),u.jsx("h1",{className:"sp-game-title",children:"Welcome to Castellan"}),u.jsx("p",{className:"sp-game-subtitle",children:"Enter your player name to start playing"}),u.jsxs("form",{onSubmit:T(B),className:"sp-form-container",children:[u.jsxs("div",{className:"sp-input-wrapper",children:[u.jsx("label",{className:"sp-input-label",children:"Player Name"}),u.jsx("input",{type:"text",className:"sp-glowing-input",placeholder:"Enter your name...",...v("playerName",{required:"Player name is required",minLength:{value:2,message:"Name must be at least 2 characters"},maxLength:{value:20,message:"Name must be less than 20 characters"},pattern:{value:/^[a-zA-Z0-9_-]+$/,message:"Only letters, numbers, underscore and dash allowed"}})}),x.playerName?u.jsxs("p",{className:"sp-input-error",children:["⚠️ ",x.playerName.message]}):u.jsx("p",{className:"sp-input-helper-text",children:"2-20 characters, letters and numbers only"})]}),u.jsxs("div",{className:"sp-button-group",children:[u.jsxs("button",{type:"submit",className:"btn btn-secondary btn-full",disabled:!_||r,style:{background:"#495057",color:"white"},children:[r&&u.jsx("span",{className:"sp-loading-spinner"}),r?"Setting up...":"Enter Lobby"]}),s.playerName&&u.jsxs("button",{type:"button",className:"btn btn-secondary btn-full",onClick:X,children:["Continue as ",s.playerName]}),u.jsx("div",{style:{height:"1px",background:"rgba(173, 181, 189, 0.2)",margin:"4px 0"}}),u.jsx("button",{type:"button",className:"btn btn-danger btn-full",onClick:()=>o("/tutorial"),style:{background:"#dc3545",color:"white"},children:"How to Play"})]})]})]})]})})}),u.jsx(Qi,{isVisible:r,message:"Setting up your profile...",subtitle:"Please wait while we prepare your game session"}),u.jsx(mv,{isOpen:f,onClose:()=>g(!1)})]})},yv=()=>{const o=bn(),s=Nl(),{currentTheme:i}=Es(),[r,d]=I.useState([]),[f,g]=I.useState(!1),[v,T]=I.useState(!1),[x,N]=I.useState(!1),[p,_]=I.useState(!1),[B,X]=I.useState(""),[P,U]=I.useState(Date.now());I.useEffect(()=>{(async()=>{try{await re.connectToRoom("lobby"),g(!0)}catch(q){console.error("Failed to connect to lobby:",q),g(!1)}})();const W=[],me=q=>{const F=q.detail,ie=F.data;console.log("Received room_list_update:",F),d(ie.rooms||[]),U(Date.now())};re.addEventListener("room_list_update",me),W.push(()=>re.removeEventListener("room_list_update",me));const Q=q=>{const F=q.detail,ie=F.data;console.log("Received room_created:",F),console.log("🟢 Navigation: room_id =",ie.room_id,"navigating to:",`/room/${ie.room_id}`),ie.room_id&&ie.room_id!=="lobby"&&x?(console.log("✅ Navigating to new room:",ie.room_id),N(!1),s.goToRoom(ie.room_id),re.disconnectFromRoom("lobby"),o(`/room/${ie.room_id}`)):console.log("⏭️ Ignoring room_created event:",{roomId:ie.room_id,isCreatingRoom:x,reason:ie.room_id==="lobby"?"lobby event":"not creating room"})};re.addEventListener("room_created",Q),W.push(()=>re.removeEventListener("room_created",Q));const se=q=>{const ie=q.detail.data;_(!1),T(!1),ie.room_id&&(s.goToRoom(ie.room_id),o(`/room/${ie.room_id}`))};re.addEventListener("room_joined",se),W.push(()=>re.removeEventListener("room_joined",se));const E=q=>{const F=q.detail,ie=F.data;N(!1),_(!1),console.error("Lobby error:",F),alert(ie?.message||"An error occurred")};return re.addEventListener("error",E),W.push(()=>re.removeEventListener("error",E)),f&&re.send("lobby","get_rooms",{}),()=>{W.forEach(q=>q()),re.disconnectFromRoom("lobby")}},[f,x,s,o,p]);const k=()=>{f&&re.send("lobby","get_rooms",{})},Y=()=>{N(!0),setTimeout(()=>{re.send("lobby","create_room",{player_name:s.playerName})},Tt.CREATE_ROOM_DELAY)},te=()=>{B.trim()&&re.send("lobby","join_room",{room_id:B.trim(),player_name:s.playerName})},L=ue=>{re.send("lobby","join_room",{room_id:ue,player_name:s.playerName})},G=ue=>{const W=ue.players?ue.players.filter(Q=>Q!==null).length:ue.occupied_slots||0,me=ue.total_slots||4;return!ue.started&&W<me},[Z,J]=I.useState(!1),ge=async()=>{J(!0),k(),setTimeout(()=>{J(!1),U(Date.now());const ue=document.querySelector(".lp-refreshIcon");if(ue){const W=ue.textContent;ue.textContent="✓",setTimeout(()=>{ue.textContent=W},Tt.CHECKMARK_DISPLAY_DURATION)}},Tt.REFRESH_ANIMATION_DURATION)},Ae=()=>{const ue=Date.now(),W=Math.floor((ue-P)/1e3);return W<5?"just now":W<60?`${W}s ago`:`${Math.floor(W/60)}m ago`};I.useEffect(()=>{const ue=setInterval(()=>{U(W=>W)},1e3);return()=>clearInterval(ue)},[]);const Ie=ue=>{const W=ue.players?.filter(se=>se!==null).length||0,me=G(ue),Q=ue.room_id||ue.id;return u.jsxs("div",{className:`lp-roomCard ${me?"":"lp-full"}`,onClick:()=>me&&L(Q),children:[u.jsxs("div",{className:"lp-roomCardHeader",children:[u.jsxs("div",{className:"lp-roomInfo",children:[u.jsx("div",{className:"lp-roomId",children:Q}),u.jsxs("span",{className:"lp-hostName",children:["Host:"," ",ue.host_name||ue.players?.find(se=>se?.is_host)?.name||"Unknown"]})]}),u.jsxs("div",{className:`lp-roomOccupancy ${W===4?"lp-full":""}`,children:[W,"/4"]})]}),u.jsx("div",{className:"lp-roomPlayers",children:[0,1,2,3].map(se=>{const E=ue.players?.[se];return u.jsx("div",{className:`lp-playerSlot ${E?E.is_bot?"lp-bot":"lp-filled":"lp-empty"}`,children:E?u.jsxs("div",{className:"lp-playerSlotContent",children:[u.jsx(Cl,{name:E.name||`Bot ${se+1}`,isBot:E.is_bot,size:"mini"}),u.jsx("span",{className:"lp-playerSlotName",children:E.is_bot?`Bot ${se+1}`:E.name})]}):"Empty"},se)})})]},Q)};return u.jsx(u.Fragment,{children:u.jsx(As,{title:"",showConnection:!1,showHeader:!1,children:u.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"var(--gradient-gray)"},children:u.jsxs("div",{className:"lp-gameContainer",children:[u.jsxs("div",{className:"lp-playerInfoBadge",children:[u.jsx(Cl,{name:s.playerName||"Anonymous",size:"mini",theme:"yellow"}),u.jsx("span",{children:s.playerName})]}),u.jsxs("div",{className:`connection-status ${f?"":"disconnected"}`,children:[u.jsx("span",{className:"status-dot"}),f?"Connected":"Disconnected"]}),u.jsxs("div",{className:"lp-lobbyHeader",children:[u.jsx("h1",{className:"lp-lobbyTitle",children:"Game Lobby"}),u.jsx("p",{className:"lp-lobbySubtitle",children:"Find a room or create your own"})]}),u.jsxs("div",{className:"lp-actionBar",children:[u.jsxs("div",{className:"lp-actionButtonsLeft",children:[u.jsxs("button",{className:"btn btn-success btn-sm",onClick:Y,disabled:!f||x,children:[u.jsx("span",{children:"➕"})," ",x?"Creating...":"Create Room"]}),u.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>T(!0),disabled:!f,children:[u.jsx("span",{children:"🔗"})," Join by ID"]})]}),u.jsx("button",{className:`btn btn-secondary btn-sm btn-icon-only ${Z?"lp-loading":""}`,onClick:ge,disabled:!f||Z,title:"Refresh room list",children:u.jsx("span",{className:"lp-refreshIcon",children:"🔄"})})]}),u.jsxs("div",{className:"lp-roomListSection",children:[u.jsxs("div",{className:"lp-roomListHeader",children:[u.jsxs("h2",{className:"lp-roomCount",children:["Available Rooms (",r.length,")"]}),u.jsxs("span",{className:"lp-lastUpdated",children:["Updated: ",Ae()]})]}),r.length===0?u.jsxs("div",{className:"lp-emptyState",children:[u.jsx("div",{className:"lp-emptyIcon",children:u.jsx("div",{className:"lp-iconCircle",children:u.jsx("img",{src:i.uiElements.lobbyEmpty,alt:"Empty lobby"})})}),u.jsx("div",{className:"lp-emptyText",children:"No rooms available right now"})]}):u.jsx("div",{className:"lp-roomList custom-scrollbar",children:r.map(Ie)})]}),u.jsx("div",{className:"lp-footerActions",children:u.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>o("/"),children:[u.jsx("span",{children:"←"})," Back to Start Page"]})}),u.jsx("div",{className:`lp-modalOverlay ${v?"show":""}`,children:u.jsxs("div",{className:"lp-modalContent",children:[u.jsx("h3",{className:"lp-modalTitle",children:"Join Room by ID"}),u.jsx("input",{type:"text",className:"lp-modalInput",placeholder:"Enter Room ID",maxLength:"6",value:B,onChange:ue=>X(ue.target.value.toUpperCase()),onKeyDown:ue=>{ue.key==="Enter"&&B.trim()&&te()}}),u.jsxs("div",{className:"lp-modalButtons",children:[u.jsx("button",{className:"btn btn-info btn-sm",onClick:te,disabled:!B.trim()||p,children:p?"Joining...":"Join"}),u.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{T(!1),X("")},children:"Cancel"})]})]})}),u.jsx("div",{className:`lp-loadingOverlay ${x||p?"show":""}`,children:u.jsx("div",{className:"lp-loadingSpinner"})})]})})})})},_m=({name:o,maxLength:s=8,className:i=""})=>{const r=o.length>s?`${o.substring(0,s-1)}…`:o;return u.jsx("span",{className:`truncated-name ${i}`,title:o,children:r})};_m.propTypes={name:y.string.isRequired,maxLength:y.number,className:y.string};const vv=()=>{const o=bn(),{roomId:s}=Eu(),i=Nl(),[r,d]=I.useState(null),[f,g]=I.useState(!1),[v,T]=I.useState(!1),x=r?.players?.filter(U=>U!==null).length||0,N=x===4,p=r?.players?.some(U=>U?.name===i.playerName&&U?.is_host)||!1;I.useEffect(()=>{let U=!0;const k=async()=>{try{await re.connectToRoom(s,{playerName:i.playerName}),U&&(g(!0),re.send(s,"get_room_state",{}))}catch(Y){console.error("Failed to connect to room:",Y)}};return s&&i.playerName&&k(),()=>{U=!1,s&&re.disconnectFromRoom(s)}},[s,i.playerName]),I.useEffect(()=>{if(!f)return;const U=te=>{const G=te.detail.data;console.log("🏠 ROOM_UPDATE: Full data received:",G),console.log("🏠 ROOM_UPDATE: Players array:",G.players),console.log("🏠 ROOM_UPDATE: Players array type:",typeof G.players),console.log("🏠 ROOM_UPDATE: Players array length:",G.players?.length),console.log("🏠 ROOM_UPDATE: Players array entries:",Object.entries(G.players||{})),d(G)},k=te=>{te.detail,console.log("Game started, navigating to game page"),o(`/game/${s}`)},Y=te=>{const G=te.detail.data;console.log("🏠 ROOM_CLOSED: Room was closed, navigating to lobby"),console.log("🏠 ROOM_CLOSED: Reason:",G.reason),console.log("🏠 ROOM_CLOSED: Message:",G.message),o("/lobby")};return re.addEventListener("room_update",U),re.addEventListener("game_started",k),re.addEventListener("room_closed",Y),()=>{re.removeEventListener("room_update",U),re.removeEventListener("game_started",k),re.removeEventListener("room_closed",Y)}},[f,s,o]);const _=()=>{console.log("🎮 START_GAME: Button clicked"),console.log("🎮 START_GAME: Room ID:",s),T(!0),re.send(s,"start_game",{})},B=U=>{console.log("🤖 ADD_BOT: Button clicked for slot",U),console.log("🤖 ADD_BOT: Sending to room",s),re.send(s,"add_bot",{slot_id:U})},X=U=>{console.log("🗑️ REMOVE_PLAYER: Button clicked for slot",U),console.log("🗑️ REMOVE_PLAYER: Sending to room",s),re.send(s,"remove_player",{slot_id:U})},P=()=>{console.log("🚪 LEAVE_ROOM: Button clicked"),console.log("🚪 LEAVE_ROOM: Player name:",i.playerName),console.log("🚪 LEAVE_ROOM: Room ID:",s),re.send(s,"leave_room",{player_name:i.playerName}),o("/lobby")};return i.playerName?u.jsx(As,{title:"",showConnection:!1,showHeader:!1,children:u.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"var(--gradient-gray)"},children:u.jsxs("div",{className:"rp-gameContainer",children:[u.jsxs("div",{className:`connection-status ${f?"":"disconnected"}`,children:[u.jsx("span",{className:"status-dot"}),f?"Connected":"Disconnected"]}),u.jsxs("div",{className:"rp-roomHeader",children:[u.jsx("h1",{className:"rp-roomTitle",children:"Game Room"}),u.jsxs("div",{className:"rp-roomIdBadge",children:[u.jsx("span",{className:"rp-roomIdLabel",children:"Room ID:"}),u.jsx("span",{className:"rp-roomIdValue",children:s})]})]}),u.jsxs("div",{className:"rp-playersSection",children:[u.jsx("div",{className:"rp-sectionHeader",children:u.jsxs("div",{className:`rp-playerCount ${N?"full":""}`,children:[x," / 4"]})}),u.jsx("div",{className:"rp-gameTable",children:u.jsxs("div",{className:"rp-tableSurface",children:[u.jsx("div",{className:"rp-table-wood-grain"}),[1,2,3,4].map(U=>{const k=r?.players?.[U-1],Y=!k,te=k?.is_host,L=k?.is_bot,G=k?L?`Bot ${U}`:k.name:"Waiting...";return u.jsx("div",{className:`rp-playerSeat rp-position-${U}`,children:u.jsxs("div",{className:`rp-playerCard ${Y?"rp-empty":"rp-filled"} ${te?"rp-host":""}`,children:[u.jsxs("div",{className:"rp-playerInfo",children:[!Y&&u.jsx(Cl,{name:G,isBot:L,size:"medium",avatarColor:k?.avatar_color}),u.jsx(_m,{name:G,className:"rp-playerName"})]}),te&&u.jsx("span",{className:"rp-hostBadge",children:"Host"}),Y&&p?u.jsx("div",{className:"rp-playerAction",children:u.jsx("button",{className:"rp-actionBtn rp-addBotBtn",onClick:()=>B(U),disabled:!f,children:"Add Bot"})}):!te&&p&&u.jsx("div",{className:"rp-playerAction",children:u.jsx("button",{className:"rp-actionBtn rp-removeBtn",onClick:()=>X(U),disabled:!f,children:"Remove"})})]})},U)})]})})]}),u.jsxs("div",{className:"rp-gameControls",children:[u.jsx("div",{className:`rp-roomStatus ${N?"rp-ready":""}`,children:N?"All players ready!":`Need ${4-x} more player${4-x>1?"s":""} to start`}),u.jsxs("div",{className:"rp-controlButtons",children:[p&&u.jsx("button",{className:"rp-controlButton rp-startButton",onClick:_,disabled:!f||v||!N,children:v?"Starting...":"Start Game"}),u.jsx("button",{className:"rp-controlButton rp-leaveButton",onClick:P,children:"Leave Room"})]})]})]})})}):u.jsx(As,{title:"Room Access",children:u.jsxs("div",{className:"text-center py-12",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Player Name Required"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Please set your player name first."}),u.jsx(nm,{onClick:()=>o("/"),children:"Go to Start Page"})]})})},Rm=({id:o,type:s="info",title:i,message:r,duration:d=5e3,onClose:f,position:g="top-right"})=>{I.useEffect(()=>{if(d>0){const x=setTimeout(()=>{f(o)},d);return()=>clearTimeout(x)}},[o,d,f]);const v=()=>{switch(s){case"disconnect":return"🔌";case"reconnect":return"🔗";case"ai-activated":return"🤖";case"error":return"❌";case"warning":return"⚠️";case"success":return"✅";default:return"ℹ️"}},T=()=>{switch(s){case"disconnect":return"toast--disconnect";case"reconnect":return"toast--reconnect";case"ai-activated":return"toast--ai";case"error":return"toast--error";case"warning":return"toast--warning";case"success":return"toast--success";default:return"toast--info"}};return u.jsxs("div",{className:`toast-notification ${T()}`,children:[u.jsx("div",{className:"toast-icon",children:v()}),u.jsxs("div",{className:"toast-content",children:[i&&u.jsx("div",{className:"toast-title",children:i}),u.jsx("div",{className:"toast-message",children:r})]}),u.jsx("button",{className:"toast-close",onClick:()=>f(o),"aria-label":"Close notification",children:"×"}),d>0&&u.jsx("div",{className:"toast-progress",style:{animationDuration:`${d}ms`}})]})};Rm.propTypes={id:y.string.isRequired,type:y.oneOf(["info","success","warning","error","disconnect","reconnect","ai-activated"]),title:y.string,message:y.string.isRequired,duration:y.number,onClose:y.func.isRequired,position:y.oneOf(["top-left","top-right","bottom-left","bottom-right"])};function pv(){const[o,s]=I.useState([]),i=I.useRef([]),r=I.useRef(null),d=I.useRef(0),f=500,g=()=>(d.current+=1,`toast-${Date.now()}-${d.current}`),v=I.useCallback(N=>{const p=g(),_={id:p,message:N.message,type:N.type||"info",duration:N.duration||5e3,timestamp:Date.now()};return s(B=>[...B,_]),_.duration>0&&setTimeout(()=>{T(p)},_.duration),p},[]),T=I.useCallback(N=>{s(p=>p.filter(_=>_.id!==N))},[]),x=I.useCallback(()=>{s([])},[]);return I.useEffect(()=>{const N=B=>{const X=B.disconnectedPlayers||[],P=X.filter(k=>!i.current.includes(k)),U=i.current.filter(k=>!X.includes(k));P.forEach(k=>{const Y=B.gameStartTime,te=Date.now(),L=Y?te-Y:null,G=Y&&L<f;console.log("🔔 Disconnect notification check:",{playerName:k,gameStartTime:Y?new Date(Y).toISOString():"null",now:new Date(te).toISOString(),timeSinceGameStart:L,GRACE_PERIOD_MS:f,isWithinGracePeriod:G,willShowToast:!G}),G?console.log("🔔 Suppressing disconnect toast for",k,"(within grace period)"):(console.log("🔔 Showing disconnect toast for",k),v({message:`${k} disconnected - AI is now playing for them`,type:"warning",duration:7e3}))}),U.forEach(k=>{v({message:`${k} reconnected and resumed control`,type:"success",duration:5e3})}),B.host!==r.current&&r.current!==null&&v({message:`${B.host} is now the host`,type:"info",duration:5e3}),i.current=[...X],r.current=B.host},p=Ve.addListener(N),_=Ve.getState();return _.disconnectedPlayers&&(i.current=[..._.disconnectedPlayers]),_.host&&(r.current=_.host),()=>{p()}},[v]),I.useEffect(()=>{const N=_=>{const{playerName:B,isBot:X}=_.detail||{};B&&X&&v({message:`${B} disconnected - AI is now playing for them`,type:"warning",duration:7e3})},p=_=>{const{playerName:B}=_.detail||{};B&&v({message:`${B} reconnected and resumed control`,type:"success",duration:5e3})};return window.addEventListener("player_disconnected",N),window.addEventListener("player_reconnected",p),()=>{window.removeEventListener("player_disconnected",N),window.removeEventListener("player_reconnected",p)}},[v]),{toasts:o,addToast:v,removeToast:T,clearToasts:x}}const Tm=({position:o="top-right",maxToasts:s=5})=>{const{toasts:i,removeToast:r}=pv(),d=i.slice(-s);return d.length===0?null:kg.createPortal(u.jsx("div",{className:`toast-container toast-container--${o}`,children:d.map((f,g)=>u.jsx("div",{className:"toast-wrapper",style:{animationDelay:`${g*50}ms`},children:u.jsx(Rm,{...f,onClose:r})},f.id))}),document.body)};Tm.propTypes={position:y.oneOf(["top-left","top-right","bottom-left","bottom-right"]),maxToasts:y.number};const bv=()=>{const o=bn(),{roomId:s}=Eu(),i=Nl(),r=Zu();hm();const d=mm(s),[f,g]=I.useState(!1);return I.useEffect(()=>((async()=>{try{const T=i.playerName;if(!T){console.error("No player name found, redirecting to start page"),o("/");return}if(s){const x=xs();x&&x.roomId===s&&x.playerName===T&&console.log("🎮 GamePage: Recovering session for",T,"in room",s),await ct.connectToRoom(s,T),g(!0)}}catch(T){console.error("Failed to initialize game:",T),T.message.includes("Room not found")&&o("/lobby")}})(),()=>{s&&ct.disconnectFromRoom().catch(T=>{console.error("Error disconnecting on unmount:",T)})}),[s,o,i.playerName]),I.useEffect(()=>{d.error&&!d.isConnecting&&console.error("Critical connection error:",d.error)},[d.error,d.isConnecting]),!f&&!r.error?u.jsx(Qi,{isVisible:!0,message:"Connecting to game...",subtitle:"Initializing game state and connecting to server"}):u.jsx(yn,{children:u.jsxs("div",{className:"game-page-wrapper",children:[u.jsx(Tm,{position:"top-right",maxToasts:5}),u.jsx(Yu,{roomId:s,onNavigateToLobby:()=>o("/lobby")})]})})},Sv=()=>{const o=bn(),{currentTheme:s}=Es(),[i,r]=I.useState(0),d=7,f={general:{kind:"GENERAL",color:"RED",value:11},advisor:{kind:"ADVISOR",color:"BLACK",value:10},elephant:{kind:"ELEPHANT",color:"RED",value:9},horse:{kind:"HORSE",color:"BLACK",value:8},chariot:{kind:"CHARIOT",color:"RED",value:7},cannon:{kind:"CANNON",color:"BLACK",value:6},soldier1:{kind:"SOLDIER",color:"RED",value:3}},g=[{title:"Welcome to Castellan!",content:u.jsxs("div",{className:"tutorial-welcome",children:[u.jsxs("div",{className:"welcome-hero",children:[u.jsx("div",{className:"hero-icon",children:"🏰"}),u.jsx("h2",{children:"Master the art of prediction in this strategic card game!"})]}),u.jsxs("div",{className:"info-cards",children:[u.jsxs("div",{className:"info-card",children:[u.jsxs("div",{className:"info-card-title",children:[u.jsx("span",{children:"🎯"}),u.jsx("span",{children:"Objective"})]}),u.jsx("div",{className:"info-card-desc",children:"Predict how many tricks you'll win each round and match your prediction exactly for bonus points!"})]}),u.jsxs("div",{className:"info-card",children:[u.jsxs("div",{className:"info-card-title",children:[u.jsx("span",{children:"👥"}),u.jsx("span",{children:"Players"})]}),u.jsx("div",{className:"info-card-desc",children:"4 players compete with 8 pieces each per round"})]}),u.jsxs("div",{className:"info-card",children:[u.jsxs("div",{className:"info-card-title",children:[u.jsx("span",{children:"🏆"}),u.jsx("span",{children:"Victory"})]}),u.jsx("div",{className:"info-card-desc",children:"First player to reach 50 points wins the game"})]})]})]})},{title:"Piece Ranks",content:u.jsxs("div",{className:"tutorial-pieces",children:[u.jsxs("div",{className:"piece-showcase",children:[u.jsxs("div",{className:"piece-group",children:[u.jsx("div",{className:"piece-set",children:u.jsx(fe,{piece:f.general,size:"small"})}),u.jsx("div",{className:"piece-set",children:u.jsx(fe,{piece:{...f.general,color:"BLACK"},size:"small"})})]}),u.jsxs("div",{className:"piece-group",children:[u.jsxs("div",{className:"piece-set",children:[u.jsx(fe,{piece:{...f.advisor,color:"RED"},size:"small"}),u.jsx(fe,{piece:{...f.advisor,color:"RED"},size:"small"})]}),u.jsxs("div",{className:"piece-set",children:[u.jsx(fe,{piece:f.advisor,size:"small"}),u.jsx(fe,{piece:f.advisor,size:"small"})]})]}),u.jsxs("div",{className:"piece-group",children:[u.jsxs("div",{className:"piece-set",children:[u.jsx(fe,{piece:f.elephant,size:"small"}),u.jsx(fe,{piece:f.elephant,size:"small"})]}),u.jsxs("div",{className:"piece-set",children:[u.jsx(fe,{piece:{...f.elephant,color:"BLACK"},size:"small"}),u.jsx(fe,{piece:{...f.elephant,color:"BLACK"},size:"small"})]})]}),u.jsxs("div",{className:"piece-group",children:[u.jsxs("div",{className:"piece-set",children:[u.jsx(fe,{piece:{...f.horse,color:"RED"},size:"small"}),u.jsx(fe,{piece:{...f.horse,color:"RED"},size:"small"})]}),u.jsxs("div",{className:"piece-set",children:[u.jsx(fe,{piece:f.horse,size:"small"}),u.jsx(fe,{piece:f.horse,size:"small"})]})]}),u.jsxs("div",{className:"piece-group",children:[u.jsxs("div",{className:"piece-set",children:[u.jsx(fe,{piece:f.chariot,size:"small"}),u.jsx(fe,{piece:f.chariot,size:"small"})]}),u.jsxs("div",{className:"piece-set",children:[u.jsx(fe,{piece:{...f.chariot,color:"BLACK"},size:"small"}),u.jsx(fe,{piece:{...f.chariot,color:"BLACK"},size:"small"})]})]}),u.jsxs("div",{className:"piece-group",children:[u.jsxs("div",{className:"piece-set",children:[u.jsx(fe,{piece:{...f.cannon,color:"RED"},size:"small"}),u.jsx(fe,{piece:{...f.cannon,color:"RED"},size:"small"})]}),u.jsxs("div",{className:"piece-set",children:[u.jsx(fe,{piece:f.cannon,size:"small"}),u.jsx(fe,{piece:f.cannon,size:"small"})]})]}),u.jsxs("div",{className:"soldiers-section",children:[u.jsxs("div",{className:"soldier-row",children:[u.jsx(fe,{piece:{kind:"SOLDIER",color:"RED",value:5},size:"small"}),u.jsx(fe,{piece:{kind:"SOLDIER",color:"RED",value:4},size:"small"}),u.jsx(fe,{piece:{kind:"SOLDIER",color:"RED",value:3},size:"small"}),u.jsx(fe,{piece:{kind:"SOLDIER",color:"RED",value:2},size:"small"}),u.jsx(fe,{piece:{kind:"SOLDIER",color:"RED",value:1},size:"small"})]}),u.jsxs("div",{className:"soldier-row",children:[u.jsx(fe,{piece:{kind:"SOLDIER",color:"BLACK",value:5},size:"small"}),u.jsx(fe,{piece:{kind:"SOLDIER",color:"BLACK",value:4},size:"small"}),u.jsx(fe,{piece:{kind:"SOLDIER",color:"BLACK",value:3},size:"small"}),u.jsx(fe,{piece:{kind:"SOLDIER",color:"BLACK",value:2},size:"small"}),u.jsx(fe,{piece:{kind:"SOLDIER",color:"BLACK",value:1},size:"small"})]})]})]}),u.jsx("p",{className:"tutorial-note",children:"Pieces with higher rank beat lower rank. Same value? First played wins!"})]})},{title:"Phase 1: Preparation",content:u.jsxs("div",{className:"prep-container",children:[u.jsx("div",{className:"prep-header",children:u.jsx("h2",{className:"prep-title",children:"Getting Ready to Play"})}),u.jsxs("div",{className:"prep-content",children:[u.jsx("div",{className:"prep-item",children:u.jsx("h3",{className:"prep-item-title",children:"Deal 8 pieces to each player"})}),u.jsx("div",{className:"prep-divider"}),u.jsxs("div",{className:"prep-item",children:[u.jsx("h3",{className:"prep-item-title",children:"Find who goes first"}),u.jsxs("div",{className:"prep-item-text",children:[u.jsx(fe,{piece:{kind:"GENERAL",color:"RED",value:11},size:"mini"}),u.jsx("span",{children:"holder starts the first round"})]})]}),u.jsx("div",{className:"prep-divider"}),u.jsxs("div",{className:"prep-item",children:[u.jsx("h3",{className:"prep-item-title",children:"Check for weak hands"}),u.jsxs("div",{className:"prep-item-text-with-margin",children:[u.jsx(fe,{piece:{kind:"ELEPHANT",color:"BLACK",value:9},size:"mini"}),u.jsx("span",{children:"or below qualifies for redeal request"})]}),u.jsxs("div",{className:"prep-warning",children:[u.jsx("strong",{children:"Note:"})," Redealing multiplies everyone's scores (both wins and losses!)"]})]})]})]})},{title:"Phase 2: Declaration",content:u.jsx("div",{className:"tutorial-phase",children:u.jsxs("div",{className:"prep-steps",children:[u.jsxs("div",{className:"prep-step",children:[u.jsx("div",{className:"step-number",children:"1"}),u.jsxs("div",{className:"step-text",children:[u.jsx("strong",{children:"Make Your Prediction"}),u.jsx("p",{className:"step-detail",children:"Each player declares how many tricks (0-8) they expect to win this round. This is your target score."})]})]}),u.jsxs("div",{className:"prep-step",style:{background:"rgba(220, 53, 69, 0.05)",borderColor:"rgba(220, 53, 69, 0.2)"},children:[u.jsx("div",{className:"step-number",style:{background:"var(--color-danger)",color:"white"},children:"!"}),u.jsxs("div",{className:"step-text",children:[u.jsx("strong",{children:"The Forcing Rule"}),u.jsx("p",{className:"step-detail",children:"Total declarations cannot equal 8! This guarantees competition - not everyone can achieve their goal."}),u.jsxs("div",{className:"example-box",style:{marginTop:"8px"},children:[u.jsx("strong",{children:"Example:"})," If 3 players declared 2, 2, 3 (total = 7), the last player CANNOT declare 1"]})]})]})]})})},{title:"Phase 3: Playing",content:u.jsx("div",{className:"tutorial-phase",children:u.jsxs("div",{className:"prep-steps",children:[u.jsxs("div",{className:"prep-step",children:[u.jsx("div",{className:"step-number",children:"1"}),u.jsxs("div",{className:"step-text",children:[u.jsx("strong",{children:"Leader Plays First"}),u.jsx("p",{className:"step-detail",children:"The trick leader plays 1-6 pieces. Must be a valid combination (single, pair, three-of-a-kind, or straight)."})]})]}),u.jsxs("div",{className:"prep-step",children:[u.jsx("div",{className:"step-number",children:"2"}),u.jsxs("div",{className:"step-text",children:[u.jsx("strong",{children:"Others Follow"}),u.jsx("p",{className:"step-detail",children:"Each player must play the same number of pieces. You can play invalid combinations to forfeit the trick."})]})]}),u.jsxs("div",{className:"prep-step",children:[u.jsx("div",{className:"step-number",children:"3"}),u.jsxs("div",{className:"step-text",children:[u.jsx("strong",{children:"Winner Takes Trick"}),u.jsx("p",{className:"step-detail",children:"Highest valid play wins all pieces in the trick and leads the next one."})]})]}),u.jsxs("div",{className:"prep-step",style:{background:"rgba(255, 193, 7, 0.05)",borderColor:"rgba(255, 193, 7, 0.2)"},children:[u.jsx("div",{className:"step-number",style:{background:"var(--color-warning)",color:"var(--color-gray-800)"},children:"💡"}),u.jsxs("div",{className:"step-text",children:[u.jsx("strong",{children:"Strategic Forfeit"}),u.jsx("p",{className:"step-detail",children:"Playing invalid combinations lets you dump unwanted pieces without winning tricks you don't want!"})]})]})]})})},{title:"Valid Play Types",content:u.jsxs("div",{className:"tutorial-phase",children:[u.jsxs("div",{className:"play-types-showcase",children:[u.jsxs("div",{className:"play-type-item",children:[u.jsx("div",{className:"play-type-visual",children:u.jsx(fe,{piece:f.cannon,size:"small"})}),u.jsxs("div",{className:"play-type-info",children:[u.jsx("strong",{children:"Single"}),u.jsx("p",{className:"step-detail",children:"Any one piece"})]})]}),u.jsxs("div",{className:"play-type-item",children:[u.jsxs("div",{className:"play-type-visual",children:[u.jsx(fe,{piece:f.horse,size:"small"}),u.jsx(fe,{piece:f.horse,size:"small"})]}),u.jsxs("div",{className:"play-type-info",children:[u.jsx("strong",{children:"Pair"}),u.jsx("p",{className:"step-detail",children:"Two pieces of same type AND same color"})]})]}),u.jsxs("div",{className:"play-type-item",children:[u.jsxs("div",{className:"play-type-visual",children:[u.jsx(fe,{piece:f.soldier1,size:"small"}),u.jsx(fe,{piece:f.soldier1,size:"small"}),u.jsx(fe,{piece:f.soldier1,size:"small"})]}),u.jsxs("div",{className:"play-type-info",children:[u.jsx("strong",{children:"Three-of-a-kind"}),u.jsx("p",{className:"step-detail",children:"Three soldiers only (any combination)"})]})]}),u.jsxs("div",{className:"play-type-item",children:[u.jsxs("div",{className:"play-type-visual",children:[u.jsx(fe,{piece:{...f.cannon,color:"RED"},size:"small"}),u.jsx(fe,{piece:f.chariot,size:"small"}),u.jsx(fe,{piece:{...f.horse,color:"RED"},size:"small"})]}),u.jsxs("div",{className:"play-type-info",children:[u.jsx("strong",{children:"Straight"}),u.jsx("p",{className:"step-detail",children:"Consecutive values (all same color)"})]})]})]}),u.jsxs("div",{className:"prep-step",style:{background:"rgba(255, 193, 7, 0.05)",borderColor:"rgba(255, 193, 7, 0.2)",marginTop:"16px"},children:[u.jsx("div",{className:"step-number",style:{background:"var(--color-warning)",color:"var(--color-gray-800)"},children:"!"}),u.jsxs("div",{className:"step-text",children:[u.jsx("strong",{children:"Key Rule"}),u.jsx("p",{className:"step-detail",children:"Only the trick leader needs valid combinations. Others can play any pieces to match the count!"})]})]})]})},{title:"Scoring System",content:u.jsx("div",{className:"tutorial-phase",children:u.jsxs("div",{className:"prep-steps",children:[u.jsxs("div",{className:"prep-step compact",children:[u.jsx("div",{className:"step-number",children:"✓"}),u.jsxs("div",{className:"step-text",children:[u.jsx("strong",{children:"Hit Your Target"}),u.jsxs("p",{className:"step-detail",children:["Win exactly what you declared ="," ",u.jsx("strong",{children:"Tricks + 5 bonus"})]}),u.jsxs("div",{className:"example-inline",children:["Example: Declare 2, win 2 = 2 + 5 = ",u.jsx("strong",{children:"+7 points"})]})]})]}),u.jsxs("div",{className:"prep-step compact",style:{background:"rgba(220, 53, 69, 0.05)",borderColor:"rgba(220, 53, 69, 0.2)"},children:[u.jsx("div",{className:"step-number",style:{background:"var(--color-danger)",color:"white"},children:"✗"}),u.jsxs("div",{className:"step-text",children:[u.jsx("strong",{children:"Miss Your Target"}),u.jsxs("p",{className:"step-detail",children:["Penalty = ",u.jsx("strong",{children:"-|difference|"})," between declared and won"]}),u.jsxs("div",{className:"example-inline",children:["Example: Declare 3, win 1 = -(3-1) ="," ",u.jsx("strong",{children:"-2 points"})]})]})]}),u.jsxs("div",{className:"prep-step",style:{background:"rgba(255, 193, 7, 0.05)",borderColor:"rgba(255, 193, 7, 0.2)"},children:[u.jsx("div",{className:"step-number",style:{background:"var(--color-warning)",color:"var(--color-gray-800)"},children:"💎"}),u.jsxs("div",{className:"step-text",children:[u.jsx("strong",{children:"Special: The 0/0 Strategy"}),u.jsxs("p",{className:"step-detail",children:["Declaring 0 and winning 0 tricks gives"," ",u.jsx("strong",{children:"+3 points"}),". High risk, but saves you when you have a terrible hand!"]})]})]})]})})}],v=()=>{i<d-1&&r(i+1)},T=()=>{i>0&&r(i-1)},x=p=>{r(p)},N=()=>{o("/")};return u.jsx(As,{title:"How to Play",showConnection:!1,showHeader:!1,children:u.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"var(--gradient-gray)"},children:u.jsxs("div",{className:"tp-gameContainer",children:[u.jsxs("div",{className:"tp-tutorialHeader",children:[u.jsx("button",{className:"tp-backButton",onClick:()=>o("/"),title:"Back to Start",children:u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),u.jsx("h1",{className:"tp-tutorialTitle",children:g[i].title})]}),u.jsxs("div",{className:"tp-tutorialContent",children:[u.jsx("div",{className:"tp-slideContainer",children:g.map((p,_)=>u.jsx("div",{className:`tp-slide ${_===i?"active":""}`,style:{transform:`translateX(${(_-i)*100}%)`},children:u.jsx("div",{className:"tp-slideContent",children:p.content})},_))}),u.jsx("div",{className:"tp-navDots",children:g.map((p,_)=>u.jsx("div",{className:`tp-dot ${_===i?"active":""}`,onClick:()=>x(_)},_))})]}),u.jsxs("div",{className:"tp-footer",children:[u.jsx("button",{className:"tp-navArrow",onClick:T,disabled:i===0,title:"Previous",children:u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M15 18l-6-6 6-6"})})}),u.jsxs("div",{className:"tp-slideCounter",children:[i+1," / ",d]}),i===d-1?u.jsx("button",{className:"btn btn-primary btn-sm",onClick:N,children:"Start Playing"}):u.jsx("button",{className:"tp-navArrow",onClick:v,title:"Next",children:u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:u.jsx("path",{d:"M9 18l6-6-6-6"})})})]})]})})})},Sh=({children:o,requiredData:s=[]})=>{const i=Nl();if(!s.every(d=>{switch(d){case"playerName":return!!i.playerName;case"roomId":return!!i.currentRoomId;default:return!0}})){if(!i.playerName)return u.jsx(Zi,{to:"/",replace:!0});if(!i.currentRoomId)return u.jsx(Zi,{to:"/lobby",replace:!0})}return o},Cv=({children:o})=>{const s=Nl(),{roomId:i}=Eu(),[r,d]=I.useState(!0);return I.useEffect(()=>{if(!s.playerName||!s.currentRoomId){const f=xs();f&&f.roomId===i&&(console.log("🎮 GameRoute: Recovering session data"),s.setPlayerName(f.playerName),s.setCurrentRoomId(f.roomId))}d(!1)},[s,i]),r?u.jsx(Qi,{isVisible:!0,message:"Checking session...",subtitle:"Please wait while we verify your game session"}):!s.playerName||!s.currentRoomId?u.jsx(Zi,{to:"/",replace:!0}):u.jsx(oy,{roomId:s.currentRoomId,playerName:s.playerName,children:o})},Nv=({sessionToRecover:o})=>u.jsx(Xg,{children:u.jsx(Av,{sessionToRecover:o})}),Av=({sessionToRecover:o})=>{const s=bn(),i=Nl();return I.useEffect(()=>{o&&(i.updatePlayerName(o.playerName),console.log("🎮 Recovering session, navigating to game:",o.roomId),s(`/game/${o.roomId}`))},[o,s,i]),u.jsxs(Yg,{children:[u.jsx(hn,{path:"/",element:u.jsx(gv,{})}),u.jsx(hn,{path:"/tutorial",element:u.jsx(Sv,{})}),u.jsx(hn,{path:"/lobby",element:u.jsx(Sh,{requiredData:["playerName"],children:u.jsx(yv,{})})}),u.jsx(hn,{path:"/room/:roomId",element:u.jsx(Sh,{requiredData:["playerName","roomId"],children:u.jsx(vv,{})})}),u.jsx(hn,{path:"/game/:roomId",element:u.jsx(Cv,{children:u.jsx(bv,{})})}),u.jsx(hn,{path:"*",element:u.jsx(Zi,{to:"/",replace:!0})})]})},xv=()=>{const[o,s]=I.useState(!1),[i,r]=I.useState(null),[d,f]=I.useState(null);return I.useEffect(()=>((async()=>{try{if(py(),await ry(),Nh()){const v=xs();console.log("🎮 Found stored session:",v),f(v)}s(!0),console.log("🎮 Global services initialized")}catch(v){console.error("Failed to initialize global services:",v),r(v.message)}})(),()=>{cy(),console.log("🎮 Global services cleaned up")}),[]),i?u.jsx("div",{className:"service-init-overlay",children:u.jsxs("div",{className:"service-init-container",children:[u.jsx("h1",{className:"service-error-title",children:"Service Initialization Failed"}),u.jsx("p",{className:"service-error-message",children:i}),u.jsx("button",{onClick:()=>window.location.reload(),className:"service-retry-button",children:"Retry"})]})}):o?u.jsx(Nv,{sessionToRecover:d}):u.jsx("div",{className:"service-init-overlay",children:u.jsxs("div",{className:"service-init-container",children:[u.jsx("div",{className:"service-loading-spinner"}),u.jsx("p",{className:"service-loading-text",children:"Initializing game services..."})]})})},Ev=()=>u.jsx(yn,{children:u.jsx(by,{children:u.jsx(ey,{children:u.jsx(xv,{})})})}),_v=document.getElementById("root"),Rv=Fg.createRoot(_v);Rv.render(u.jsx(Ev,{}));
//# sourceMappingURL=main-BRsBX__D.js.map
