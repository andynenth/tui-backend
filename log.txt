2025-07-16 17:49:44 - game.state.turn - INFO - Exiting turn phase
2025-07-16 17:49:44 - game.state.turn - INFO - 🏁 Turn phase complete - all hands empty
2025-07-16 17:49:44 - game.state.turn_results - INFO - Entering turn_results phase
2025-07-16 17:49:44 - game.state.turn_results - INFO - 🏆 Turn results phase starting - displaying turn outcome
2025-07-16 17:49:44 - game.state.turn_results - INFO - ℹ️ TURNS_WON_DEBUG: No turn winner to update
2025-07-16 17:49:44 - game.state.turn_results - INFO - 🎮 Phase Data Update: Displaying turn results - winner: None
2025-07-16 17:49:44 - game.state.turn_results - INFO - 📤 Auto-broadcast: phase_change to room 472877 - Displaying turn results - winner: None
2025-07-16 17:49:44 - engine.state_machine.game_state_machine - INFO - Stored phase change event: GamePhase.TURN -> GamePhase.TURN_RESULTS
2025-07-16 17:49:44 - engine.state_machine.game_state_machine - INFO - Notifying bot manager about phase turn_results
2025-07-16 17:49:45 - game.state.turn_results - WARNING - Unhandled action in turn results phase: ActionType.PLAY_PIECES
2025-07-16 17:49:45 - game.state.turn_results - WARNING - Unhandled action in turn results phase: ActionType.PLAY_PIECES
2025-07-16 17:49:45 - game.state.turn_results - WARNING - Unhandled action in turn results phase: ActionType.PLAY_PIECES
2025-07-16 17:49:51 - game.state.turn_results - INFO - 🎮 Phase Data Update: Auto-transition triggered after 7.0s display
2025-07-16 17:49:51 - game.state.turn_results - INFO - 📤 Auto-broadcast: phase_change to room 472877 - Auto-transition triggered after 7.0s display
2025-07-16 17:49:51 - game.state.turn_results - INFO - 🏆 Turn results complete - transitioning to GamePhase.SCORING
2025-07-16 17:49:51 - engine.state_machine.game_state_machine - INFO - Transitioning from GamePhase.TURN_RESULTS to GamePhase.SCORING
2025-07-16 17:49:51 - engine.state_machine.game_state_machine - INFO - 🔄 Transitioning: GamePhase.TURN_RESULTS -> GamePhase.SCORING
2025-07-16 17:49:51 - game.state.turn_results - INFO - Exiting turn_results phase
2025-07-16 17:49:51 - game.state.turn_results - INFO - 🏆 Cleaning up turn results phase
2025-07-16 17:49:51 - game.state.scoring - INFO - Entering scoring phase
🔄 SCORING_SETUP_DEBUG: Reset display_delay_complete = False
2025-07-16 17:49:51 - game.state.scoring - INFO - Setting up Scoring Phase
🗳️ DECLARATION_DEBUG: game.player_declarations = {'Andy': 4, 'Bot 2': 2, 'Bot 3': 1, 'Bot 4': 1}
📋 SCORING_FIX_DEBUG: Andy - declared: 4, actual: 4
2025-07-16 17:49:51 - game.state.scoring - INFO - 🎯 PERFECT_ROUNDS_DEBUG: Andy had perfect round! perfect_rounds: 0 -> 1
🏆 SCORING_DEBUG: Andy scoring data:
   📋 Declared: 4, Actual: 4
   📊 Base Score: 9, Multiplier: 1x, Final: 9
   💯 Total Score: 9
2025-07-16 17:49:51 - game.state.scoring - INFO - Player Andy: declared 4, actual 4, base 9, final 9 (×1), total 9
📋 SCORING_FIX_DEBUG: Bot 2 - declared: 2, actual: 4
🏆 SCORING_DEBUG: Bot 2 scoring data:
   📋 Declared: 2, Actual: 4
   📊 Base Score: -2, Multiplier: 1x, Final: -2
   💯 Total Score: -2
2025-07-16 17:49:51 - game.state.scoring - INFO - Player Bot 2: declared 2, actual 4, base -2, final -2 (×1), total -2
📋 SCORING_FIX_DEBUG: Bot 3 - declared: 1, actual: 0
🏆 SCORING_DEBUG: Bot 3 scoring data:
   📋 Declared: 1, Actual: 0
   📊 Base Score: -1, Multiplier: 1x, Final: -1
   💯 Total Score: -1
2025-07-16 17:49:51 - game.state.scoring - INFO - Player Bot 3: declared 1, actual 0, base -1, final -1 (×1), total -1
📋 SCORING_FIX_DEBUG: Bot 4 - declared: 1, actual: 0
🏆 SCORING_DEBUG: Bot 4 scoring data:
   📋 Declared: 1, Actual: 0
   📊 Base Score: -1, Multiplier: 1x, Final: -1
   💯 Total Score: -1
2025-07-16 17:49:51 - game.state.scoring - INFO - Player Bot 4: declared 1, actual 0, base -1, final -1 (×1), total -1
🚀 SCORING_BROADCAST_DEBUG: Broadcasting scoring data:
   📊 Round scores: {'Andy': {'declared': 4, 'actual': 4, 'base_score': 9, 'bonus': 5, 'hit_value': 4, 'multiplier': 1, 'final_score': 9, 'total_score': 9}, 'Bot 2': {'declared': 2, 'actual': 4, 'base_score': -2, 'bonus': 0, 'hit_value': -2, 'multiplier': 1, 'final_score': -2, 'total_score': -2}, 'Bot 3': {'declared': 1, 'actual': 0, 'base_score': -1, 'bonus': 0, 'hit_value': -1, 'multiplier': 1, 'final_score': -1, 'total_score': -1}, 'Bot 4': {'declared': 1, 'actual': 0, 'base_score': -1, 'bonus': 0, 'hit_value': -1, 'multiplier': 1, 'final_score': -1, 'total_score': -1}}
   🏁 Game complete: False
   🏆 Winners: []
🚀 SCORING_BROADCAST_DEBUG: Also sending:
   💯 Total scores: {'Andy': 9, 'Bot 2': -2, 'Bot 3': -1, 'Bot 4': -1}
   👥 Scoring players data: [{'name': 'Andy', 'is_bot': False, 'pile_count': 4, 'captured_piles': 4}, {'name': 'Bot 2', 'is_bot': True, 'pile_count': 2, 'captured_piles': 4}, {'name': 'Bot 3', 'is_bot': True, 'pile_count': 1, 'captured_piles': 0}, {'name': 'Bot 4', 'is_bot': True, 'pile_count': 1, 'captured_piles': 0}]
2025-07-16 17:49:51 - game.state.scoring - INFO - 🎮 Phase Data Update: Scoring calculated for round 1
2025-07-16 17:49:51 - game.state.scoring - INFO - 📤 Auto-broadcast: phase_change to room 472877 - Scoring calculated for round 1
2025-07-16 17:49:51 - game.state.scoring - INFO - Scoring complete. Game over: False
2025-07-16 17:49:51 - engine.state_machine.game_state_machine - INFO - Stored phase change event: GamePhase.TURN_RESULTS -> GamePhase.SCORING
2025-07-16 17:49:51 - engine.state_machine.game_state_machine - INFO - Notifying bot manager about phase scoring
⏰ SCORING_DELAY_DEBUG: Starting 7-second display delay...
⏰ SCORING_DELAY_DEBUG: 7-second delay complete - setting display_delay_complete = True
2025-07-16 17:49:58 - game.state.scoring - INFO - Scoring display delay complete - ready to transition
2025-07-16 17:49:58 - game.state.scoring - INFO - 🔍 SCORING_TRANSITION_DEBUG: Ready to transition to PREPARATION
2025-07-16 17:49:58 - engine.state_machine.game_state_machine - INFO - Transitioning from GamePhase.SCORING to GamePhase.PREPARATION
2025-07-16 17:49:58 - engine.state_machine.game_state_machine - INFO - 🔄 Transitioning: GamePhase.SCORING -> GamePhase.PREPARATION
2025-07-16 17:49:58 - game.state.scoring - INFO - Exiting scoring phase
2025-07-16 17:49:58 - game.state.scoring - INFO - 🎯 Next round starter set to last turn winner: Andy
2025-07-16 17:49:58 - game.state.scoring - INFO - Prepared for round 2
2025-07-16 17:49:58 - game.state.scoring - INFO - Prepared for next round
2025-07-16 17:49:58 - game.state.preparation - INFO - Entering preparation phase
2025-07-16 17:49:58 - game.state.preparation - INFO - 🎴 Preparation phase starting - dealing cards
2025-07-16 17:49:58 - game.state.preparation - INFO - 🎮 Phase Data Update: Starting to deal cards
2025-07-16 17:49:58 - game.state.preparation - INFO - 📤 Auto-broadcast: phase_change to room 472877 - Starting to deal cards
2025-07-16 17:49:58 - game.state.preparation - INFO - 🔍 Weak hand check - Found 0 weak players: set()
2025-07-16 17:49:58 - game.state.preparation - INFO - ✅ No weak hands - keeping existing starter: Andy (reason: won_last_turn)
2025-07-16 17:50:00 - game.state.preparation - INFO - 🎮 Phase Data Update: Cards dealt, checking for weak hands
2025-07-16 17:50:00 - game.state.preparation - INFO - 📤 Auto-broadcast: phase_change to room 472877 - Cards dealt, checking for weak hands
2025-07-16 17:50:00 - engine.state_machine.game_state_machine - INFO - Stored phase change event: GamePhase.SCORING -> GamePhase.PREPARATION
2025-07-16 17:50:00 - engine.state_machine.game_state_machine - INFO - Notifying bot manager about phase preparation
2025-07-16 17:50:01 - engine.state_machine.game_state_machine - INFO - Transitioning from GamePhase.PREPARATION to GamePhase.ROUND_START
2025-07-16 17:50:01 - engine.state_machine.game_state_machine - INFO - 🔄 Transitioning: GamePhase.PREPARATION -> GamePhase.ROUND_START
2025-07-16 17:50:01 - game.state.preparation - INFO - Exiting preparation phase
2025-07-16 17:50:01 - game.state.preparation - INFO - 🎯 Round starter already set: Andy
2025-07-16 17:50:01 - game.state.preparation - INFO - 📋 Preparation complete - Starter: Andy, Multiplier: 1x
2025-07-16 17:50:01 - game.state.round_start - INFO - Entering round_start phase
2025-07-16 17:50:01 - game.state.round_start - INFO - 📋 Round 2 starting - Starter: Andy (won_last_turn)
2025-07-16 17:50:01 - game.state.round_start - INFO - 🎮 Phase Data Update: Round 2 starting with Andy
2025-07-16 17:50:01 - game.state.round_start - INFO - 📤 Auto-broadcast: phase_change to room 472877 - Round 2 starting with Andy
2025-07-16 17:50:01 - engine.state_machine.game_state_machine - INFO - Stored phase change event: GamePhase.PREPARATION -> GamePhase.ROUND_START
2025-07-16 17:50:01 - engine.state_machine.game_state_machine - INFO - Notifying bot manager about phase round_start
2025-07-16 17:50:06 - engine.state_machine.game_state_machine - INFO - Transitioning from GamePhase.ROUND_START to GamePhase.DECLARATION
2025-07-16 17:50:06 - engine.state_machine.game_state_machine - INFO - 🔄 Transitioning: GamePhase.ROUND_START -> GamePhase.DECLARATION
2025-07-16 17:50:06 - game.state.round_start - INFO - Exiting round_start phase
2025-07-16 17:50:06 - game.state.round_start - INFO - 🎯 Round start display complete - transitioning to Declaration
2025-07-16 17:50:06 - game.state.declaration - INFO - Entering declaration phase
2025-07-16 17:50:06 - game.state.declaration - INFO - 🎮 Phase Data Update: Declaration phase setup - basic data
2025-07-16 17:50:06 - game.state.declaration - INFO - 📤 Auto-broadcast: phase_change to room 472877 - Declaration phase setup - basic data
2025-07-16 17:50:06 - game.state.declaration - INFO - 🎮 Phase Data Update: Declaration phase setup complete - current declarer: Andy
2025-07-16 17:50:06 - game.state.declaration - INFO - 📤 Auto-broadcast: phase_change to room 472877 - Declaration phase setup complete - current declarer: Andy
2025-07-16 17:50:06 - engine.state_machine.game_state_machine - INFO - Stored phase change event: GamePhase.ROUND_START -> GamePhase.DECLARATION
2025-07-16 17:50:06 - engine.state_machine.game_state_machine - INFO - Notifying bot manager about phase declaration
👤 Round starter is human or None: None