ğŸ‘€ Watching for changes to ./main.js, output to ../backend/static/

[108.71ms] [@tailwindcss/postcss] src/styles/globals.css
[  0.08ms]   â†³ Quick bail check
[ 26.19ms]   â†³ Setup compiler
[  0.46ms]     â†³ PostCSS AST -> Tailwind CSS AST
[ 25.71ms]     â†³ Create compiler
[  0.10ms]   â†³ Register full rebuild paths
[  1.72ms]   â†³ Setup scanner
[ 10.81ms]   â†³ Scan for candidates
[  8.68ms]   â†³ Register dependency messages
[ 53.98ms]   â†³ Build utilities
[  4.81ms]   â†³ Transform Tailwind CSS AST into PostCSS AST
[  1.92ms]   â†³ Update PostCSS AST

INFO:     ('127.0.0.1', 56943) - "WebSocket /ws/lobby" [accepted]
DEBUG_WS: Created new enhanced broadcast queue and task for room lobby.
DEBUG_WS: Registered new connection for room lobby. Total connections: 1
INFO:     connection open
ğŸ”„ RELIABLE_MSG: Message retry worker started
DEBUG_WS: Starting enhanced broadcast queue processor for room lobby.
DEBUG_WS_QUEUE_START: Room lobby processor task starting, queue exists: True
DEBUG_WS_RECEIVE: Received event 'client_ready' from client in room lobby with data: {'room_id': 'lobby'}
DEBUG_LOBBY_WS: Sent initial room list to new lobby client
DEBUG_LOBBY_WS: Client disconnected from lobby
INFO:     connection closed
DEBUG_WS: Unregistered connection for room lobby. Remaining connections: 0
DEBUG_WS: Cleaned up empty room lobby
INFO:     ('127.0.0.1', 56949) - "WebSocket /ws/lobby" [accepted]
DEBUG_WS: Restarting lobby broadcast task...
DEBUG_WS: Registered new connection for room lobby. Total connections: 1
INFO:     connection open
DEBUG_WS: Starting enhanced broadcast queue processor for room lobby.
DEBUG_WS_QUEUE_START: Room lobby processor task starting, queue exists: True
DEBUG_WS_RECEIVE: Received event 'client_ready' from client in room lobby with data: {'room_id': 'lobby'}
DEBUG_LOBBY_WS: Sent initial room list to new lobby client
DEBUG_LOBBY_WS: Client disconnected from lobby
INFO:     connection closed
DEBUG_WS: Unregistered connection for room lobby. Remaining connections: 0
DEBUG_WS: Cleaned up empty room lobby
INFO:     ('127.0.0.1', 56955) - "WebSocket /ws/lobby" [accepted]
DEBUG_WS: Restarting lobby broadcast task...
DEBUG_WS: Registered new connection for room lobby. Total connections: 1
INFO:     connection open
DEBUG_WS: Starting enhanced broadcast queue processor for room lobby.
DEBUG_WS_QUEUE_START: Room lobby processor task starting, queue exists: True
DEBUG_WS_RECEIVE: Received event 'client_ready' from client in room lobby with data: {'room_id': 'lobby'}
DEBUG_LOBBY_WS: Sent initial room list to new lobby client
DEBUG_WS_RECEIVE: Received event 'create_room' from client in room lobby with data: {'player_name': 'Andy'}
DEBUG_LOBBY_WS: Created room 6F3697 for player Andy
DEBUG_WS: Entering broadcast method for room lobby, event room_created
ğŸ”” LOBBY_BROADCAST: Attempting to broadcast 'room_created' to lobby
ğŸ”” LOBBY_BROADCAST: Data keys: ['room_id', 'host_name', 'timestamp']
ğŸ”” LOBBY_BROADCAST: Found 1 lobby connections
ğŸ”” LOBBY_BROADCAST: Queue size: 0
DEBUG_WS: Attempting to queue event 'room_created' for room lobby with data: {'room_id': 'lobby', 'host_name': 'Andy', 'timestamp': 1751564728.843233}
ğŸ”§ SERIALIZATION_DEBUG: Testing JSON serialization for event 'room_created'
ğŸ”§ SERIALIZATION_DEBUG: JSON serialization test PASSED for event 'room_created' - 108 chars
ğŸ”§ SERIALIZATION_DEBUG: About to call queue.put() for event 'room_created'
âœ… SERIALIZATION_DEBUG: queue.put() completed successfully for event 'room_created'
DEBUG_WS: Message for event 'room_created' added to queue for room lobby.
ğŸ”” LOBBY_BROADCAST: Message added to lobby queue. New queue size: 1
DEBUG_WS: Entering broadcast method for room lobby, event room_list_update
ğŸ”” LOBBY_BROADCAST: Attempting to broadcast 'room_list_update' to lobby
ğŸ”” LOBBY_BROADCAST: Data keys: ['rooms', 'timestamp', 'reason']
ğŸ”” LOBBY_BROADCAST: Found 1 lobby connections
ğŸ”” LOBBY_BROADCAST: Queue size: 0
DEBUG_WS: Attempting to queue event 'room_list_update' for room lobby with data: {'rooms': [{'room_id': '6F3697', 'host_name': 'Andy', 'started': False, 'slots': {'P1': {'name': 'Andy', 'is_bot': False, 'is_host': True}, 'P2': {'name': 'Bot 2', 'is_bot': True, 'is_host': False}, 'P3': {'name': 'Bot 3', 'is_bot': True, 'is_host': False}, 'P4': {'name': 'Bot 4', 'is_bot': True, 'is_host': False}}, 'players': [{'name': 'Andy', 'is_bot': False, 'is_host': True}, {'name': 'Bot 2', 'is_bot': True, 'is_host': False}, {'name': 'Bot 3', 'is_bot': True, 'is_host': False}, {'name': 'Bot 4', 'is_bot': True, 'is_host': False}], 'occupied_slots': 4, 'total_slots': 4}], 'timestamp': 1751564728.843574, 'reason': 'new_room_created', 'room_id': 'lobby'}
ğŸ”§ SERIALIZATION_DEBUG: Testing JSON serialization for event 'room_list_update'
ğŸ”§ SERIALIZATION_DEBUG: JSON serialization test PASSED for event 'room_list_update' - 703 chars
ğŸ”§ SERIALIZATION_DEBUG: About to call queue.put() for event 'room_list_update'
âœ… SERIALIZATION_DEBUG: queue.put() completed successfully for event 'room_list_update'
DEBUG_WS: Message for event 'room_list_update' added to queue for room lobby.
ğŸ”” LOBBY_BROADCAST: Message added to lobby queue. New queue size: 1
âœ… Notified lobby about new room: 6F3697
DEBUG_WS_QUEUE: Room lobby got message: room_created
DEBUG_WS: Broadcasting event 'room_created' (op_id: unknown) to 1 clients in room lobby.
DEBUG_WS: Successfully sent 'room_created' to a client in room lobby.
DEBUG_WS_QUEUE: Room lobby got message: room_list_update
DEBUG_WS: Broadcasting event 'room_list_update' (op_id: unknown) to 1 clients in room lobby.
DEBUG_WS: Error sending to client in room lobby: 
DEBUG_WS_DISCONNECT: WebSocket client disconnected from room 6F3697.
INFO:     connection closed
DEBUG_WS: Attempted to unregister from non-existent room 6F3697
INFO:     ('127.0.0.1', 56957) - "WebSocket /ws/lobby" [accepted]
DEBUG_WS: Registered new connection for room lobby. Total connections: 1
INFO:     connection open
DEBUG_WS_RECEIVE: Received event 'client_ready' from client in room lobby with data: {'room_id': 'lobby'}
DEBUG_LOBBY_WS: Sent initial room list to new lobby client
INFO:     ('127.0.0.1', 56959) - "WebSocket /ws/6F3697" [accepted]
DEBUG_WS: Created new enhanced broadcast queue and task for room 6F3697.
DEBUG_WS: Registered new connection for room 6F3697. Total connections: 1
INFO:     connection open
DEBUG_WS: Starting enhanced broadcast queue processor for room 6F3697.
DEBUG_WS_QUEUE_START: Room 6F3697 processor task starting, queue exists: True
DEBUG_WS_RECEIVE: Received event 'client_ready' from client in room 6F3697 with data: {'room_id': '6F3697'}
DEBUG_WS_RECEIVE: Sent initial room state to client in room 6F3697 after client_ready.
DEBUG_WS_RECEIVE: Received event 'get_room_state' from client in room 6F3697 with data: {}
DEBUG_WS_RECEIVE: Sent room state to client in room 6F3697
DEBUG_WS_RECEIVE: Received event 'start_game' from client in room 6F3697 with data: {}
ğŸ”’ [Room 6F3697] Starting game: op_id=6F3697_1
DEBUG_WS: Entering broadcast method for room 6F3697, event phase_change
ğŸ”§ BROADCAST_DEDUP: Allowing phase_change through (phase=preparation, immediate=False, reconnect_sync=None)
DEBUG_WS: Attempting to queue event 'phase_change' for room 6F3697 with data: {'phase': 'preparation', 'phase_data': {'phase': 'preparation', 'game_round': 1, 'players_with_hands': [{'name': 'Andy', 'is_bot': False, 'hand_size': 0}, {'name': 'Bot 2', 'is_bot': True, 'hand_size': 0}, {'name': 'Bot 3', 'is_bot': True, 'hand_size': 0}, {'name': 'Bot 4', 'is_bot': True, 'hand_size': 0}]}, 'timestamp': 1751564729.618784, 'game_round': 1, 'room_id': '6F3697'}
ğŸ”§ SERIALIZATION_DEBUG: Testing JSON serialization for event 'phase_change'
ğŸ”§ SERIALIZATION_DEBUG: JSON serialization test PASSED for event 'phase_change' - 414 chars
ğŸ”§ SERIALIZATION_DEBUG: About to call queue.put() for event 'phase_change'
âœ… SERIALIZATION_DEBUG: queue.put() completed successfully for event 'phase_change'
DEBUG_WS: Message for event 'phase_change' added to queue for room 6F3697.
ğŸ”” BOT_MANAGER_DEBUG: Received event 'data_change' for room 6F3697 with data: {'data': {'phase': 'preparation', 'game_round': 1, 'players_with_hands': [{'name': 'Andy', 'is_bot': False, 'hand_size': 0}, {'name': 'Bot 2', 'is_bot': True, 'hand_size': 0, 'hand': []}, {'name': 'Bot 3', 'is_bot': True, 'hand_size': 0, 'hand': []}, {'name': 'Bot 4', 'is_bot': True, 'hand_size': 0, 'hand': []}]}, 'reason': 'Phase change to PREPARATION'}
âœ… BOT_MANAGER_DEBUG: Found handler for room 6F3697, delegating to handler...
ğŸ® BOT_HANDLER_DEBUG: Room 6F3697 handling event 'data_change' with data keys: ['data', 'reason']
ğŸ” BOT_HANDLER_DEBUG: Event type check - event == 'phase_change': False
ğŸ” BOT_HANDLER_DEBUG: Event value repr: 'data_change'
ğŸ”§ BOT_MANAGER_LOCK_FIX: Step 1 - Determining bot actions (minimal lock scope)
ğŸ”§ BOT_MANAGER_LOCK_FIX: Lock acquired for decision logic only
âš ï¸ BOT_HANDLER_DEBUG: Unknown event 'data_change' - ignoring
ğŸ”§ BOT_MANAGER_LOCK_FIX: Decision logic completed - releasing lock
ğŸ”§ BOT_MANAGER_LOCK_FIX: Step 2 - Executing 0 bot actions (lock-free)
ğŸ”” BOT_MANAGER_DEBUG: Received event 'phase_change' for room 6F3697 with data: {'phase': 'preparation', 'phase_data': {'phase': 'preparation', 'game_round': 1}}
âœ… BOT_MANAGER_DEBUG: Found handler for room 6F3697, delegating to handler...
ğŸ® BOT_HANDLER_DEBUG: Room 6F3697 handling event 'phase_change' with data keys: ['phase', 'phase_data']
ğŸ” BOT_HANDLER_DEBUG: Event type check - event == 'phase_change': True
ğŸ” BOT_HANDLER_DEBUG: Event value repr: 'phase_change'
ğŸ”§ BOT_MANAGER_LOCK_FIX: Step 1 - Determining bot actions (minimal lock scope)
ğŸ”§ BOT_MANAGER_LOCK_FIX: Lock acquired for decision logic only
ğŸš€ BOT_HANDLER_DEBUG: Analyzing enterprise phase change
ğŸ”§ BOT_MANAGER_LOCK_FIX: Decision logic completed - releasing lock
ğŸ”§ BOT_MANAGER_LOCK_FIX: Step 2 - Executing 0 bot actions (lock-free)
âœ… [Room 6F3697] StateManager integrated with version tracking
âœ… [Room 6F3697] Game and StateMachine started successfully: op_id=6F3697_1
âœ… [Room 6F3697] Bot manager registered for 3 bots
âœ… Game started in room 6F3697
DEBUG_WS_QUEUE: Room 6F3697 got message: phase_change
ğŸ”§ QUEUE_DEDUP: Allowing phase_change through (phase=preparation, immediate=False, reconnect_sync=None)
DEBUG_WS: Broadcasting event 'phase_change' (op_id: unknown) to 1 clients in room 6F3697.
DEBUG_WS: Successfully sent 'phase_change' to a client in room 6F3697.
INFO:     ('127.0.0.1', 56961) - "WebSocket /ws/6F3697" [accepted]
DEBUG_WS: Registered new connection for room 6F3697. Total connections: 2
INFO:     connection open
DEBUG_WS_DISCONNECT: WebSocket client disconnected from room 6F3697.
INFO:     connection closed
DEBUG_WS: Unregistered connection for room 6F3697. Remaining connections: 1
DEBUG_WS_RECEIVE: Received event 'client_ready' from client in room 6F3697 with data: {'room_id': '6F3697'}
DEBUG_WS_RECEIVE: Sent current game phase preparation to client in room 6F3697
DEBUG_WS_RECEIVE: Sent initial room state to client in room 6F3697 after client_ready.
DEBUG_WS_RECEIVE: Received event 'ping' from client in room lobby with data: {'timestamp': 1751564733867}

---

ActionManager.ts:63 ğŸ¯ ActionManager: Initialized for Phase 5.3 clean state flow
RecoveryService.ts:66 ğŸ”„ RecoveryService: Initialized
GameReplay.ts:99 ğŸ® GameReplayManager: Initialized
StateDebugger.ts:163 ğŸ” StateDebugger: Initialized
SyncChecker.ts:129 ğŸ”„ SyncChecker: Initialized
App.jsx:121 ğŸ® Phase 1-4 Enterprise Architecture - Global services initialized
NetworkService.ts:334 ğŸ”— Connection opened to room lobby
NetworkService.ts:132 ğŸŒ NetworkService: Connected to room lobby
NetworkService.ts:174 ğŸŒ NetworkService: Disconnected from room lobby
NetworkService.ts:218 ğŸ“¤ Queued message for lobby: get_rooms (1 queued)
NetworkService.ts:334 ğŸ”— Connection opened to room lobby
NetworkService.ts:132 ğŸŒ NetworkService: Connected to room lobby
LobbyPage.jsx:50 Received room_list_update: {roomId: 'lobby', data: {â€¦}, message: {â€¦}, timestamp: 1751564727726}
NetworkService.ts:174 ğŸŒ NetworkService: Disconnected from room lobby
NetworkService.ts:218 ğŸ“¤ Queued message for lobby: get_rooms (1 queued)
NetworkService.ts:334 ğŸ”— Connection opened to room lobby
NetworkService.ts:132 ğŸŒ NetworkService: Connected to room lobby
LobbyPage.jsx:50 Received room_list_update: {roomId: 'lobby', data: {â€¦}, message: {â€¦}, timestamp: 1751564728752}
LobbyPage.jsx:60 Received room_created: {roomId: 'lobby', data: {â€¦}, message: {â€¦}, timestamp: 1751564728843}
LobbyPage.jsx:61 ğŸŸ¢ Navigation: room_id = 6F3697 navigating to: /room/6F3697
LobbyPage.jsx:65 âœ… Navigating to new room: 6F3697
NetworkService.ts:174 ğŸŒ NetworkService: Disconnected from room lobby
NetworkService.ts:218 ğŸ“¤ Queued message for lobby: get_rooms (1 queued)
RoomPage.jsx:181 ğŸ¯ SLOT_1: player= undefined isEmpty= true
RoomPage.jsx:181 ğŸ¯ SLOT_2: player= undefined isEmpty= true
RoomPage.jsx:181 ğŸ¯ SLOT_3: player= undefined isEmpty= true
RoomPage.jsx:181 ğŸ¯ SLOT_4: player= undefined isEmpty= true
NetworkService.ts:334 ğŸ”— Connection opened to room lobby
NetworkService.ts:132 ğŸŒ NetworkService: Connected to room lobby
NetworkService.ts:334 ğŸ”— Connection opened to room 6F3697
NetworkService.ts:132 ğŸŒ NetworkService: Connected to room 6F3697
RoomPage.jsx:181 ğŸ¯ SLOT_1: player= undefined isEmpty= true
RoomPage.jsx:181 ğŸ¯ SLOT_2: player= undefined isEmpty= true
RoomPage.jsx:181 ğŸ¯ SLOT_3: player= undefined isEmpty= true
RoomPage.jsx:181 ğŸ¯ SLOT_4: player= undefined isEmpty= true
RoomPage.jsx:49 ğŸ  ROOM_UPDATE: Full data received: {players: Array(4), host_name: 'Andy', room_id: '6F3697', started: false}
RoomPage.jsx:50 ğŸ  ROOM_UPDATE: Players array: (4)Â [{â€¦}, {â€¦}, {â€¦}, {â€¦}]
RoomPage.jsx:51 ğŸ  ROOM_UPDATE: Players array type: object
RoomPage.jsx:52 ğŸ  ROOM_UPDATE: Players array length: 4
RoomPage.jsx:53 ğŸ  ROOM_UPDATE: Players array entries: (4)Â [Array(2), Array(2), Array(2), Array(2)]
RoomPage.jsx:181 ğŸ¯ SLOT_1: player= {name: 'Andy', is_bot: false, is_host: true} isEmpty= false
RoomPage.jsx:181 ğŸ¯ SLOT_2: player= {name: 'Bot 2', is_bot: true, is_host: false} isEmpty= false
RoomPage.jsx:181 ğŸ¯ SLOT_3: player= {name: 'Bot 3', is_bot: true, is_host: false} isEmpty= false
RoomPage.jsx:181 ğŸ¯ SLOT_4: player= {name: 'Bot 4', is_bot: true, is_host: false} isEmpty= false
RoomPage.jsx:87 ğŸ® START_GAME: Button clicked
RoomPage.jsx:88 ğŸ® START_GAME: Room ID: 6F3697
RoomPage.jsx:181 ğŸ¯ SLOT_1: player= {name: 'Andy', is_bot: false, is_host: true} isEmpty= false
RoomPage.jsx:181 ğŸ¯ SLOT_2: player= {name: 'Bot 2', is_bot: true, is_host: false} isEmpty= false
RoomPage.jsx:181 ğŸ¯ SLOT_3: player= {name: 'Bot 3', is_bot: true, is_host: false} isEmpty= false
RoomPage.jsx:181 ğŸ¯ SLOT_4: player= {name: 'Bot 4', is_bot: true, is_host: false} isEmpty= false
RoomPage.jsx:60 Game started, navigating to game page
NetworkService.ts:174 ğŸŒ NetworkService: Disconnected from room 6F3697
GameContext.jsx:35 ğŸš€ GAME_CONTEXT: Phase 5 Unified State Management initializing
NetworkService.ts:334 ğŸ”— Connection opened to room 6F3697
NetworkService.ts:132 ğŸŒ NetworkService: Connected to room 6F3697
NetworkService.ts:369 ğŸ”§ PHASE_CHANGE_DEBUG: Received phase_change in NetworkService: {roomId: '6F3697', phase: 'preparation', reconnect_sync: true, sync_response: undefined, isReconnecting: false}
ActionManager.ts:497 ğŸ”„ Phase change detected during action processing
NetworkIntegration.ts:156 ğŸ”„ PHASE_CHANGE_DEBUG: Received phase_change event: {phase: 'preparation', phase_data: Array(2), reason: 'Client reconnection sync', reconnect_sync: true, round: 1}
NetworkService.ts:396 ğŸ”„ Received sync/reconnect response, processing queued messages for room 6F3697
