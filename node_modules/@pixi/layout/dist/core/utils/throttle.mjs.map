{"version":3,"file":"throttle.mjs","sources":["../../../src/core/utils/throttle.ts"],"sourcesContent":["const throttleMap = new Map<\n    (...params: any[]) => void,\n    { throttledFunction: (...params: any[]) => void; args: any[] | null }\n>();\n\n/**\n * Lets you call a function and have it throttled by a certain delay.\n * Useful for when a function may be spammed!\n *\n * @example\n * ```\n * function resize(w, h){\n *  console.log('resized', w, h);\n * }\n *\n * window.onResize = ()=>{\n *  throttle(resize, 100)(window.innerWidth, window.innerHeight);\n * }\n * ```\n *\n * @param fun - the function you want throttled\n * @param delay - how long until the function is executed\n */\nexport function throttle(fun: (...params: any[]) => void, delay = 100, scope?: any): (...params: any[]) => void {\n    if (!throttleMap.has(fun)) {\n        let timerId: NodeJS.Timeout | number | null = null;\n\n        const throttledFunction = (...args: any): void => {\n            throttleMap.get(fun)!.args = args;\n\n            if (timerId) return;\n\n            const callFun = (): void => {\n                timerId = null;\n\n                const latestArgs = throttleMap.get(fun)!.args;\n\n                if (scope) {\n                    fun.call(scope, ...latestArgs!);\n                } else {\n                    fun(...latestArgs!);\n                }\n            };\n\n            if (delay === 0) {\n                callFun();\n            } else {\n                timerId = setTimeout(callFun, delay);\n            }\n        };\n\n        throttleMap.set(fun, { throttledFunction, args: null });\n    }\n\n    return throttleMap.get(fun)!.throttledFunction;\n}\n"],"names":[],"mappings":"AAAA,MAAM,kCAAkB,IAGtB;AAoBK,SAAS,SAAS,KAAiC,QAAQ,KAAK,OAAyC;AAC5G,MAAI,CAAC,YAAY,IAAI,GAAG,GAAG;AACvB,QAAI,UAA0C;AAExC,UAAA,oBAAoB,IAAI,SAAoB;AAClC,kBAAA,IAAI,GAAG,EAAG,OAAO;AAE7B,UAAI,QAAS;AAEb,YAAM,UAAU,MAAY;AACd,kBAAA;AAEV,cAAM,aAAa,YAAY,IAAI,GAAG,EAAG;AAIlC;AACH,cAAI,GAAG,UAAW;AAAA,QAAA;AAAA,MAE1B;AAEA,UAAI,UAAU,GAAG;AACL,gBAAA;AAAA,MAAA,OACL;AACO,kBAAA,WAAW,SAAS,KAAK;AAAA,MAAA;AAAA,IAE3C;AAEA,gBAAY,IAAI,KAAK,EAAE,mBAAmB,MAAM,MAAM;AAAA,EAAA;AAGnD,SAAA,YAAY,IAAI,GAAG,EAAG;AACjC;"}