{"version":3,"file":"Trackpad.mjs","sources":["../../../src/components/trackpad/Trackpad.ts"],"sourcesContent":["import { Point, Rectangle } from 'pixi.js';\nimport { type ConstrainEase, SlidingNumber } from './SlidingNumber';\n\nexport interface TrackpadOptions {\n    /** override the easing function when constraining */\n    xEase?: ConstrainEase;\n    yEase?: ConstrainEase;\n\n    maxSpeed?: number;\n    constrain?: boolean;\n\n    disableEasing?: boolean;\n}\n\n/** Easing controller for the {@link ScrollBox}. */\nexport class Trackpad {\n    xAxis: SlidingNumber;\n    yAxis: SlidingNumber;\n\n    protected _isDown!: boolean;\n    protected _globalPosition: Point;\n    protected _frame: Rectangle;\n    protected _bounds: Rectangle;\n    protected _dirty!: boolean;\n    protected disableEasing = false;\n\n    constructor(options: TrackpadOptions) {\n        this.xAxis = new SlidingNumber({\n            ease: options.xEase,\n            maxSpeed: options.maxSpeed,\n            constrain: options.constrain,\n        });\n\n        this.yAxis = new SlidingNumber({\n            ease: options.yEase,\n            maxSpeed: options.maxSpeed,\n            constrain: options.constrain,\n        });\n\n        this.disableEasing = options.disableEasing ?? false;\n\n        this._frame = new Rectangle();\n\n        this._bounds = new Rectangle();\n        this._globalPosition = new Point();\n    }\n\n    pointerDown(pos: Point): void {\n        this._globalPosition = pos;\n        this.xAxis.grab(pos.x);\n        this.yAxis.grab(pos.y);\n        this._isDown = true;\n    }\n\n    pointerUp(): void {\n        this._isDown = false;\n    }\n\n    pointerMove(pos: Point): void {\n        this._globalPosition = pos;\n    }\n\n    update(): void {\n        if (this._dirty) {\n            this._dirty = false;\n\n            this.xAxis.min = this._bounds.left;\n            this.xAxis.min = this._bounds.right - this._frame.width;\n\n            this.xAxis.min = this._bounds.top;\n            this.xAxis.min = this._bounds.bottom - this._frame.height;\n        }\n\n        if (this._isDown) {\n            this.xAxis.hold(this._globalPosition.x);\n            this.yAxis.hold(this._globalPosition.y);\n        } else {\n            this.xAxis.slide(this.disableEasing);\n            this.yAxis.slide(this.disableEasing);\n        }\n    }\n\n    resize(w: number, h: number): void {\n        this._frame.x = 0;\n        this._frame.width = w;\n\n        this._frame.y = 0;\n        this._frame.height = h;\n\n        this._dirty = true;\n    }\n\n    setBounds(minX: number, maxX: number, minY: number, maxY: number): void {\n        this._bounds.x = minX;\n        this._bounds.width = maxX - minX;\n        this._bounds.y = minY;\n        this._bounds.height = maxY - minY;\n\n        this._dirty = true;\n    }\n\n    get x(): number {\n        return this.xAxis.value;\n    }\n\n    get y(): number {\n        return this.yAxis.value;\n    }\n}\n"],"names":[],"mappings":";;;;;AAeO,MAAM,SAAS;AAAA,EAWlB,YAAY,SAA0B;AAVtC;AACA;AAEU;AACA;AACA;AACA;AACA;AACA,yCAAgB;AAGjB,SAAA,QAAQ,IAAI,cAAc;AAAA,MAC3B,MAAM,QAAQ;AAAA,MACd,UAAU,QAAQ;AAAA,MAClB,WAAW,QAAQ;AAAA,IAAA,CACtB;AAEI,SAAA,QAAQ,IAAI,cAAc;AAAA,MAC3B,MAAM,QAAQ;AAAA,MACd,UAAU,QAAQ;AAAA,MAClB,WAAW,QAAQ;AAAA,IAAA,CACtB;AAEI,SAAA,gBAAgB,QAAQ,iBAAiB;AAEzC,SAAA,SAAS,IAAI,UAAU;AAEvB,SAAA,UAAU,IAAI,UAAU;AACxB,SAAA,kBAAkB,IAAI,MAAM;AAAA,EAAA;AAAA,EAGrC,YAAY,KAAkB;AAC1B,SAAK,kBAAkB;AAClB,SAAA,MAAM,KAAK,IAAI,CAAC;AAChB,SAAA,MAAM,KAAK,IAAI,CAAC;AACrB,SAAK,UAAU;AAAA,EAAA;AAAA,EAGnB,YAAkB;AACd,SAAK,UAAU;AAAA,EAAA;AAAA,EAGnB,YAAY,KAAkB;AAC1B,SAAK,kBAAkB;AAAA,EAAA;AAAA,EAG3B,SAAe;AACX,QAAI,KAAK,QAAQ;AACb,WAAK,SAAS;AAET,WAAA,MAAM,MAAM,KAAK,QAAQ;AAC9B,WAAK,MAAM,MAAM,KAAK,QAAQ,QAAQ,KAAK,OAAO;AAE7C,WAAA,MAAM,MAAM,KAAK,QAAQ;AAC9B,WAAK,MAAM,MAAM,KAAK,QAAQ,SAAS,KAAK,OAAO;AAAA,IAAA;AAGvD,QAAI,KAAK,SAAS;AACd,WAAK,MAAM,KAAK,KAAK,gBAAgB,CAAC;AACtC,WAAK,MAAM,KAAK,KAAK,gBAAgB,CAAC;AAAA,IAAA,OACnC;AACE,WAAA,MAAM,MAAM,KAAK,aAAa;AAC9B,WAAA,MAAM,MAAM,KAAK,aAAa;AAAA,IAAA;AAAA,EACvC;AAAA,EAGJ,OAAO,GAAW,GAAiB;AAC/B,SAAK,OAAO,IAAI;AAChB,SAAK,OAAO,QAAQ;AAEpB,SAAK,OAAO,IAAI;AAChB,SAAK,OAAO,SAAS;AAErB,SAAK,SAAS;AAAA,EAAA;AAAA,EAGlB,UAAU,MAAc,MAAc,MAAc,MAAoB;AACpE,SAAK,QAAQ,IAAI;AACZ,SAAA,QAAQ,QAAQ,OAAO;AAC5B,SAAK,QAAQ,IAAI;AACZ,SAAA,QAAQ,SAAS,OAAO;AAE7B,SAAK,SAAS;AAAA,EAAA;AAAA,EAGlB,IAAI,IAAY;AACZ,WAAO,KAAK,MAAM;AAAA,EAAA;AAAA,EAGtB,IAAI,IAAY;AACZ,WAAO,KAAK,MAAM;AAAA,EAAA;AAE1B;"}